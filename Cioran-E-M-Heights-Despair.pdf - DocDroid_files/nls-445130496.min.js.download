/** Content:
/assets/422ebb1b/js/lib/nprogress.js
/assets/422ebb1b/js/pdfjs.js
/assets/422ebb1b/js/lib/node_modules/pdfjs-dist/web/compatibility.js
/assets/422ebb1b/js/lib/node_modules/pdfjs-dist/build/pdf.js
/assets/422ebb1b/js/lib/node_modules/pdfjs-dist/web/pdf_viewer.js
/assets/422ebb1b/js/utility/utility.js
/assets/422ebb1b/js/lib/magnific-popup/jquery.magnific-popup.js
/assets/422ebb1b/js/lib/pnotify.js
/assets/422ebb1b/js/global.js
*/
;(function(root,factory){if(typeof define==='function'&&define.amd){define(factory);}else if(typeof exports==='object'){module.exports=factory();}else{root.NProgress=factory();}})(this,function(){var NProgress={};NProgress.version='0.1.6';var Settings=NProgress.settings={minimum:0.08,easing:'ease',positionUsing:'',speed:200,trickle:true,trickleRate:0.02,trickleSpeed:800,showSpinner:true,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:'body',barClass:'',barPos:'',template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};NProgress.configure=function(options){var key,value;for(key in options){value=options[key];if(value!==undefined&&options.hasOwnProperty(key))Settings[key]=value;}
return this;};NProgress.status=null;NProgress.set=function(n){var started=NProgress.isStarted();n=clamp(n,Settings.minimum,1);NProgress.status=(n===1?null:n);var progress=NProgress.render(!started),bar=progress.querySelector(Settings.barSelector),speed=Settings.speed,ease=Settings.easing;progress.offsetWidth;queue(function(next){if(Settings.positionUsing==='')Settings.positionUsing=NProgress.getPositioningCSS();css(bar,barPositionCSS(n,speed,ease));if(n===1){css(progress,{transition:'none',opacity:1});progress.offsetWidth;setTimeout(function(){css(progress,{transition:'all '+speed+'ms linear',opacity:0});setTimeout(function(){NProgress.remove();next();},speed);},speed);}else{setTimeout(next,speed);}});return this;};NProgress.isStarted=function(){return typeof NProgress.status==='number';};NProgress.start=function(){if(!NProgress.status)NProgress.set(0);var work=function(){setTimeout(function(){if(!NProgress.status)return;NProgress.trickle();work();},Settings.trickleSpeed);};if(Settings.trickle)work();return this;};NProgress.done=function(force){if(!force&&!NProgress.status)return this;return NProgress.inc(0.3+0.5*Math.random()).set(1);};NProgress.inc=function(amount){var n=NProgress.status;if(!n){return NProgress.start();}else{if(typeof amount!=='number'){amount=(1-n)*clamp(Math.random()*n,0.1,0.95);}
n=clamp(n+amount,0,0.994);return NProgress.set(n);}};NProgress.trickle=function(){return NProgress.inc(Math.random()*Settings.trickleRate);};(function(){var initial=0,current=0;NProgress.promise=function($promise){if(!$promise||$promise.state()=="resolved"){return this;}
if(current==0){NProgress.start();}
initial++;current++;$promise.always(function(){current--;if(current==0){initial=0;NProgress.done();}else{NProgress.set((initial-current)/ initial);}});return this;};})();NProgress.render=function(fromStart){if(NProgress.isRendered())return document.getElementById('nprogress');addClass(document.documentElement,'nprogress-busy');var progress=document.createElement('div');progress.id='nprogress';progress.className=NProgress.settings.barPos+" "+NProgress.settings.barColor;progress.innerHTML=Settings.template;var bar=progress.querySelector(Settings.barSelector),perc=fromStart?'-100':toBarPerc(NProgress.status||0),parent=document.querySelector(Settings.parent),spinner;css(bar,{transition:'all 0 linear',transform:'translate3d('+perc+'%,0,0)'});if(!Settings.showSpinner){spinner=progress.querySelector(Settings.spinnerSelector);spinner&&removeElement(spinner);}
if(parent!=document.body){addClass(parent,'nprogress-custom-parent');}
parent.appendChild(progress);return progress;};NProgress.remove=function(){removeClass(document.documentElement,'nprogress-busy');removeClass(document.querySelector(Settings.parent),'nprogress-custom-parent')
var progress=document.getElementById('nprogress');progress&&removeElement(progress);};NProgress.isRendered=function(){return!!document.getElementById('nprogress');};NProgress.getPositioningCSS=function(){var bodyStyle=document.body.style;var vendorPrefix=('WebkitTransform'in bodyStyle)?'Webkit':('MozTransform'in bodyStyle)?'Moz':('msTransform'in bodyStyle)?'ms':('OTransform'in bodyStyle)?'O':'';if(vendorPrefix+'Perspective'in bodyStyle){return'translate3d';}else if(vendorPrefix+'Transform'in bodyStyle){return'translate';}else{return'margin';}};function clamp(n,min,max){if(n<min)return min;if(n>max)return max;return n;}
function toBarPerc(n){return(-1+n)*100;}
function barPositionCSS(n,speed,ease){var barCSS;if(Settings.positionUsing==='translate3d'){barCSS={transform:'translate3d('+toBarPerc(n)+'%,0,0)'};}else if(Settings.positionUsing==='translate'){barCSS={transform:'translate('+toBarPerc(n)+'%,0)'};}else{barCSS={'margin-left':toBarPerc(n)+'%'};}
barCSS.transition='all '+speed+'ms '+ease;return barCSS;}
var queue=(function(){var pending=[];function next(){var fn=pending.shift();if(fn){fn(next);}}
return function(fn){pending.push(fn);if(pending.length==1)next();};})();var css=(function(){var cssPrefixes=['Webkit','O','Moz','ms'],cssProps={};function camelCase(string){return string.replace(/^-ms-/,'ms-').replace(/-([\da-z])/gi,function(match,letter){return letter.toUpperCase();});}
function getVendorProp(name){var style=document.body.style;if(name in style)return name;var i=cssPrefixes.length,capName=name.charAt(0).toUpperCase()+name.slice(1),vendorName;while(i--){vendorName=cssPrefixes[i]+capName;if(vendorName in style)return vendorName;}
return name;}
function getStyleProp(name){name=camelCase(name);return cssProps[name]||(cssProps[name]=getVendorProp(name));}
function applyCss(element,prop,value){prop=getStyleProp(prop);element.style[prop]=value;}
return function(element,properties){var args=arguments,prop,value;if(args.length==2){for(prop in properties){value=properties[prop];if(value!==undefined&&properties.hasOwnProperty(prop))applyCss(element,prop,value);}}else{applyCss(element,args[1],args[2]);}}})();function hasClass(element,name){var list=typeof element=='string'?element:classList(element);return list.indexOf(' '+name+' ')>=0;}
function addClass(element,name){var oldList=classList(element),newList=oldList+name;if(hasClass(oldList,name))return;element.className=newList.substring(1);}
function removeClass(element,name){var oldList=classList(element),newList;if(!hasClass(element,name))return;newList=oldList.replace(' '+name+' ',' ');element.className=newList.substring(1,newList.length-1);}
function classList(element){return(' '+(element.className||'')+' ').replace(/\s+/gi,' ');}
function removeElement(element){element&&element.parentNode&&element.parentNode.removeChild(element);}
return NProgress;});;$(document).ready(function(){if(typeof PDF_URL!='undefined'){PDFJS.disableAutoFetch=true;PDFJS.disableStream=true;PDFJS.externalLinkTarget=2;PDFJS.externalLinkRel="nofollow";var isPrsentation=$('#content').hasClass('presentation');NProgress.configure({minimum:0.15,showSpinner:false,barColor:'npr-primary',barPos:''});var NProgressRemoveTimeout=null;var toolbarHideTimer=null;function getDocumentProgress(progressData){clearTimeout(NProgressRemoveTimeout);var percent=(progressData.loaded / progressData.total);NProgress.set(percent);NProgressRemoveTimeout=setTimeout(function(){NProgress.remove();},2000);}
var container=document.getElementById('container');var pdfLinkService=new PDFJS.PDFLinkService();var pdfViewer=new PDFJS.PDFViewer({container:container,linkService:pdfLinkService});pdfLinkService.setViewer(pdfViewer);function scrollToPage(page){pdfViewer.currentPageNumber=page;}
container.addEventListener('pagesinit',function(){pdfViewer._setScale(isPrsentation?'page-fit':'auto',true);$('#toolbar #totalPages').text(pdfViewer.pagesCount);$('#toolbar').fadeIn();$("#container").mousemove(function(){clearTimeout(toolbarHideTimer);$('#toolbar').fadeIn();toolbarHideTimer=setTimeout(function(){$('#toolbar').fadeOut();},2000);});$('#toolbar').mouseenter(function(){clearTimeout(toolbarHideTimer);});if($('#ba-inner').length>0){$('#ba-inner').insertAfter($('#pageContainer1'));(adsbygoogle=window.adsbygoogle||[]).push({});}
if(isPrsentation){var scrollDelta=0;$(window).bind('mousewheel DOMMouseScroll',function(event){var delta=event.originalEvent.wheelDelta||0;event.originalEvent.deltaY&&(delta=-event.originalEvent.deltaY);event.originalEvent.detail&&(delta=-event.originalEvent.detail);if(40<=Math.abs(delta)){delta /=40;}else if(0.025>=Math.abs(delta)){delta*=40;}
scrollDelta+=delta;if(scrollDelta<=-20){scrollToPage(pdfViewer.currentPageNumber+1);scrollDelta=0;}else if(scrollDelta>=20){scrollToPage(pdfViewer.currentPageNumber-1);scrollDelta=0;}});}
if(isPrsentation){$(window).bind('keydown',function(event){if(event.keyCode==33||event.keyCode==37||event.keyCode==38){scrollToPage(pdfViewer.currentPageNumber-1);}else if(event.keyCode==34||event.keyCode==39||event.keyCode==40){scrollToPage(pdfViewer.currentPageNumber+1);}});}
$('#container').focus();if(document.location.hash){var hash=document.location.hash.substring(1);pdfLinkService.setHash(hash);}});window.addEventListener("pagerendered",function(e){});window.addEventListener("resize",function(e){if(isPrsentation){$('#container').css({'margin-top':0,'margin-bottom':0});containerHeight=$('#container').height();oldPageNumber=-1;pdfViewer._setScale('page-fit',true);scrollToPage(pdfViewer.currentPageNumber);}});window.addEventListener('hashchange',function webViewerHashchange(evt){var hash=document.location.hash.substring(1);pdfLinkService.setHash(hash);});var oldPageNumber=-1;var containerHeight=$('#container').height();window.addEventListener('pagechange',function pagechange(e){if(e.pageNumber==oldPageNumber){return;}
oldPageNumber=e.pageNumber;$('#toolbar #currentPage').text(e.pageNumber);if(e.pageNumber==1){$('#toolbar a.prevPage').addClass('disabled');}else{$('#toolbar a.prevPage').removeClass('disabled');}
if(e.pageNumber==pdfViewer.pagesCount){$('#toolbar a.nextPage').addClass('disabled');}else{$('#toolbar a.nextPage').removeClass('disabled');}
if(isPrsentation){var padding=Math.ceil(((containerHeight)-$("#pageContainer"+e.pageNumber).height())/ 2);if(padding>0){$('#container').css({'margin-top':padding,'margin-bottom':padding});}}
if(history.replaceState){history.replaceState(null,null,location.pathname+(e.pageNumber>1?'#page='+e.pageNumber:''));}
if(typeof ga!='undefined'){ga('set','page',location.pathname+(e.pageNumber>1?'#page='+e.pageNumber:''));ga('send','pageview');}});$('#toolbar a.zoomIn').click(function(e){e.preventDefault();this.blur();pdfViewer._setScale(pdfViewer.currentScale+0.2,true);pdfViewer.update();});$('#toolbar a.zoomOut').click(function(e){e.preventDefault();this.blur();pdfViewer._setScale(pdfViewer.currentScale-0.2,true);pdfViewer.update();});$('#toolbar a.prevPage').click(function(e){e.preventDefault();this.blur();scrollToPage(pdfViewer.currentPageNumber-1);});$('#toolbar a.nextPage').click(function(e){e.preventDefault();this.blur();scrollToPage(pdfViewer.currentPageNumber+1);});var touchcontainer=container;var mc=new Hammer.Manager(touchcontainer);if(isPrsentation){var swipe=new Hammer.Swipe();mc.add([swipe]);}else{var pinch=new Hammer.Pinch();mc.add([pinch]);}
var scale=1;var newScale=1;touchcontainer.addEventListener("touchstart",function(ev){if(ev.touches.length>1&&pinch){$('.page').css('pointer-events','none');PDFJS.useOnlyCssZoom=true;mc.get(pinch).set({enable:true});}
clearTimeout(toolbarHideTimer);$('#toolbar').fadeIn();toolbarHideTimer=setTimeout(function(){$('#toolbar').fadeOut();},2000);});touchcontainer.addEventListener("touchend",function(ev){if(pinch){PDFJS.useOnlyCssZoom=false;mc.get(pinch).set({enable:false});if(newScale!=scale){scale=newScale;pdfViewer._setScale(scale+0.001,true);}}});mc.on("pinch",function(ev){pdfViewer._setScale(ev.scale,true);newScale=ev.scale;});mc.on("swiperight",function(ev){pdfViewer.currentPageNumber--;});mc.on("swipeleft",function(ev){pdfViewer.currentPageNumber++;});PDFJS.getDocument(PDF_URL,null,null,getDocumentProgress).then(function(pdfDocument){pdfViewer.setDocument(pdfDocument);pdfLinkService.setDocument(pdfDocument,null);});}
$('.shareDropdown').on('shown.bs.dropdown',function(){$('.shareDropdown input.linkInput').select();});if(self!=top){$('.navbar h1').html('<a href="'+self.location.href+'" target="_blank">'+$('.navbar h1').html()+" <i class='fa fa-external-link hidden-xs fs15 ml5'></i></a>");$('a.navbar-brand').attr('href',self.location.href);$('.navbar a').attr('target','_blank');$('.ba').remove();}});;(function compatibilityWrapper(){'use strict';var userAgent=navigator.userAgent;var isAndroid=/Android/.test(userAgent);var isAndroidPre3=/Android\s[0-2][^\d]/.test(userAgent);var isAndroidPre5=/Android\s[0-4][^\d]/.test(userAgent);var isChrome=userAgent.indexOf('Chrom')>=0;var isChromeWithRangeBug=/Chrome\/(39|40)\./.test(userAgent);var isIE=userAgent.indexOf('Trident')>=0;var isIOS=/\b(iPad|iPhone|iPod)(?=;)/.test(userAgent);var isOpera=userAgent.indexOf('Opera')>=0;var isSafari=/Safari\//.test(userAgent)&&!/(Chrome\/|Android\s)/.test(userAgent);if(typeof PDFJS==='undefined'){(typeof window!=='undefined'?window:this).PDFJS={};}
(function checkTypedArrayCompatibility(){if(typeof Uint8Array!=='undefined'){if(typeof Uint8Array.prototype.subarray==='undefined'){Uint8Array.prototype.subarray=function subarray(start,end){return new Uint8Array(this.slice(start,end));};Float32Array.prototype.subarray=function subarray(start,end){return new Float32Array(this.slice(start,end));};}
if(typeof Float64Array==='undefined'){window.Float64Array=Float32Array;}
return;}
function subarray(start,end){return new TypedArray(this.slice(start,end));}
function setArrayOffset(array,offset){if(arguments.length<2){offset=0;}
for(var i=0,n=array.length;i<n;++i,++offset){this[offset]=array[i]&0xFF;}}
function TypedArray(arg1){var result,i,n;if(typeof arg1==='number'){result=[];for(i=0;i<arg1;++i){result[i]=0;}}else if('slice'in arg1){result=arg1.slice(0);}else{result=[];for(i=0,n=arg1.length;i<n;++i){result[i]=arg1[i];}}
result.subarray=subarray;result.buffer=result;result.byteLength=result.length;result.set=setArrayOffset;if(typeof arg1==='object'&&arg1.buffer){result.buffer=arg1.buffer;}
return result;}
window.Uint8Array=TypedArray;window.Int8Array=TypedArray;window.Uint32Array=TypedArray;window.Int32Array=TypedArray;window.Uint16Array=TypedArray;window.Float32Array=TypedArray;window.Float64Array=TypedArray;})();(function normalizeURLObject(){if(!window.URL){window.URL=window.webkitURL;}})();(function checkObjectDefinePropertyCompatibility(){if(typeof Object.defineProperty!=='undefined'){var definePropertyPossible=true;try{Object.defineProperty(new Image(),'id',{value:'test'});var Test=function Test(){};Test.prototype={get id(){}};Object.defineProperty(new Test(),'id',{value:'',configurable:true,enumerable:true,writable:false});}catch(e){definePropertyPossible=false;}
if(definePropertyPossible){return;}}
Object.defineProperty=function objectDefineProperty(obj,name,def){delete obj[name];if('get'in def){obj.__defineGetter__(name,def['get']);}
if('set'in def){obj.__defineSetter__(name,def['set']);}
if('value'in def){obj.__defineSetter__(name,function objectDefinePropertySetter(value){this.__defineGetter__(name,function objectDefinePropertyGetter(){return value;});return value;});obj[name]=def.value;}};})();(function checkXMLHttpRequestResponseCompatibility(){var xhrPrototype=XMLHttpRequest.prototype;var xhr=new XMLHttpRequest();if(!('overrideMimeType'in xhr)){Object.defineProperty(xhrPrototype,'overrideMimeType',{value:function xmlHttpRequestOverrideMimeType(mimeType){}});}
if('responseType'in xhr){return;}
PDFJS.disableWorker=true;Object.defineProperty(xhrPrototype,'responseType',{get:function xmlHttpRequestGetResponseType(){return this._responseType||'text';},set:function xmlHttpRequestSetResponseType(value){if(value==='text'||value==='arraybuffer'){this._responseType=value;if(value==='arraybuffer'&&typeof this.overrideMimeType==='function'){this.overrideMimeType('text/plain; charset=x-user-defined');}}}});if(typeof VBArray!=='undefined'){Object.defineProperty(xhrPrototype,'response',{get:function xmlHttpRequestResponseGet(){if(this.responseType==='arraybuffer'){return new Uint8Array(new VBArray(this.responseBody).toArray());}
return this.responseText;}});return;}
Object.defineProperty(xhrPrototype,'response',{get:function xmlHttpRequestResponseGet(){if(this.responseType!=='arraybuffer'){return this.responseText;}
var text=this.responseText;var i,n=text.length;var result=new Uint8Array(n);for(i=0;i<n;++i){result[i]=text.charCodeAt(i)&0xFF;}
return result.buffer;}});})();(function checkWindowBtoaCompatibility(){if('btoa'in window){return;}
var digits='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';window.btoa=function windowBtoa(chars){var buffer='';var i,n;for(i=0,n=chars.length;i<n;i+=3){var b1=chars.charCodeAt(i)&0xFF;var b2=chars.charCodeAt(i+1)&0xFF;var b3=chars.charCodeAt(i+2)&0xFF;var d1=b1>>2,d2=((b1&3)<<4)|(b2>>4);var d3=i+1<n?((b2&0xF)<<2)|(b3>>6):64;var d4=i+2<n?(b3&0x3F):64;buffer+=(digits.charAt(d1)+digits.charAt(d2)+
digits.charAt(d3)+digits.charAt(d4));}
return buffer;};})();(function checkWindowAtobCompatibility(){if('atob'in window){return;}
var digits='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';window.atob=function(input){input=input.replace(/=+$/,'');if(input.length%4===1){throw new Error('bad atob input');}
for(var bc=0,bs,buffer,idx=0,output='';(buffer=input.charAt(idx++));~buffer&&(bs=bc%4?bs*64+buffer:buffer,bc++%4)?output+=String.fromCharCode(255&bs>>(-2*bc&6)):0){buffer=digits.indexOf(buffer);}
return output;};})();(function checkFunctionPrototypeBindCompatibility(){if(typeof Function.prototype.bind!=='undefined'){return;}
Function.prototype.bind=function functionPrototypeBind(obj){var fn=this,headArgs=Array.prototype.slice.call(arguments,1);var bound=function functionPrototypeBindBound(){var args=headArgs.concat(Array.prototype.slice.call(arguments));return fn.apply(obj,args);};return bound;};})();(function checkDatasetProperty(){var div=document.createElement('div');if('dataset'in div){return;}
Object.defineProperty(HTMLElement.prototype,'dataset',{get:function(){if(this._dataset){return this._dataset;}
var dataset={};for(var j=0,jj=this.attributes.length;j<jj;j++){var attribute=this.attributes[j];if(attribute.name.substring(0,5)!=='data-'){continue;}
var key=attribute.name.substring(5).replace(/\-([a-z])/g,function(all,ch){return ch.toUpperCase();});dataset[key]=attribute.value;}
Object.defineProperty(this,'_dataset',{value:dataset,writable:false,enumerable:false});return dataset;},enumerable:true});})();(function checkClassListProperty(){var div=document.createElement('div');if('classList'in div){return;}
function changeList(element,itemName,add,remove){var s=element.className||'';var list=s.split(/\s+/g);if(list[0]===''){list.shift();}
var index=list.indexOf(itemName);if(index<0&&add){list.push(itemName);}
if(index>=0&&remove){list.splice(index,1);}
element.className=list.join(' ');return(index>=0);}
var classListPrototype={add:function(name){changeList(this.element,name,true,false);},contains:function(name){return changeList(this.element,name,false,false);},remove:function(name){changeList(this.element,name,false,true);},toggle:function(name){changeList(this.element,name,true,true);}};Object.defineProperty(HTMLElement.prototype,'classList',{get:function(){if(this._classList){return this._classList;}
var classList=Object.create(classListPrototype,{element:{value:this,writable:false,enumerable:true}});Object.defineProperty(this,'_classList',{value:classList,writable:false,enumerable:false});return classList;},enumerable:true});})();(function checkConsoleCompatibility(){if(!('console'in window)){window.console={log:function(){},error:function(){},warn:function(){}};}else if(!('bind'in console.log)){console.log=(function(fn){return function(msg){return fn(msg);};})(console.log);console.error=(function(fn){return function(msg){return fn(msg);};})(console.error);console.warn=(function(fn){return function(msg){return fn(msg);};})(console.warn);}})();(function checkOnClickCompatibility(){function ignoreIfTargetDisabled(event){if(isDisabled(event.target)){event.stopPropagation();}}
function isDisabled(node){return node.disabled||(node.parentNode&&isDisabled(node.parentNode));}
if(isOpera){document.addEventListener('click',ignoreIfTargetDisabled,true);}})();(function checkOnBlobSupport(){if(isIE){PDFJS.disableCreateObjectURL=true;}})();(function checkNavigatorLanguage(){if('language'in navigator){return;}
PDFJS.locale=navigator.userLanguage||'en-US';})();(function checkRangeRequests(){if(isSafari||isAndroidPre3||isChromeWithRangeBug||isIOS){PDFJS.disableRange=true;PDFJS.disableStream=true;}})();(function checkHistoryManipulation(){if(!history.pushState||isAndroidPre3){PDFJS.disableHistory=true;}})();(function checkSetPresenceInImageData(){if(window.CanvasPixelArray){if(typeof window.CanvasPixelArray.prototype.set!=='function'){window.CanvasPixelArray.prototype.set=function(arr){for(var i=0,ii=this.length;i<ii;i++){this[i]=arr[i];}};}}else{var polyfill=false,versionMatch;if(isChrome){versionMatch=userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);polyfill=versionMatch&&parseInt(versionMatch[2])<21;}else if(isAndroid){polyfill=isAndroidPre5;}else if(isSafari){versionMatch=userAgent.match(/Version\/([0-9]+)\.([0-9]+)\.([0-9]+) Safari\//);polyfill=versionMatch&&parseInt(versionMatch[1])<6;}
if(polyfill){var contextPrototype=window.CanvasRenderingContext2D.prototype;var createImageData=contextPrototype.createImageData;contextPrototype.createImageData=function(w,h){var imageData=createImageData.call(this,w,h);imageData.data.set=function(arr){for(var i=0,ii=this.length;i<ii;i++){this[i]=arr[i];}};return imageData;};contextPrototype=null;}}})();(function checkRequestAnimationFrame(){function fakeRequestAnimationFrame(callback){window.setTimeout(callback,20);}
if(isIOS){window.requestAnimationFrame=fakeRequestAnimationFrame;return;}
if('requestAnimationFrame'in window){return;}
window.requestAnimationFrame=window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||fakeRequestAnimationFrame;})();(function checkCanvasSizeLimitation(){if(isIOS||isAndroid){PDFJS.maxCanvasPixels=5242880;}})();(function checkFullscreenSupport(){if(isIE&&window.parent!==window){PDFJS.disableFullscreen=true;}})();(function checkCurrentScript(){if('currentScript'in document){return;}
Object.defineProperty(document,'currentScript',{get:function(){var scripts=document.getElementsByTagName('script');return scripts[scripts.length-1];},enumerable:true,configurable:true});})();}).call((typeof window==='undefined')?this:window);;(function(root,factory){'use strict';if(typeof define==='function'&&define.amd){define('pdfjs-dist/build/pdf',['exports'],factory);}else if(typeof exports!=='undefined'){factory(exports);}else{factory(root['pdfjsDistBuildPdf']={});}}(this,function(exports){'use strict';var pdfjsVersion='1.6.465';var pdfjsBuild='f8e793f';var pdfjsFilePath=typeof document!=='undefined'&&document.currentScript?document.currentScript.src:null;var pdfjsLibs={};(function pdfjsWrapper(){(function(root,factory){factory(root.pdfjsSharedUtil={});}(this,function(exports){var globalScope=typeof window!=='undefined'?window:typeof global!=='undefined'?global:typeof self!=='undefined'?self:this;var FONT_IDENTITY_MATRIX=[0.001,0,0,0.001,0,0];var TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};var ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};var AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};var AnnotationFlag={INVISIBLE:0x01,HIDDEN:0x02,PRINT:0x04,NOZOOM:0x08,NOROTATE:0x10,NOVIEW:0x20,READONLY:0x40,LOCKED:0x80,TOGGLENOVIEW:0x100,LOCKEDCONTENTS:0x200};var AnnotationFieldFlag={READONLY:0x0000001,REQUIRED:0x0000002,NOEXPORT:0x0000004,MULTILINE:0x0001000,PASSWORD:0x0002000,NOTOGGLETOOFF:0x0004000,RADIO:0x0008000,PUSHBUTTON:0x0010000,COMBO:0x0020000,EDIT:0x0040000,SORT:0x0080000,FILESELECT:0x0100000,MULTISELECT:0x0200000,DONOTSPELLCHECK:0x0400000,DONOTSCROLL:0x0800000,COMB:0x1000000,RICHTEXT:0x2000000,RADIOSINUNISON:0x2000000,COMMITONSELCHANGE:0x4000000};var AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};var StreamType={UNKNOWN:0,FLATE:1,LZW:2,DCT:3,JPX:4,JBIG:5,A85:6,AHX:7,CCF:8,RL:9};var FontType={UNKNOWN:0,TYPE1:1,TYPE1C:2,CIDFONTTYPE0:3,CIDFONTTYPE0C:4,TRUETYPE:5,CIDFONTTYPE2:6,TYPE3:7,OPENTYPE:8,TYPE0:9,MMTYPE1:10};var VERBOSITY_LEVELS={errors:0,warnings:1,infos:5};var OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};var verbosity=VERBOSITY_LEVELS.warnings;function setVerbosityLevel(level){verbosity=level;}
function getVerbosityLevel(){return verbosity;}
function info(msg){if(verbosity>=VERBOSITY_LEVELS.infos){console.log('Info: '+msg);}}
function warn(msg){if(verbosity>=VERBOSITY_LEVELS.warnings){console.log('Warning: '+msg);}}
function deprecated(details){console.log('Deprecated API usage: '+details);}
function error(msg){if(verbosity>=VERBOSITY_LEVELS.errors){console.log('Error: '+msg);console.log(backtrace());}
throw new Error(msg);}
function backtrace(){try{throw new Error();}catch(e){return e.stack?e.stack.split('\n').slice(2).join('\n'):'';}}
function assert(cond,msg){if(!cond){error(msg);}}
var UNSUPPORTED_FEATURES={unknown:'unknown',forms:'forms',javaScript:'javaScript',smask:'smask',shadingPattern:'shadingPattern',font:'font'};function isSameOrigin(baseUrl,otherUrl){try{var base=new URL(baseUrl);if(!base.origin||base.origin==='null'){return false;}}catch(e){return false;}
var other=new URL(otherUrl,base);return base.origin===other.origin;}
function isValidProtocol(url){if(!url){return false;}
switch(url.protocol){case'http:':case'https:':case'ftp:':case'mailto:':case'tel:':return true;default:return false;}}
function createValidAbsoluteUrl(url,baseUrl){if(!url){return null;}
try{var absoluteUrl=baseUrl?new URL(url,baseUrl):new URL(url);if(isValidProtocol(absoluteUrl)){return absoluteUrl;}}catch(ex){}
return null;}
function shadow(obj,prop,value){Object.defineProperty(obj,prop,{value:value,enumerable:true,configurable:true,writable:false});return value;}
function getLookupTableFactory(initializer){var lookup;return function(){if(initializer){lookup=Object.create(null);initializer(lookup);initializer=null;}
return lookup;};}
var PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};var PasswordException=function PasswordExceptionClosure(){function PasswordException(msg,code){this.name='PasswordException';this.message=msg;this.code=code;}
PasswordException.prototype=new Error();PasswordException.constructor=PasswordException;return PasswordException;}();var UnknownErrorException=function UnknownErrorExceptionClosure(){function UnknownErrorException(msg,details){this.name='UnknownErrorException';this.message=msg;this.details=details;}
UnknownErrorException.prototype=new Error();UnknownErrorException.constructor=UnknownErrorException;return UnknownErrorException;}();var InvalidPDFException=function InvalidPDFExceptionClosure(){function InvalidPDFException(msg){this.name='InvalidPDFException';this.message=msg;}
InvalidPDFException.prototype=new Error();InvalidPDFException.constructor=InvalidPDFException;return InvalidPDFException;}();var MissingPDFException=function MissingPDFExceptionClosure(){function MissingPDFException(msg){this.name='MissingPDFException';this.message=msg;}
MissingPDFException.prototype=new Error();MissingPDFException.constructor=MissingPDFException;return MissingPDFException;}();var UnexpectedResponseException=function UnexpectedResponseExceptionClosure(){function UnexpectedResponseException(msg,status){this.name='UnexpectedResponseException';this.message=msg;this.status=status;}
UnexpectedResponseException.prototype=new Error();UnexpectedResponseException.constructor=UnexpectedResponseException;return UnexpectedResponseException;}();var NotImplementedException=function NotImplementedExceptionClosure(){function NotImplementedException(msg){this.message=msg;}
NotImplementedException.prototype=new Error();NotImplementedException.prototype.name='NotImplementedException';NotImplementedException.constructor=NotImplementedException;return NotImplementedException;}();var MissingDataException=function MissingDataExceptionClosure(){function MissingDataException(begin,end){this.begin=begin;this.end=end;this.message='Missing data ['+begin+', '+end+')';}
MissingDataException.prototype=new Error();MissingDataException.prototype.name='MissingDataException';MissingDataException.constructor=MissingDataException;return MissingDataException;}();var XRefParseException=function XRefParseExceptionClosure(){function XRefParseException(msg){this.message=msg;}
XRefParseException.prototype=new Error();XRefParseException.prototype.name='XRefParseException';XRefParseException.constructor=XRefParseException;return XRefParseException;}();var NullCharactersRegExp=/\x00/g;function removeNullCharacters(str){if(typeof str!=='string'){warn('The argument for removeNullCharacters must be a string.');return str;}
return str.replace(NullCharactersRegExp,'');}
function bytesToString(bytes){assert(bytes!==null&&typeof bytes==='object'&&bytes.length!==undefined,'Invalid argument for bytesToString');var length=bytes.length;var MAX_ARGUMENT_COUNT=8192;if(length<MAX_ARGUMENT_COUNT){return String.fromCharCode.apply(null,bytes);}
var strBuf=[];for(var i=0;i<length;i+=MAX_ARGUMENT_COUNT){var chunkEnd=Math.min(i+MAX_ARGUMENT_COUNT,length);var chunk=bytes.subarray(i,chunkEnd);strBuf.push(String.fromCharCode.apply(null,chunk));}
return strBuf.join('');}
function stringToBytes(str){assert(typeof str==='string','Invalid argument for stringToBytes');var length=str.length;var bytes=new Uint8Array(length);for(var i=0;i<length;++i){bytes[i]=str.charCodeAt(i)&0xFF;}
return bytes;}
function arrayByteLength(arr){if(arr.length!==undefined){return arr.length;}
assert(arr.byteLength!==undefined);return arr.byteLength;}
function arraysToBytes(arr){if(arr.length===1&&arr[0]instanceof Uint8Array){return arr[0];}
var resultLength=0;var i,ii=arr.length;var item,itemLength;for(i=0;i<ii;i++){item=arr[i];itemLength=arrayByteLength(item);resultLength+=itemLength;}
var pos=0;var data=new Uint8Array(resultLength);for(i=0;i<ii;i++){item=arr[i];if(!(item instanceof Uint8Array)){if(typeof item==='string'){item=stringToBytes(item);}else{item=new Uint8Array(item);}}
itemLength=item.byteLength;data.set(item,pos);pos+=itemLength;}
return data;}
function string32(value){return String.fromCharCode(value>>24&0xff,value>>16&0xff,value>>8&0xff,value&0xff);}
function log2(x){var n=1,i=0;while(x>n){n<<=1;i++;}
return i;}
function readInt8(data,start){return data[start]<<24>>24;}
function readUint16(data,offset){return data[offset]<<8|data[offset+1];}
function readUint32(data,offset){return(data[offset]<<24|data[offset+1]<<16|data[offset+2]<<8|data[offset+3])>>>0;}
function isLittleEndian(){var buffer8=new Uint8Array(2);buffer8[0]=1;var buffer16=new Uint16Array(buffer8.buffer);return buffer16[0]===1;}
function isEvalSupported(){try{new Function('');return true;}catch(e){return false;}}
var Uint32ArrayView=function Uint32ArrayViewClosure(){function Uint32ArrayView(buffer,length){this.buffer=buffer;this.byteLength=buffer.length;this.length=length===undefined?this.byteLength>>2:length;ensureUint32ArrayViewProps(this.length);}
Uint32ArrayView.prototype=Object.create(null);var uint32ArrayViewSetters=0;function createUint32ArrayProp(index){return{get:function(){var buffer=this.buffer,offset=index<<2;return(buffer[offset]|buffer[offset+1]<<8|buffer[offset+2]<<16|buffer[offset+3]<<24)>>>0;},set:function(value){var buffer=this.buffer,offset=index<<2;buffer[offset]=value&255;buffer[offset+1]=value>>8&255;buffer[offset+2]=value>>16&255;buffer[offset+3]=value>>>24&255;}};}
function ensureUint32ArrayViewProps(length){while(uint32ArrayViewSetters<length){Object.defineProperty(Uint32ArrayView.prototype,uint32ArrayViewSetters,createUint32ArrayProp(uint32ArrayViewSetters));uint32ArrayViewSetters++;}}
return Uint32ArrayView;}();exports.Uint32ArrayView=Uint32ArrayView;var IDENTITY_MATRIX=[1,0,0,1,0,0];var Util=function UtilClosure(){function Util(){}
var rgbBuf=['rgb(',0,',',0,',',0,')'];Util.makeCssRgb=function Util_makeCssRgb(r,g,b){rgbBuf[1]=r;rgbBuf[3]=g;rgbBuf[5]=b;return rgbBuf.join('');};Util.transform=function Util_transform(m1,m2){return[m1[0]*m2[0]+m1[2]*m2[1],m1[1]*m2[0]+m1[3]*m2[1],m1[0]*m2[2]+m1[2]*m2[3],m1[1]*m2[2]+m1[3]*m2[3],m1[0]*m2[4]+m1[2]*m2[5]+m1[4],m1[1]*m2[4]+m1[3]*m2[5]+m1[5]];};Util.applyTransform=function Util_applyTransform(p,m){var xt=p[0]*m[0]+p[1]*m[2]+m[4];var yt=p[0]*m[1]+p[1]*m[3]+m[5];return[xt,yt];};Util.applyInverseTransform=function Util_applyInverseTransform(p,m){var d=m[0]*m[3]-m[1]*m[2];var xt=(p[0]*m[3]-p[1]*m[2]+m[2]*m[5]-m[4]*m[3])/ d;var yt=(-p[0]*m[1]+p[1]*m[0]+m[4]*m[1]-m[5]*m[0])/ d;return[xt,yt];};Util.getAxialAlignedBoundingBox=function Util_getAxialAlignedBoundingBox(r,m){var p1=Util.applyTransform(r,m);var p2=Util.applyTransform(r.slice(2,4),m);var p3=Util.applyTransform([r[0],r[3]],m);var p4=Util.applyTransform([r[2],r[1]],m);return[Math.min(p1[0],p2[0],p3[0],p4[0]),Math.min(p1[1],p2[1],p3[1],p4[1]),Math.max(p1[0],p2[0],p3[0],p4[0]),Math.max(p1[1],p2[1],p3[1],p4[1])];};Util.inverseTransform=function Util_inverseTransform(m){var d=m[0]*m[3]-m[1]*m[2];return[m[3]/ d,-m[1]/ d,-m[2]/ d,m[0]/ d,(m[2]*m[5]-m[4]*m[3])/ d,(m[4]*m[1]-m[5]*m[0])/ d];};Util.apply3dTransform=function Util_apply3dTransform(m,v){return[m[0]*v[0]+m[1]*v[1]+m[2]*v[2],m[3]*v[0]+m[4]*v[1]+m[5]*v[2],m[6]*v[0]+m[7]*v[1]+m[8]*v[2]];};Util.singularValueDecompose2dScale=function Util_singularValueDecompose2dScale(m){var transpose=[m[0],m[2],m[1],m[3]];var a=m[0]*transpose[0]+m[1]*transpose[2];var b=m[0]*transpose[1]+m[1]*transpose[3];var c=m[2]*transpose[0]+m[3]*transpose[2];var d=m[2]*transpose[1]+m[3]*transpose[3];var first=(a+d)/ 2;var second=Math.sqrt((a+d)*(a+d)-4*(a*d-c*b))/ 2;var sx=first+second||1;var sy=first-second||1;return[Math.sqrt(sx),Math.sqrt(sy)];};Util.normalizeRect=function Util_normalizeRect(rect){var r=rect.slice(0);if(rect[0]>rect[2]){r[0]=rect[2];r[2]=rect[0];}
if(rect[1]>rect[3]){r[1]=rect[3];r[3]=rect[1];}
return r;};Util.intersect=function Util_intersect(rect1,rect2){function compare(a,b){return a-b;}
var orderedX=[rect1[0],rect1[2],rect2[0],rect2[2]].sort(compare),orderedY=[rect1[1],rect1[3],rect2[1],rect2[3]].sort(compare),result=[];rect1=Util.normalizeRect(rect1);rect2=Util.normalizeRect(rect2);if(orderedX[0]===rect1[0]&&orderedX[1]===rect2[0]||orderedX[0]===rect2[0]&&orderedX[1]===rect1[0]){result[0]=orderedX[1];result[2]=orderedX[2];}else{return false;}
if(orderedY[0]===rect1[1]&&orderedY[1]===rect2[1]||orderedY[0]===rect2[1]&&orderedY[1]===rect1[1]){result[1]=orderedY[1];result[3]=orderedY[2];}else{return false;}
return result;};Util.sign=function Util_sign(num){return num<0?-1:1;};var ROMAN_NUMBER_MAP=['','C','CC','CCC','CD','D','DC','DCC','DCCC','CM','','X','XX','XXX','XL','L','LX','LXX','LXXX','XC','','I','II','III','IV','V','VI','VII','VIII','IX'];Util.toRoman=function Util_toRoman(number,lowerCase){assert(isInt(number)&&number>0,'The number should be a positive integer.');var pos,romanBuf=[];while(number>=1000){number-=1000;romanBuf.push('M');}
pos=number / 100|0;number%=100;romanBuf.push(ROMAN_NUMBER_MAP[pos]);pos=number / 10|0;number%=10;romanBuf.push(ROMAN_NUMBER_MAP[10+pos]);romanBuf.push(ROMAN_NUMBER_MAP[20+number]);var romanStr=romanBuf.join('');return lowerCase?romanStr.toLowerCase():romanStr;};Util.appendToArray=function Util_appendToArray(arr1,arr2){Array.prototype.push.apply(arr1,arr2);};Util.prependToArray=function Util_prependToArray(arr1,arr2){Array.prototype.unshift.apply(arr1,arr2);};Util.extendObj=function extendObj(obj1,obj2){for(var key in obj2){obj1[key]=obj2[key];}};Util.getInheritableProperty=function Util_getInheritableProperty(dict,name,getArray){while(dict&&!dict.has(name)){dict=dict.get('Parent');}
if(!dict){return null;}
return getArray?dict.getArray(name):dict.get(name);};Util.inherit=function Util_inherit(sub,base,prototype){sub.prototype=Object.create(base.prototype);sub.prototype.constructor=sub;for(var prop in prototype){sub.prototype[prop]=prototype[prop];}};Util.loadScript=function Util_loadScript(src,callback){var script=document.createElement('script');var loaded=false;script.setAttribute('src',src);if(callback){script.onload=function(){if(!loaded){callback();}
loaded=true;};}
document.getElementsByTagName('head')[0].appendChild(script);};return Util;}();var PageViewport=function PageViewportClosure(){function PageViewport(viewBox,scale,rotation,offsetX,offsetY,dontFlip){this.viewBox=viewBox;this.scale=scale;this.rotation=rotation;this.offsetX=offsetX;this.offsetY=offsetY;var centerX=(viewBox[2]+viewBox[0])/ 2;var centerY=(viewBox[3]+viewBox[1])/ 2;var rotateA,rotateB,rotateC,rotateD;rotation=rotation%360;rotation=rotation<0?rotation+360:rotation;switch(rotation){case 180:rotateA=-1;rotateB=0;rotateC=0;rotateD=1;break;case 90:rotateA=0;rotateB=1;rotateC=1;rotateD=0;break;case 270:rotateA=0;rotateB=-1;rotateC=-1;rotateD=0;break;default:rotateA=1;rotateB=0;rotateC=0;rotateD=-1;break;}
if(dontFlip){rotateC=-rotateC;rotateD=-rotateD;}
var offsetCanvasX,offsetCanvasY;var width,height;if(rotateA===0){offsetCanvasX=Math.abs(centerY-viewBox[1])*scale+offsetX;offsetCanvasY=Math.abs(centerX-viewBox[0])*scale+offsetY;width=Math.abs(viewBox[3]-viewBox[1])*scale;height=Math.abs(viewBox[2]-viewBox[0])*scale;}else{offsetCanvasX=Math.abs(centerX-viewBox[0])*scale+offsetX;offsetCanvasY=Math.abs(centerY-viewBox[1])*scale+offsetY;width=Math.abs(viewBox[2]-viewBox[0])*scale;height=Math.abs(viewBox[3]-viewBox[1])*scale;}
this.transform=[rotateA*scale,rotateB*scale,rotateC*scale,rotateD*scale,offsetCanvasX-rotateA*scale*centerX-rotateC*scale*centerY,offsetCanvasY-rotateB*scale*centerX-rotateD*scale*centerY];this.width=width;this.height=height;this.fontScale=scale;}
PageViewport.prototype={clone:function PageViewPort_clone(args){args=args||{};var scale='scale'in args?args.scale:this.scale;var rotation='rotation'in args?args.rotation:this.rotation;return new PageViewport(this.viewBox.slice(),scale,rotation,this.offsetX,this.offsetY,args.dontFlip);},convertToViewportPoint:function PageViewport_convertToViewportPoint(x,y){return Util.applyTransform([x,y],this.transform);},convertToViewportRectangle:function PageViewport_convertToViewportRectangle(rect){var tl=Util.applyTransform([rect[0],rect[1]],this.transform);var br=Util.applyTransform([rect[2],rect[3]],this.transform);return[tl[0],tl[1],br[0],br[1]];},convertToPdfPoint:function PageViewport_convertToPdfPoint(x,y){return Util.applyInverseTransform([x,y],this.transform);}};return PageViewport;}();var PDFStringTranslateTable=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0x2D8,0x2C7,0x2C6,0x2D9,0x2DD,0x2DB,0x2DA,0x2DC,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0x2022,0x2020,0x2021,0x2026,0x2014,0x2013,0x192,0x2044,0x2039,0x203A,0x2212,0x2030,0x201E,0x201C,0x201D,0x2018,0x2019,0x201A,0x2122,0xFB01,0xFB02,0x141,0x152,0x160,0x178,0x17D,0x131,0x142,0x153,0x161,0x17E,0,0x20AC];function stringToPDFString(str){var i,n=str.length,strBuf=[];if(str[0]==='\xFE'&&str[1]==='\xFF'){for(i=2;i<n;i+=2){strBuf.push(String.fromCharCode(str.charCodeAt(i)<<8|str.charCodeAt(i+1)));}}else{for(i=0;i<n;++i){var code=PDFStringTranslateTable[str.charCodeAt(i)];strBuf.push(code?String.fromCharCode(code):str.charAt(i));}}
return strBuf.join('');}
function stringToUTF8String(str){return decodeURIComponent(escape(str));}
function utf8StringToString(str){return unescape(encodeURIComponent(str));}
function isEmptyObj(obj){for(var key in obj){return false;}
return true;}
function isBool(v){return typeof v==='boolean';}
function isInt(v){return typeof v==='number'&&(v|0)===v;}
function isNum(v){return typeof v==='number';}
function isString(v){return typeof v==='string';}
function isArray(v){return v instanceof Array;}
function isArrayBuffer(v){return typeof v==='object'&&v!==null&&v.byteLength!==undefined;}
function isSpace(ch){return ch===0x20||ch===0x09||ch===0x0D||ch===0x0A;}
function createPromiseCapability(){var capability={};capability.promise=new Promise(function(resolve,reject){capability.resolve=resolve;capability.reject=reject;});return capability;}
(function PromiseClosure(){if(globalScope.Promise){if(typeof globalScope.Promise.all!=='function'){globalScope.Promise.all=function(iterable){var count=0,results=[],resolve,reject;var promise=new globalScope.Promise(function(resolve_,reject_){resolve=resolve_;reject=reject_;});iterable.forEach(function(p,i){count++;p.then(function(result){results[i]=result;count--;if(count===0){resolve(results);}},reject);});if(count===0){resolve(results);}
return promise;};}
if(typeof globalScope.Promise.resolve!=='function'){globalScope.Promise.resolve=function(value){return new globalScope.Promise(function(resolve){resolve(value);});};}
if(typeof globalScope.Promise.reject!=='function'){globalScope.Promise.reject=function(reason){return new globalScope.Promise(function(resolve,reject){reject(reason);});};}
if(typeof globalScope.Promise.prototype.catch!=='function'){globalScope.Promise.prototype.catch=function(onReject){return globalScope.Promise.prototype.then(undefined,onReject);};}
return;}
var STATUS_PENDING=0;var STATUS_RESOLVED=1;var STATUS_REJECTED=2;var REJECTION_TIMEOUT=500;var HandlerManager={handlers:[],running:false,unhandledRejections:[],pendingRejectionCheck:false,scheduleHandlers:function scheduleHandlers(promise){if(promise._status===STATUS_PENDING){return;}
this.handlers=this.handlers.concat(promise._handlers);promise._handlers=[];if(this.running){return;}
this.running=true;setTimeout(this.runHandlers.bind(this),0);},runHandlers:function runHandlers(){var RUN_TIMEOUT=1;var timeoutAt=Date.now()+RUN_TIMEOUT;while(this.handlers.length>0){var handler=this.handlers.shift();var nextStatus=handler.thisPromise._status;var nextValue=handler.thisPromise._value;try{if(nextStatus===STATUS_RESOLVED){if(typeof handler.onResolve==='function'){nextValue=handler.onResolve(nextValue);}}else if(typeof handler.onReject==='function'){nextValue=handler.onReject(nextValue);nextStatus=STATUS_RESOLVED;if(handler.thisPromise._unhandledRejection){this.removeUnhandeledRejection(handler.thisPromise);}}}catch(ex){nextStatus=STATUS_REJECTED;nextValue=ex;}
handler.nextPromise._updateStatus(nextStatus,nextValue);if(Date.now()>=timeoutAt){break;}}
if(this.handlers.length>0){setTimeout(this.runHandlers.bind(this),0);return;}
this.running=false;},addUnhandledRejection:function addUnhandledRejection(promise){this.unhandledRejections.push({promise:promise,time:Date.now()});this.scheduleRejectionCheck();},removeUnhandeledRejection:function removeUnhandeledRejection(promise){promise._unhandledRejection=false;for(var i=0;i<this.unhandledRejections.length;i++){if(this.unhandledRejections[i].promise===promise){this.unhandledRejections.splice(i);i--;}}},scheduleRejectionCheck:function scheduleRejectionCheck(){if(this.pendingRejectionCheck){return;}
this.pendingRejectionCheck=true;setTimeout(function rejectionCheck(){this.pendingRejectionCheck=false;var now=Date.now();for(var i=0;i<this.unhandledRejections.length;i++){if(now-this.unhandledRejections[i].time>REJECTION_TIMEOUT){var unhandled=this.unhandledRejections[i].promise._value;var msg='Unhandled rejection: '+unhandled;if(unhandled.stack){msg+='\n'+unhandled.stack;}
warn(msg);this.unhandledRejections.splice(i);i--;}}
if(this.unhandledRejections.length){this.scheduleRejectionCheck();}}.bind(this),REJECTION_TIMEOUT);}};var Promise=function Promise(resolver){this._status=STATUS_PENDING;this._handlers=[];try{resolver.call(this,this._resolve.bind(this),this._reject.bind(this));}catch(e){this._reject(e);}};Promise.all=function Promise_all(promises){var resolveAll,rejectAll;var deferred=new Promise(function(resolve,reject){resolveAll=resolve;rejectAll=reject;});var unresolved=promises.length;var results=[];if(unresolved===0){resolveAll(results);return deferred;}
function reject(reason){if(deferred._status===STATUS_REJECTED){return;}
results=[];rejectAll(reason);}
for(var i=0,ii=promises.length;i<ii;++i){var promise=promises[i];var resolve=function(i){return function(value){if(deferred._status===STATUS_REJECTED){return;}
results[i]=value;unresolved--;if(unresolved===0){resolveAll(results);}};}(i);if(Promise.isPromise(promise)){promise.then(resolve,reject);}else{resolve(promise);}}
return deferred;};Promise.isPromise=function Promise_isPromise(value){return value&&typeof value.then==='function';};Promise.resolve=function Promise_resolve(value){return new Promise(function(resolve){resolve(value);});};Promise.reject=function Promise_reject(reason){return new Promise(function(resolve,reject){reject(reason);});};Promise.prototype={_status:null,_value:null,_handlers:null,_unhandledRejection:null,_updateStatus:function Promise__updateStatus(status,value){if(this._status===STATUS_RESOLVED||this._status===STATUS_REJECTED){return;}
if(status===STATUS_RESOLVED&&Promise.isPromise(value)){value.then(this._updateStatus.bind(this,STATUS_RESOLVED),this._updateStatus.bind(this,STATUS_REJECTED));return;}
this._status=status;this._value=value;if(status===STATUS_REJECTED&&this._handlers.length===0){this._unhandledRejection=true;HandlerManager.addUnhandledRejection(this);}
HandlerManager.scheduleHandlers(this);},_resolve:function Promise_resolve(value){this._updateStatus(STATUS_RESOLVED,value);},_reject:function Promise_reject(reason){this._updateStatus(STATUS_REJECTED,reason);},then:function Promise_then(onResolve,onReject){var nextPromise=new Promise(function(resolve,reject){this.resolve=resolve;this.reject=reject;});this._handlers.push({thisPromise:this,onResolve:onResolve,onReject:onReject,nextPromise:nextPromise});HandlerManager.scheduleHandlers(this);return nextPromise;},catch:function Promise_catch(onReject){return this.then(undefined,onReject);}};globalScope.Promise=Promise;}());(function WeakMapClosure(){if(globalScope.WeakMap){return;}
var id=0;function WeakMap(){this.id='$weakmap'+id++;}
WeakMap.prototype={has:function(obj){return!!Object.getOwnPropertyDescriptor(obj,this.id);},get:function(obj,defaultValue){return this.has(obj)?obj[this.id]:defaultValue;},set:function(obj,value){Object.defineProperty(obj,this.id,{value:value,enumerable:false,configurable:true});},delete:function(obj){delete obj[this.id];}};globalScope.WeakMap=WeakMap;}());var StatTimer=function StatTimerClosure(){function rpad(str,pad,length){while(str.length<length){str+=pad;}
return str;}
function StatTimer(){this.started=Object.create(null);this.times=[];this.enabled=true;}
StatTimer.prototype={time:function StatTimer_time(name){if(!this.enabled){return;}
if(name in this.started){warn('Timer is already running for '+name);}
this.started[name]=Date.now();},timeEnd:function StatTimer_timeEnd(name){if(!this.enabled){return;}
if(!(name in this.started)){warn('Timer has not been started for '+name);}
this.times.push({'name':name,'start':this.started[name],'end':Date.now()});delete this.started[name];},toString:function StatTimer_toString(){var i,ii;var times=this.times;var out='';var longest=0;for(i=0,ii=times.length;i<ii;++i){var name=times[i]['name'];if(name.length>longest){longest=name.length;}}
for(i=0,ii=times.length;i<ii;++i){var span=times[i];var duration=span.end-span.start;out+=rpad(span['name'],' ',longest)+' '+duration+'ms\n';}
return out;}};return StatTimer;}();var createBlob=function createBlob(data,contentType){if(typeof Blob!=='undefined'){return new Blob([data],{type:contentType});}
warn('The "Blob" constructor is not supported.');};var createObjectURL=function createObjectURLClosure(){var digits='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';return function createObjectURL(data,contentType,forceDataSchema){if(!forceDataSchema&&typeof URL!=='undefined'&&URL.createObjectURL){var blob=createBlob(data,contentType);return URL.createObjectURL(blob);}
var buffer='data:'+contentType+';base64,';for(var i=0,ii=data.length;i<ii;i+=3){var b1=data[i]&0xFF;var b2=data[i+1]&0xFF;var b3=data[i+2]&0xFF;var d1=b1>>2,d2=(b1&3)<<4|b2>>4;var d3=i+1<ii?(b2&0xF)<<2|b3>>6:64;var d4=i+2<ii?b3&0x3F:64;buffer+=digits[d1]+digits[d2]+digits[d3]+digits[d4];}
return buffer;};}();function MessageHandler(sourceName,targetName,comObj){this.sourceName=sourceName;this.targetName=targetName;this.comObj=comObj;this.callbackIndex=1;this.postMessageTransfers=true;var callbacksCapabilities=this.callbacksCapabilities=Object.create(null);var ah=this.actionHandler=Object.create(null);this._onComObjOnMessage=function messageHandlerComObjOnMessage(event){var data=event.data;if(data.targetName!==this.sourceName){return;}
if(data.isReply){var callbackId=data.callbackId;if(data.callbackId in callbacksCapabilities){var callback=callbacksCapabilities[callbackId];delete callbacksCapabilities[callbackId];if('error'in data){callback.reject(data.error);}else{callback.resolve(data.data);}}else{error('Cannot resolve callback '+callbackId);}}else if(data.action in ah){var action=ah[data.action];if(data.callbackId){var sourceName=this.sourceName;var targetName=data.sourceName;Promise.resolve().then(function(){return action[0].call(action[1],data.data);}).then(function(result){comObj.postMessage({sourceName:sourceName,targetName:targetName,isReply:true,callbackId:data.callbackId,data:result});},function(reason){if(reason instanceof Error){reason=reason+'';}
comObj.postMessage({sourceName:sourceName,targetName:targetName,isReply:true,callbackId:data.callbackId,error:reason});});}else{action[0].call(action[1],data.data);}}else{error('Unknown action from worker: '+data.action);}}.bind(this);comObj.addEventListener('message',this._onComObjOnMessage);}
MessageHandler.prototype={on:function messageHandlerOn(actionName,handler,scope){var ah=this.actionHandler;if(ah[actionName]){error('There is already an actionName called "'+actionName+'"');}
ah[actionName]=[handler,scope];},send:function messageHandlerSend(actionName,data,transfers){var message={sourceName:this.sourceName,targetName:this.targetName,action:actionName,data:data};this.postMessage(message,transfers);},sendWithPromise:function messageHandlerSendWithPromise(actionName,data,transfers){var callbackId=this.callbackIndex++;var message={sourceName:this.sourceName,targetName:this.targetName,action:actionName,data:data,callbackId:callbackId};var capability=createPromiseCapability();this.callbacksCapabilities[callbackId]=capability;try{this.postMessage(message,transfers);}catch(e){capability.reject(e);}
return capability.promise;},postMessage:function(message,transfers){if(transfers&&this.postMessageTransfers){this.comObj.postMessage(message,transfers);}else{this.comObj.postMessage(message);}},destroy:function(){this.comObj.removeEventListener('message',this._onComObjOnMessage);}};function loadJpegStream(id,imageUrl,objs){var img=new Image();img.onload=function loadJpegStream_onloadClosure(){objs.resolve(id,img);};img.onerror=function loadJpegStream_onerrorClosure(){objs.resolve(id,null);warn('Error during JPEG image loading');};img.src=imageUrl;}
(function checkURLConstructor(scope){var hasWorkingUrl=false;try{if(typeof URL==='function'&&typeof URL.prototype==='object'&&'origin'in URL.prototype){var u=new URL('b','http://a');u.pathname='c%20d';hasWorkingUrl=u.href==='http://a/c%20d';}}catch(e){}
if(hasWorkingUrl){return;}
var relative=Object.create(null);relative['ftp']=21;relative['file']=0;relative['gopher']=70;relative['http']=80;relative['https']=443;relative['ws']=80;relative['wss']=443;var relativePathDotMapping=Object.create(null);relativePathDotMapping['%2e']='.';relativePathDotMapping['.%2e']='..';relativePathDotMapping['%2e.']='..';relativePathDotMapping['%2e%2e']='..';function isRelativeScheme(scheme){return relative[scheme]!==undefined;}
function invalid(){clear.call(this);this._isInvalid=true;}
function IDNAToASCII(h){if(''===h){invalid.call(this);}
return h.toLowerCase();}
function percentEscape(c){var unicode=c.charCodeAt(0);if(unicode>0x20&&unicode<0x7F&&[0x22,0x23,0x3C,0x3E,0x3F,0x60].indexOf(unicode)===-1){return c;}
return encodeURIComponent(c);}
function percentEscapeQuery(c){var unicode=c.charCodeAt(0);if(unicode>0x20&&unicode<0x7F&&[0x22,0x23,0x3C,0x3E,0x60].indexOf(unicode)===-1){return c;}
return encodeURIComponent(c);}
var EOF,ALPHA=/[a-zA-Z]/,ALPHANUMERIC=/[a-zA-Z0-9\+\-\.]/;function parse(input,stateOverride,base){function err(message){errors.push(message);}
var state=stateOverride||'scheme start',cursor=0,buffer='',seenAt=false,seenBracket=false,errors=[];loop:while((input[cursor-1]!==EOF||cursor===0)&&!this._isInvalid){var c=input[cursor];switch(state){case'scheme start':if(c&&ALPHA.test(c)){buffer+=c.toLowerCase();state='scheme';}else if(!stateOverride){buffer='';state='no scheme';continue;}else{err('Invalid scheme.');break loop;}
break;case'scheme':if(c&&ALPHANUMERIC.test(c)){buffer+=c.toLowerCase();}else if(':'===c){this._scheme=buffer;buffer='';if(stateOverride){break loop;}
if(isRelativeScheme(this._scheme)){this._isRelative=true;}
if('file'===this._scheme){state='relative';}else if(this._isRelative&&base&&base._scheme===this._scheme){state='relative or authority';}else if(this._isRelative){state='authority first slash';}else{state='scheme data';}}else if(!stateOverride){buffer='';cursor=0;state='no scheme';continue;}else if(EOF===c){break loop;}else{err('Code point not allowed in scheme: '+c);break loop;}
break;case'scheme data':if('?'===c){this._query='?';state='query';}else if('#'===c){this._fragment='#';state='fragment';}else{if(EOF!==c&&'\t'!==c&&'\n'!==c&&'\r'!==c){this._schemeData+=percentEscape(c);}}
break;case'no scheme':if(!base||!isRelativeScheme(base._scheme)){err('Missing scheme.');invalid.call(this);}else{state='relative';continue;}
break;case'relative or authority':if('/'===c&&'/'===input[cursor+1]){state='authority ignore slashes';}else{err('Expected /, got: '+c);state='relative';continue;}
break;case'relative':this._isRelative=true;if('file'!==this._scheme){this._scheme=base._scheme;}
if(EOF===c){this._host=base._host;this._port=base._port;this._path=base._path.slice();this._query=base._query;this._username=base._username;this._password=base._password;break loop;}else if('/'===c||'\\'===c){if('\\'===c){err('\\ is an invalid code point.');}
state='relative slash';}else if('?'===c){this._host=base._host;this._port=base._port;this._path=base._path.slice();this._query='?';this._username=base._username;this._password=base._password;state='query';}else if('#'===c){this._host=base._host;this._port=base._port;this._path=base._path.slice();this._query=base._query;this._fragment='#';this._username=base._username;this._password=base._password;state='fragment';}else{var nextC=input[cursor+1];var nextNextC=input[cursor+2];if('file'!==this._scheme||!ALPHA.test(c)||nextC!==':'&&nextC!=='|'||EOF!==nextNextC&&'/'!==nextNextC&&'\\'!==nextNextC&&'?'!==nextNextC&&'#'!==nextNextC){this._host=base._host;this._port=base._port;this._username=base._username;this._password=base._password;this._path=base._path.slice();this._path.pop();}
state='relative path';continue;}
break;case'relative slash':if('/'===c||'\\'===c){if('\\'===c){err('\\ is an invalid code point.');}
if('file'===this._scheme){state='file host';}else{state='authority ignore slashes';}}else{if('file'!==this._scheme){this._host=base._host;this._port=base._port;this._username=base._username;this._password=base._password;}
state='relative path';continue;}
break;case'authority first slash':if('/'===c){state='authority second slash';}else{err('Expected \'/\', got: '+c);state='authority ignore slashes';continue;}
break;case'authority second slash':state='authority ignore slashes';if('/'!==c){err('Expected \'/\', got: '+c);continue;}
break;case'authority ignore slashes':if('/'!==c&&'\\'!==c){state='authority';continue;}else{err('Expected authority, got: '+c);}
break;case'authority':if('@'===c){if(seenAt){err('@ already seen.');buffer+='%40';}
seenAt=true;for(var i=0;i<buffer.length;i++){var cp=buffer[i];if('\t'===cp||'\n'===cp||'\r'===cp){err('Invalid whitespace in authority.');continue;}
if(':'===cp&&null===this._password){this._password='';continue;}
var tempC=percentEscape(cp);if(null!==this._password){this._password+=tempC;}else{this._username+=tempC;}}
buffer='';}else if(EOF===c||'/'===c||'\\'===c||'?'===c||'#'===c){cursor-=buffer.length;buffer='';state='host';continue;}else{buffer+=c;}
break;case'file host':if(EOF===c||'/'===c||'\\'===c||'?'===c||'#'===c){if(buffer.length===2&&ALPHA.test(buffer[0])&&(buffer[1]===':'||buffer[1]==='|')){state='relative path';}else if(buffer.length===0){state='relative path start';}else{this._host=IDNAToASCII.call(this,buffer);buffer='';state='relative path start';}
continue;}else if('\t'===c||'\n'===c||'\r'===c){err('Invalid whitespace in file host.');}else{buffer+=c;}
break;case'host':case'hostname':if(':'===c&&!seenBracket){this._host=IDNAToASCII.call(this,buffer);buffer='';state='port';if('hostname'===stateOverride){break loop;}}else if(EOF===c||'/'===c||'\\'===c||'?'===c||'#'===c){this._host=IDNAToASCII.call(this,buffer);buffer='';state='relative path start';if(stateOverride){break loop;}
continue;}else if('\t'!==c&&'\n'!==c&&'\r'!==c){if('['===c){seenBracket=true;}else if(']'===c){seenBracket=false;}
buffer+=c;}else{err('Invalid code point in host/hostname: '+c);}
break;case'port':if(/[0-9]/.test(c)){buffer+=c;}else if(EOF===c||'/'===c||'\\'===c||'?'===c||'#'===c||stateOverride){if(''!==buffer){var temp=parseInt(buffer,10);if(temp!==relative[this._scheme]){this._port=temp+'';}
buffer='';}
if(stateOverride){break loop;}
state='relative path start';continue;}else if('\t'===c||'\n'===c||'\r'===c){err('Invalid code point in port: '+c);}else{invalid.call(this);}
break;case'relative path start':if('\\'===c){err('\'\\\' not allowed in path.');}
state='relative path';if('/'!==c&&'\\'!==c){continue;}
break;case'relative path':if(EOF===c||'/'===c||'\\'===c||!stateOverride&&('?'===c||'#'===c)){if('\\'===c){err('\\ not allowed in relative path.');}
var tmp;if(tmp=relativePathDotMapping[buffer.toLowerCase()]){buffer=tmp;}
if('..'===buffer){this._path.pop();if('/'!==c&&'\\'!==c){this._path.push('');}}else if('.'===buffer&&'/'!==c&&'\\'!==c){this._path.push('');}else if('.'!==buffer){if('file'===this._scheme&&this._path.length===0&&buffer.length===2&&ALPHA.test(buffer[0])&&buffer[1]==='|'){buffer=buffer[0]+':';}
this._path.push(buffer);}
buffer='';if('?'===c){this._query='?';state='query';}else if('#'===c){this._fragment='#';state='fragment';}}else if('\t'!==c&&'\n'!==c&&'\r'!==c){buffer+=percentEscape(c);}
break;case'query':if(!stateOverride&&'#'===c){this._fragment='#';state='fragment';}else if(EOF!==c&&'\t'!==c&&'\n'!==c&&'\r'!==c){this._query+=percentEscapeQuery(c);}
break;case'fragment':if(EOF!==c&&'\t'!==c&&'\n'!==c&&'\r'!==c){this._fragment+=c;}
break;}
cursor++;}}
function clear(){this._scheme='';this._schemeData='';this._username='';this._password=null;this._host='';this._port='';this._path=[];this._query='';this._fragment='';this._isInvalid=false;this._isRelative=false;}
function JURL(url,base)
{if(base!==undefined&&!(base instanceof JURL)){base=new JURL(String(base));}
this._url=url;clear.call(this);var input=url.replace(/^[ \t\r\n\f]+|[ \t\r\n\f]+$/g,'');parse.call(this,input,null,base);}
JURL.prototype={toString:function(){return this.href;},get href(){if(this._isInvalid){return this._url;}
var authority='';if(''!==this._username||null!==this._password){authority=this._username+(null!==this._password?':'+this._password:'')+'@';}
return this.protocol+(this._isRelative?'//'+authority+this.host:'')+this.pathname+this._query+this._fragment;},set href(href){clear.call(this);parse.call(this,href);},get protocol(){return this._scheme+':';},set protocol(protocol){if(this._isInvalid){return;}
parse.call(this,protocol+':','scheme start');},get host(){return this._isInvalid?'':this._port?this._host+':'+this._port:this._host;},set host(host){if(this._isInvalid||!this._isRelative){return;}
parse.call(this,host,'host');},get hostname(){return this._host;},set hostname(hostname){if(this._isInvalid||!this._isRelative){return;}
parse.call(this,hostname,'hostname');},get port(){return this._port;},set port(port){if(this._isInvalid||!this._isRelative){return;}
parse.call(this,port,'port');},get pathname(){return this._isInvalid?'':this._isRelative?'/'+this._path.join('/'):this._schemeData;},set pathname(pathname){if(this._isInvalid||!this._isRelative){return;}
this._path=[];parse.call(this,pathname,'relative path start');},get search(){return this._isInvalid||!this._query||'?'===this._query?'':this._query;},set search(search){if(this._isInvalid||!this._isRelative){return;}
this._query='?';if('?'===search[0]){search=search.slice(1);}
parse.call(this,search,'query');},get hash(){return this._isInvalid||!this._fragment||'#'===this._fragment?'':this._fragment;},set hash(hash){if(this._isInvalid){return;}
this._fragment='#';if('#'===hash[0]){hash=hash.slice(1);}
parse.call(this,hash,'fragment');},get origin(){var host;if(this._isInvalid||!this._scheme){return'';}
switch(this._scheme){case'data':case'file':case'javascript':case'mailto':return'null';}
host=this.host;if(!host){return'';}
return this._scheme+'://'+host;}};var OriginalURL=scope.URL;if(OriginalURL){JURL.createObjectURL=function(blob){return OriginalURL.createObjectURL.apply(OriginalURL,arguments);};JURL.revokeObjectURL=function(url){OriginalURL.revokeObjectURL(url);};}
scope.URL=JURL;}(globalScope));exports.FONT_IDENTITY_MATRIX=FONT_IDENTITY_MATRIX;exports.IDENTITY_MATRIX=IDENTITY_MATRIX;exports.OPS=OPS;exports.VERBOSITY_LEVELS=VERBOSITY_LEVELS;exports.UNSUPPORTED_FEATURES=UNSUPPORTED_FEATURES;exports.AnnotationBorderStyleType=AnnotationBorderStyleType;exports.AnnotationFieldFlag=AnnotationFieldFlag;exports.AnnotationFlag=AnnotationFlag;exports.AnnotationType=AnnotationType;exports.FontType=FontType;exports.ImageKind=ImageKind;exports.InvalidPDFException=InvalidPDFException;exports.MessageHandler=MessageHandler;exports.MissingDataException=MissingDataException;exports.MissingPDFException=MissingPDFException;exports.NotImplementedException=NotImplementedException;exports.PageViewport=PageViewport;exports.PasswordException=PasswordException;exports.PasswordResponses=PasswordResponses;exports.StatTimer=StatTimer;exports.StreamType=StreamType;exports.TextRenderingMode=TextRenderingMode;exports.UnexpectedResponseException=UnexpectedResponseException;exports.UnknownErrorException=UnknownErrorException;exports.Util=Util;exports.XRefParseException=XRefParseException;exports.arrayByteLength=arrayByteLength;exports.arraysToBytes=arraysToBytes;exports.assert=assert;exports.bytesToString=bytesToString;exports.createBlob=createBlob;exports.createPromiseCapability=createPromiseCapability;exports.createObjectURL=createObjectURL;exports.deprecated=deprecated;exports.error=error;exports.getLookupTableFactory=getLookupTableFactory;exports.getVerbosityLevel=getVerbosityLevel;exports.globalScope=globalScope;exports.info=info;exports.isArray=isArray;exports.isArrayBuffer=isArrayBuffer;exports.isBool=isBool;exports.isEmptyObj=isEmptyObj;exports.isInt=isInt;exports.isNum=isNum;exports.isString=isString;exports.isSpace=isSpace;exports.isSameOrigin=isSameOrigin;exports.createValidAbsoluteUrl=createValidAbsoluteUrl;exports.isLittleEndian=isLittleEndian;exports.isEvalSupported=isEvalSupported;exports.loadJpegStream=loadJpegStream;exports.log2=log2;exports.readInt8=readInt8;exports.readUint16=readUint16;exports.readUint32=readUint32;exports.removeNullCharacters=removeNullCharacters;exports.setVerbosityLevel=setVerbosityLevel;exports.shadow=shadow;exports.string32=string32;exports.stringToBytes=stringToBytes;exports.stringToPDFString=stringToPDFString;exports.stringToUTF8String=stringToUTF8String;exports.utf8StringToString=utf8StringToString;exports.warn=warn;}));(function(root,factory){factory(root.pdfjsDisplayDOMUtils={},root.pdfjsSharedUtil);}(this,function(exports,sharedUtil){var removeNullCharacters=sharedUtil.removeNullCharacters;var warn=sharedUtil.warn;var deprecated=sharedUtil.deprecated;var createValidAbsoluteUrl=sharedUtil.createValidAbsoluteUrl;var CustomStyle=function CustomStyleClosure(){var prefixes=['ms','Moz','Webkit','O'];var _cache=Object.create(null);function CustomStyle(){}
CustomStyle.getProp=function get(propName,element){if(arguments.length===1&&typeof _cache[propName]==='string'){return _cache[propName];}
element=element||document.documentElement;var style=element.style,prefixed,uPropName;if(typeof style[propName]==='string'){return _cache[propName]=propName;}
uPropName=propName.charAt(0).toUpperCase()+propName.slice(1);for(var i=0,l=prefixes.length;i<l;i++){prefixed=prefixes[i]+uPropName;if(typeof style[prefixed]==='string'){return _cache[propName]=prefixed;}}
return _cache[propName]='undefined';};CustomStyle.setProp=function set(propName,element,str){var prop=this.getProp(propName);if(prop!=='undefined'){element.style[prop]=str;}};return CustomStyle;}();var hasCanvasTypedArrays;hasCanvasTypedArrays=function hasCanvasTypedArrays(){var canvas=document.createElement('canvas');canvas.width=canvas.height=1;var ctx=canvas.getContext('2d');var imageData=ctx.createImageData(1,1);return typeof imageData.data.buffer!=='undefined';};var LinkTarget={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};var LinkTargetStringMap=['','_self','_blank','_parent','_top'];function addLinkAttributes(link,params){var url=params&&params.url;link.href=link.title=url?removeNullCharacters(url):'';if(url){var target=params.target;if(typeof target==='undefined'){target=getDefaultSetting('externalLinkTarget');}
link.target=LinkTargetStringMap[target];var rel=params.rel;if(typeof rel==='undefined'){rel=getDefaultSetting('externalLinkRel');}
link.rel=rel;}}
function getFilenameFromUrl(url){var anchor=url.indexOf('#');var query=url.indexOf('?');var end=Math.min(anchor>0?anchor:url.length,query>0?query:url.length);return url.substring(url.lastIndexOf('/',end)+1,end);}
function getDefaultSetting(id){var globalSettings=sharedUtil.globalScope.PDFJS;switch(id){case'pdfBug':return globalSettings?globalSettings.pdfBug:false;case'disableAutoFetch':return globalSettings?globalSettings.disableAutoFetch:false;case'disableStream':return globalSettings?globalSettings.disableStream:false;case'disableRange':return globalSettings?globalSettings.disableRange:false;case'disableFontFace':return globalSettings?globalSettings.disableFontFace:false;case'disableCreateObjectURL':return globalSettings?globalSettings.disableCreateObjectURL:false;case'disableWebGL':return globalSettings?globalSettings.disableWebGL:true;case'cMapUrl':return globalSettings?globalSettings.cMapUrl:null;case'cMapPacked':return globalSettings?globalSettings.cMapPacked:false;case'postMessageTransfers':return globalSettings?globalSettings.postMessageTransfers:true;case'workerSrc':return globalSettings?globalSettings.workerSrc:null;case'disableWorker':return globalSettings?globalSettings.disableWorker:false;case'maxImageSize':return globalSettings?globalSettings.maxImageSize:-1;case'imageResourcesPath':return globalSettings?globalSettings.imageResourcesPath:'';case'isEvalSupported':return globalSettings?globalSettings.isEvalSupported:true;case'externalLinkTarget':if(!globalSettings){return LinkTarget.NONE;}
switch(globalSettings.externalLinkTarget){case LinkTarget.NONE:case LinkTarget.SELF:case LinkTarget.BLANK:case LinkTarget.PARENT:case LinkTarget.TOP:return globalSettings.externalLinkTarget;}
warn('PDFJS.externalLinkTarget is invalid: '+globalSettings.externalLinkTarget);globalSettings.externalLinkTarget=LinkTarget.NONE;return LinkTarget.NONE;case'externalLinkRel':return globalSettings?globalSettings.externalLinkRel:'noreferrer';case'enableStats':return!!(globalSettings&&globalSettings.enableStats);default:throw new Error('Unknown default setting: '+id);}}
function isExternalLinkTargetSet(){var externalLinkTarget=getDefaultSetting('externalLinkTarget');switch(externalLinkTarget){case LinkTarget.NONE:return false;case LinkTarget.SELF:case LinkTarget.BLANK:case LinkTarget.PARENT:case LinkTarget.TOP:return true;}}
function isValidUrl(url,allowRelative){deprecated('isValidUrl(), please use createValidAbsoluteUrl() instead.');var baseUrl=allowRelative?'http://example.com':null;return createValidAbsoluteUrl(url,baseUrl)!==null;}
exports.CustomStyle=CustomStyle;exports.addLinkAttributes=addLinkAttributes;exports.isExternalLinkTargetSet=isExternalLinkTargetSet;exports.isValidUrl=isValidUrl;exports.getFilenameFromUrl=getFilenameFromUrl;exports.LinkTarget=LinkTarget;exports.hasCanvasTypedArrays=hasCanvasTypedArrays;exports.getDefaultSetting=getDefaultSetting;}));(function(root,factory){factory(root.pdfjsDisplayFontLoader={},root.pdfjsSharedUtil);}(this,function(exports,sharedUtil){var assert=sharedUtil.assert;var bytesToString=sharedUtil.bytesToString;var string32=sharedUtil.string32;var shadow=sharedUtil.shadow;var warn=sharedUtil.warn;function FontLoader(docId){this.docId=docId;this.styleElement=null;this.nativeFontFaces=[];this.loadTestFontId=0;this.loadingContext={requests:[],nextRequestId:0};}
FontLoader.prototype={insertRule:function fontLoaderInsertRule(rule){var styleElement=this.styleElement;if(!styleElement){styleElement=this.styleElement=document.createElement('style');styleElement.id='PDFJS_FONT_STYLE_TAG_'+this.docId;document.documentElement.getElementsByTagName('head')[0].appendChild(styleElement);}
var styleSheet=styleElement.sheet;styleSheet.insertRule(rule,styleSheet.cssRules.length);},clear:function fontLoaderClear(){var styleElement=this.styleElement;if(styleElement){styleElement.parentNode.removeChild(styleElement);styleElement=this.styleElement=null;}
this.nativeFontFaces.forEach(function(nativeFontFace){document.fonts.delete(nativeFontFace);});this.nativeFontFaces.length=0;}};var getLoadTestFont=function(){return atob('T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQ'+'AABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwA'+'AAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbm'+'FtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAA'+'AADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6A'+'ABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAA'+'MQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAA'+'AAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAA'+'AAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQ'+'AAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMA'+'AQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAA'+'EAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAA'+'AQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAA'+'AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'+'AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'+'AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA'+'AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAA'+'AAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgc'+'A/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWF'+'hYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQA'+'AAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAg'+'ABAAAAAAAAAAAD6AAAAAAAAA==');};Object.defineProperty(FontLoader.prototype,'loadTestFont',{get:function(){return shadow(this,'loadTestFont',getLoadTestFont());},configurable:true});FontLoader.prototype.addNativeFontFace=function fontLoader_addNativeFontFace(nativeFontFace){this.nativeFontFaces.push(nativeFontFace);document.fonts.add(nativeFontFace);};FontLoader.prototype.bind=function fontLoaderBind(fonts,callback){var rules=[];var fontsToLoad=[];var fontLoadPromises=[];var getNativeFontPromise=function(nativeFontFace){return nativeFontFace.loaded.catch(function(e){warn('Failed to load font "'+nativeFontFace.family+'": '+e);});};var isFontLoadingAPISupported=FontLoader.isFontLoadingAPISupported&&!FontLoader.isSyncFontLoadingSupported;for(var i=0,ii=fonts.length;i<ii;i++){var font=fonts[i];if(font.attached||font.loading===false){continue;}
font.attached=true;if(isFontLoadingAPISupported){var nativeFontFace=font.createNativeFontFace();if(nativeFontFace){this.addNativeFontFace(nativeFontFace);fontLoadPromises.push(getNativeFontPromise(nativeFontFace));}}else{var rule=font.createFontFaceRule();if(rule){this.insertRule(rule);rules.push(rule);fontsToLoad.push(font);}}}
var request=this.queueLoadingCallback(callback);if(isFontLoadingAPISupported){Promise.all(fontLoadPromises).then(function(){request.complete();});}else if(rules.length>0&&!FontLoader.isSyncFontLoadingSupported){this.prepareFontLoadEvent(rules,fontsToLoad,request);}else{request.complete();}};FontLoader.prototype.queueLoadingCallback=function FontLoader_queueLoadingCallback(callback){function LoadLoader_completeRequest(){assert(!request.end,'completeRequest() cannot be called twice');request.end=Date.now();while(context.requests.length>0&&context.requests[0].end){var otherRequest=context.requests.shift();setTimeout(otherRequest.callback,0);}}
var context=this.loadingContext;var requestId='pdfjs-font-loading-'+context.nextRequestId++;var request={id:requestId,complete:LoadLoader_completeRequest,callback:callback,started:Date.now()};context.requests.push(request);return request;};FontLoader.prototype.prepareFontLoadEvent=function fontLoaderPrepareFontLoadEvent(rules,fonts,request){function int32(data,offset){return data.charCodeAt(offset)<<24|data.charCodeAt(offset+1)<<16|data.charCodeAt(offset+2)<<8|data.charCodeAt(offset+3)&0xff;}
function spliceString(s,offset,remove,insert){var chunk1=s.substr(0,offset);var chunk2=s.substr(offset+remove);return chunk1+insert+chunk2;}
var i,ii;var canvas=document.createElement('canvas');canvas.width=1;canvas.height=1;var ctx=canvas.getContext('2d');var called=0;function isFontReady(name,callback){called++;if(called>30){warn('Load test font never loaded.');callback();return;}
ctx.font='30px '+name;ctx.fillText('.',0,20);var imageData=ctx.getImageData(0,0,1,1);if(imageData.data[3]>0){callback();return;}
setTimeout(isFontReady.bind(null,name,callback));}
var loadTestFontId='lt'+Date.now()+this.loadTestFontId++;var data=this.loadTestFont;var COMMENT_OFFSET=976;data=spliceString(data,COMMENT_OFFSET,loadTestFontId.length,loadTestFontId);var CFF_CHECKSUM_OFFSET=16;var XXXX_VALUE=0x58585858;var checksum=int32(data,CFF_CHECKSUM_OFFSET);for(i=0,ii=loadTestFontId.length-3;i<ii;i+=4){checksum=checksum-XXXX_VALUE+int32(loadTestFontId,i)|0;}
if(i<loadTestFontId.length){checksum=checksum-XXXX_VALUE+int32(loadTestFontId+'XXX',i)|0;}
data=spliceString(data,CFF_CHECKSUM_OFFSET,4,string32(checksum));var url='url(data:font/opentype;base64,'+btoa(data)+');';var rule='@font-face { font-family:"'+loadTestFontId+'";src:'+url+'}';this.insertRule(rule);var names=[];for(i=0,ii=fonts.length;i<ii;i++){names.push(fonts[i].loadedName);}
names.push(loadTestFontId);var div=document.createElement('div');div.setAttribute('style','visibility: hidden;'+'width: 10px; height: 10px;'+'position: absolute; top: 0px; left: 0px;');for(i=0,ii=names.length;i<ii;++i){var span=document.createElement('span');span.textContent='Hi';span.style.fontFamily=names[i];div.appendChild(span);}
document.body.appendChild(div);isFontReady(loadTestFontId,function(){document.body.removeChild(div);request.complete();});};FontLoader.isFontLoadingAPISupported=typeof document!=='undefined'&&!!document.fonts;var isSyncFontLoadingSupported=function isSyncFontLoadingSupported(){if(typeof navigator==='undefined'){return true;}
var supported=false;var m=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);if(m&&m[1]>=14){supported=true;}
return supported;};Object.defineProperty(FontLoader,'isSyncFontLoadingSupported',{get:function(){return shadow(FontLoader,'isSyncFontLoadingSupported',isSyncFontLoadingSupported());},enumerable:true,configurable:true});var IsEvalSupportedCached={get value(){return shadow(this,'value',sharedUtil.isEvalSupported());}};var FontFaceObject=function FontFaceObjectClosure(){function FontFaceObject(translatedData,options){this.compiledGlyphs=Object.create(null);for(var i in translatedData){this[i]=translatedData[i];}
this.options=options;}
FontFaceObject.prototype={createNativeFontFace:function FontFaceObject_createNativeFontFace(){if(!this.data){return null;}
if(this.options.disableFontFace){this.disableFontFace=true;return null;}
var nativeFontFace=new FontFace(this.loadedName,this.data,{});if(this.options.fontRegistry){this.options.fontRegistry.registerFont(this);}
return nativeFontFace;},createFontFaceRule:function FontFaceObject_createFontFaceRule(){if(!this.data){return null;}
if(this.options.disableFontFace){this.disableFontFace=true;return null;}
var data=bytesToString(new Uint8Array(this.data));var fontName=this.loadedName;var url='url(data:'+this.mimetype+';base64,'+btoa(data)+');';var rule='@font-face { font-family:"'+fontName+'";src:'+url+'}';if(this.options.fontRegistry){this.options.fontRegistry.registerFont(this,url);}
return rule;},getPathGenerator:function FontFaceObject_getPathGenerator(objs,character){if(!(character in this.compiledGlyphs)){var cmds=objs.get(this.loadedName+'_path_'+character);var current,i,len;if(this.options.isEvalSupported&&IsEvalSupportedCached.value){var args,js='';for(i=0,len=cmds.length;i<len;i++){current=cmds[i];if(current.args!==undefined){args=current.args.join(',');}else{args='';}
js+='c.'+current.cmd+'('+args+');\n';}
this.compiledGlyphs[character]=new Function('c','size',js);}else{this.compiledGlyphs[character]=function(c,size){for(i=0,len=cmds.length;i<len;i++){current=cmds[i];if(current.cmd==='scale'){current.args=[size,-size];}
c[current.cmd].apply(c,current.args);}};}}
return this.compiledGlyphs[character];}};return FontFaceObject;}();exports.FontFaceObject=FontFaceObject;exports.FontLoader=FontLoader;}));(function(root,factory){factory(root.pdfjsDisplayMetadata={},root.pdfjsSharedUtil);}(this,function(exports,sharedUtil){var error=sharedUtil.error;function fixMetadata(meta){return meta.replace(/>\\376\\377([^<]+)/g,function(all,codes){var bytes=codes.replace(/\\([0-3])([0-7])([0-7])/g,function(code,d1,d2,d3){return String.fromCharCode(d1*64+d2*8+d3*1);});var chars='';for(var i=0;i<bytes.length;i+=2){var code=bytes.charCodeAt(i)*256+bytes.charCodeAt(i+1);chars+=code>=32&&code<127&&code!==60&&code!==62&&code!==38?String.fromCharCode(code):'&#x'+(0x10000+code).toString(16).substring(1)+';';}
return'>'+chars;});}
function Metadata(meta){if(typeof meta==='string'){meta=fixMetadata(meta);var parser=new DOMParser();meta=parser.parseFromString(meta,'application/xml');}else if(!(meta instanceof Document)){error('Metadata: Invalid metadata object');}
this.metaDocument=meta;this.metadata=Object.create(null);this.parse();}
Metadata.prototype={parse:function Metadata_parse(){var doc=this.metaDocument;var rdf=doc.documentElement;if(rdf.nodeName.toLowerCase()!=='rdf:rdf'){rdf=rdf.firstChild;while(rdf&&rdf.nodeName.toLowerCase()!=='rdf:rdf'){rdf=rdf.nextSibling;}}
var nodeName=rdf?rdf.nodeName.toLowerCase():null;if(!rdf||nodeName!=='rdf:rdf'||!rdf.hasChildNodes()){return;}
var children=rdf.childNodes,desc,entry,name,i,ii,length,iLength;for(i=0,length=children.length;i<length;i++){desc=children[i];if(desc.nodeName.toLowerCase()!=='rdf:description'){continue;}
for(ii=0,iLength=desc.childNodes.length;ii<iLength;ii++){if(desc.childNodes[ii].nodeName.toLowerCase()!=='#text'){entry=desc.childNodes[ii];name=entry.nodeName.toLowerCase();this.metadata[name]=entry.textContent.trim();}}}},get:function Metadata_get(name){return this.metadata[name]||null;},has:function Metadata_has(name){return typeof this.metadata[name]!=='undefined';}};exports.Metadata=Metadata;}));(function(root,factory){factory(root.pdfjsDisplaySVG={},root.pdfjsSharedUtil);}(this,function(exports,sharedUtil){var FONT_IDENTITY_MATRIX=sharedUtil.FONT_IDENTITY_MATRIX;var IDENTITY_MATRIX=sharedUtil.IDENTITY_MATRIX;var ImageKind=sharedUtil.ImageKind;var OPS=sharedUtil.OPS;var Util=sharedUtil.Util;var isNum=sharedUtil.isNum;var isArray=sharedUtil.isArray;var warn=sharedUtil.warn;var createObjectURL=sharedUtil.createObjectURL;var SVG_DEFAULTS={fontStyle:'normal',fontWeight:'normal',fillColor:'#000000'};var convertImgDataToPng=function convertImgDataToPngClosure(){var PNG_HEADER=new Uint8Array([0x89,0x50,0x4e,0x47,0x0d,0x0a,0x1a,0x0a]);var CHUNK_WRAPPER_SIZE=12;var crcTable=new Int32Array(256);for(var i=0;i<256;i++){var c=i;for(var h=0;h<8;h++){if(c&1){c=0xedB88320^c>>1&0x7fffffff;}else{c=c>>1&0x7fffffff;}}
crcTable[i]=c;}
function crc32(data,start,end){var crc=-1;for(var i=start;i<end;i++){var a=(crc^data[i])&0xff;var b=crcTable[a];crc=crc>>>8^b;}
return crc^-1;}
function writePngChunk(type,body,data,offset){var p=offset;var len=body.length;data[p]=len>>24&0xff;data[p+1]=len>>16&0xff;data[p+2]=len>>8&0xff;data[p+3]=len&0xff;p+=4;data[p]=type.charCodeAt(0)&0xff;data[p+1]=type.charCodeAt(1)&0xff;data[p+2]=type.charCodeAt(2)&0xff;data[p+3]=type.charCodeAt(3)&0xff;p+=4;data.set(body,p);p+=body.length;var crc=crc32(data,offset+4,p);data[p]=crc>>24&0xff;data[p+1]=crc>>16&0xff;data[p+2]=crc>>8&0xff;data[p+3]=crc&0xff;}
function adler32(data,start,end){var a=1;var b=0;for(var i=start;i<end;++i){a=(a+(data[i]&0xff))%65521;b=(b+a)%65521;}
return b<<16|a;}
function encode(imgData,kind,forceDataSchema){var width=imgData.width;var height=imgData.height;var bitDepth,colorType,lineSize;var bytes=imgData.data;switch(kind){case ImageKind.GRAYSCALE_1BPP:colorType=0;bitDepth=1;lineSize=width+7>>3;break;case ImageKind.RGB_24BPP:colorType=2;bitDepth=8;lineSize=width*3;break;case ImageKind.RGBA_32BPP:colorType=6;bitDepth=8;lineSize=width*4;break;default:throw new Error('invalid format');}
var literals=new Uint8Array((1+lineSize)*height);var offsetLiterals=0,offsetBytes=0;var y,i;for(y=0;y<height;++y){literals[offsetLiterals++]=0;literals.set(bytes.subarray(offsetBytes,offsetBytes+lineSize),offsetLiterals);offsetBytes+=lineSize;offsetLiterals+=lineSize;}
if(kind===ImageKind.GRAYSCALE_1BPP){offsetLiterals=0;for(y=0;y<height;y++){offsetLiterals++;for(i=0;i<lineSize;i++){literals[offsetLiterals++]^=0xFF;}}}
var ihdr=new Uint8Array([width>>24&0xff,width>>16&0xff,width>>8&0xff,width&0xff,height>>24&0xff,height>>16&0xff,height>>8&0xff,height&0xff,bitDepth,colorType,0x00,0x00,0x00]);var len=literals.length;var maxBlockLength=0xFFFF;var deflateBlocks=Math.ceil(len / maxBlockLength);var idat=new Uint8Array(2+len+deflateBlocks*5+4);var pi=0;idat[pi++]=0x78;idat[pi++]=0x9c;var pos=0;while(len>maxBlockLength){idat[pi++]=0x00;idat[pi++]=0xff;idat[pi++]=0xff;idat[pi++]=0x00;idat[pi++]=0x00;idat.set(literals.subarray(pos,pos+maxBlockLength),pi);pi+=maxBlockLength;pos+=maxBlockLength;len-=maxBlockLength;}
idat[pi++]=0x01;idat[pi++]=len&0xff;idat[pi++]=len>>8&0xff;idat[pi++]=~len&0xffff&0xff;idat[pi++]=(~len&0xffff)>>8&0xff;idat.set(literals.subarray(pos),pi);pi+=literals.length-pos;var adler=adler32(literals,0,literals.length);idat[pi++]=adler>>24&0xff;idat[pi++]=adler>>16&0xff;idat[pi++]=adler>>8&0xff;idat[pi++]=adler&0xff;var pngLength=PNG_HEADER.length+CHUNK_WRAPPER_SIZE*3+ihdr.length+idat.length;var data=new Uint8Array(pngLength);var offset=0;data.set(PNG_HEADER,offset);offset+=PNG_HEADER.length;writePngChunk('IHDR',ihdr,data,offset);offset+=CHUNK_WRAPPER_SIZE+ihdr.length;writePngChunk('IDATA',idat,data,offset);offset+=CHUNK_WRAPPER_SIZE+idat.length;writePngChunk('IEND',new Uint8Array(0),data,offset);return createObjectURL(data,'image/png',forceDataSchema);}
return function convertImgDataToPng(imgData,forceDataSchema){var kind=imgData.kind===undefined?ImageKind.GRAYSCALE_1BPP:imgData.kind;return encode(imgData,kind,forceDataSchema);};}();var SVGExtraState=function SVGExtraStateClosure(){function SVGExtraState(){this.fontSizeScale=1;this.fontWeight=SVG_DEFAULTS.fontWeight;this.fontSize=0;this.textMatrix=IDENTITY_MATRIX;this.fontMatrix=FONT_IDENTITY_MATRIX;this.leading=0;this.x=0;this.y=0;this.lineX=0;this.lineY=0;this.charSpacing=0;this.wordSpacing=0;this.textHScale=1;this.textRise=0;this.fillColor=SVG_DEFAULTS.fillColor;this.strokeColor='#000000';this.fillAlpha=1;this.strokeAlpha=1;this.lineWidth=1;this.lineJoin='';this.lineCap='';this.miterLimit=0;this.dashArray=[];this.dashPhase=0;this.dependencies=[];this.activeClipUrl=null;this.clipGroup=null;this.maskId='';}
SVGExtraState.prototype={clone:function SVGExtraState_clone(){return Object.create(this);},setCurrentPoint:function SVGExtraState_setCurrentPoint(x,y){this.x=x;this.y=y;}};return SVGExtraState;}();var SVGGraphics=function SVGGraphicsClosure(){function opListToTree(opList){var opTree=[];var tmp=[];var opListLen=opList.length;for(var x=0;x<opListLen;x++){if(opList[x].fn==='save'){opTree.push({'fnId':92,'fn':'group','items':[]});tmp.push(opTree);opTree=opTree[opTree.length-1].items;continue;}
if(opList[x].fn==='restore'){opTree=tmp.pop();}else{opTree.push(opList[x]);}}
return opTree;}
function pf(value){if(value===(value|0)){return value.toString();}
var s=value.toFixed(10);var i=s.length-1;if(s[i]!=='0'){return s;}
do{i--;}while(s[i]==='0');return s.substr(0,s[i]==='.'?i:i+1);}
function pm(m){if(m[4]===0&&m[5]===0){if(m[1]===0&&m[2]===0){if(m[0]===1&&m[3]===1){return'';}
return'scale('+pf(m[0])+' '+pf(m[3])+')';}
if(m[0]===m[3]&&m[1]===-m[2]){var a=Math.acos(m[0])*180 / Math.PI;return'rotate('+pf(a)+')';}}else{if(m[0]===1&&m[1]===0&&m[2]===0&&m[3]===1){return'translate('+pf(m[4])+' '+pf(m[5])+')';}}
return'matrix('+pf(m[0])+' '+pf(m[1])+' '+pf(m[2])+' '+pf(m[3])+' '+pf(m[4])+' '+pf(m[5])+')';}
function SVGGraphics(commonObjs,objs,forceDataSchema){this.current=new SVGExtraState();this.transformMatrix=IDENTITY_MATRIX;this.transformStack=[];this.extraStack=[];this.commonObjs=commonObjs;this.objs=objs;this.pendingEOFill=false;this.embedFonts=false;this.embeddedFonts=Object.create(null);this.cssStyle=null;this.forceDataSchema=!!forceDataSchema;}
var NS='http://www.w3.org/2000/svg';var XML_NS='http://www.w3.org/XML/1998/namespace';var XLINK_NS='http://www.w3.org/1999/xlink';var LINE_CAP_STYLES=['butt','round','square'];var LINE_JOIN_STYLES=['miter','round','bevel'];var clipCount=0;var maskCount=0;SVGGraphics.prototype={save:function SVGGraphics_save(){this.transformStack.push(this.transformMatrix);var old=this.current;this.extraStack.push(old);this.current=old.clone();},restore:function SVGGraphics_restore(){this.transformMatrix=this.transformStack.pop();this.current=this.extraStack.pop();this.tgrp=null;},group:function SVGGraphics_group(items){this.save();this.executeOpTree(items);this.restore();},loadDependencies:function SVGGraphics_loadDependencies(operatorList){var fnArray=operatorList.fnArray;var fnArrayLen=fnArray.length;var argsArray=operatorList.argsArray;var self=this;for(var i=0;i<fnArrayLen;i++){if(OPS.dependency===fnArray[i]){var deps=argsArray[i];for(var n=0,nn=deps.length;n<nn;n++){var obj=deps[n];var common=obj.substring(0,2)==='g_';var promise;if(common){promise=new Promise(function(resolve){self.commonObjs.get(obj,resolve);});}else{promise=new Promise(function(resolve){self.objs.get(obj,resolve);});}
this.current.dependencies.push(promise);}}}
return Promise.all(this.current.dependencies);},transform:function SVGGraphics_transform(a,b,c,d,e,f){var transformMatrix=[a,b,c,d,e,f];this.transformMatrix=Util.transform(this.transformMatrix,transformMatrix);this.tgrp=null;},getSVG:function SVGGraphics_getSVG(operatorList,viewport){this.viewport=viewport;var svgElement=this._initialize(viewport);return this.loadDependencies(operatorList).then(function(){this.transformMatrix=IDENTITY_MATRIX;var opTree=this.convertOpList(operatorList);this.executeOpTree(opTree);return svgElement;}.bind(this));},convertOpList:function SVGGraphics_convertOpList(operatorList){var argsArray=operatorList.argsArray;var fnArray=operatorList.fnArray;var fnArrayLen=fnArray.length;var REVOPS=[];var opList=[];for(var op in OPS){REVOPS[OPS[op]]=op;}
for(var x=0;x<fnArrayLen;x++){var fnId=fnArray[x];opList.push({'fnId':fnId,'fn':REVOPS[fnId],'args':argsArray[x]});}
return opListToTree(opList);},executeOpTree:function SVGGraphics_executeOpTree(opTree){var opTreeLen=opTree.length;for(var x=0;x<opTreeLen;x++){var fn=opTree[x].fn;var fnId=opTree[x].fnId;var args=opTree[x].args;switch(fnId|0){case OPS.beginText:this.beginText();break;case OPS.setLeading:this.setLeading(args);break;case OPS.setLeadingMoveText:this.setLeadingMoveText(args[0],args[1]);break;case OPS.setFont:this.setFont(args);break;case OPS.showText:this.showText(args[0]);break;case OPS.showSpacedText:this.showText(args[0]);break;case OPS.endText:this.endText();break;case OPS.moveText:this.moveText(args[0],args[1]);break;case OPS.setCharSpacing:this.setCharSpacing(args[0]);break;case OPS.setWordSpacing:this.setWordSpacing(args[0]);break;case OPS.setHScale:this.setHScale(args[0]);break;case OPS.setTextMatrix:this.setTextMatrix(args[0],args[1],args[2],args[3],args[4],args[5]);break;case OPS.setLineWidth:this.setLineWidth(args[0]);break;case OPS.setLineJoin:this.setLineJoin(args[0]);break;case OPS.setLineCap:this.setLineCap(args[0]);break;case OPS.setMiterLimit:this.setMiterLimit(args[0]);break;case OPS.setFillRGBColor:this.setFillRGBColor(args[0],args[1],args[2]);break;case OPS.setStrokeRGBColor:this.setStrokeRGBColor(args[0],args[1],args[2]);break;case OPS.setDash:this.setDash(args[0],args[1]);break;case OPS.setGState:this.setGState(args[0]);break;case OPS.fill:this.fill();break;case OPS.eoFill:this.eoFill();break;case OPS.stroke:this.stroke();break;case OPS.fillStroke:this.fillStroke();break;case OPS.eoFillStroke:this.eoFillStroke();break;case OPS.clip:this.clip('nonzero');break;case OPS.eoClip:this.clip('evenodd');break;case OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case OPS.paintJpegXObject:this.paintJpegXObject(args[0],args[1],args[2]);break;case OPS.paintImageXObject:this.paintImageXObject(args[0]);break;case OPS.paintInlineImageXObject:this.paintInlineImageXObject(args[0]);break;case OPS.paintImageMaskXObject:this.paintImageMaskXObject(args[0]);break;case OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(args[0],args[1]);break;case OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case OPS.closePath:this.closePath();break;case OPS.closeStroke:this.closeStroke();break;case OPS.closeFillStroke:this.closeFillStroke();break;case OPS.nextLine:this.nextLine();break;case OPS.transform:this.transform(args[0],args[1],args[2],args[3],args[4],args[5]);break;case OPS.constructPath:this.constructPath(args[0],args[1]);break;case OPS.endPath:this.endPath();break;case 92:this.group(opTree[x].items);break;default:warn('Unimplemented operator '+fn);break;}}},setWordSpacing:function SVGGraphics_setWordSpacing(wordSpacing){this.current.wordSpacing=wordSpacing;},setCharSpacing:function SVGGraphics_setCharSpacing(charSpacing){this.current.charSpacing=charSpacing;},nextLine:function SVGGraphics_nextLine(){this.moveText(0,this.current.leading);},setTextMatrix:function SVGGraphics_setTextMatrix(a,b,c,d,e,f){var current=this.current;this.current.textMatrix=this.current.lineMatrix=[a,b,c,d,e,f];this.current.x=this.current.lineX=0;this.current.y=this.current.lineY=0;current.xcoords=[];current.tspan=document.createElementNS(NS,'svg:tspan');current.tspan.setAttributeNS(null,'font-family',current.fontFamily);current.tspan.setAttributeNS(null,'font-size',pf(current.fontSize)+'px');current.tspan.setAttributeNS(null,'y',pf(-current.y));current.txtElement=document.createElementNS(NS,'svg:text');current.txtElement.appendChild(current.tspan);},beginText:function SVGGraphics_beginText(){this.current.x=this.current.lineX=0;this.current.y=this.current.lineY=0;this.current.textMatrix=IDENTITY_MATRIX;this.current.lineMatrix=IDENTITY_MATRIX;this.current.tspan=document.createElementNS(NS,'svg:tspan');this.current.txtElement=document.createElementNS(NS,'svg:text');this.current.txtgrp=document.createElementNS(NS,'svg:g');this.current.xcoords=[];},moveText:function SVGGraphics_moveText(x,y){var current=this.current;this.current.x=this.current.lineX+=x;this.current.y=this.current.lineY+=y;current.xcoords=[];current.tspan=document.createElementNS(NS,'svg:tspan');current.tspan.setAttributeNS(null,'font-family',current.fontFamily);current.tspan.setAttributeNS(null,'font-size',pf(current.fontSize)+'px');current.tspan.setAttributeNS(null,'y',pf(-current.y));},showText:function SVGGraphics_showText(glyphs){var current=this.current;var font=current.font;var fontSize=current.fontSize;if(fontSize===0){return;}
var charSpacing=current.charSpacing;var wordSpacing=current.wordSpacing;var fontDirection=current.fontDirection;var textHScale=current.textHScale*fontDirection;var glyphsLength=glyphs.length;var vertical=font.vertical;var widthAdvanceScale=fontSize*current.fontMatrix[0];var x=0,i;for(i=0;i<glyphsLength;++i){var glyph=glyphs[i];if(glyph===null){x+=fontDirection*wordSpacing;continue;}else if(isNum(glyph)){x+=-glyph*fontSize*0.001;continue;}
current.xcoords.push(current.x+x*textHScale);var width=glyph.width;var character=glyph.fontChar;var charWidth=width*widthAdvanceScale+charSpacing*fontDirection;x+=charWidth;current.tspan.textContent+=character;}
if(vertical){current.y-=x*textHScale;}else{current.x+=x*textHScale;}
current.tspan.setAttributeNS(null,'x',current.xcoords.map(pf).join(' '));current.tspan.setAttributeNS(null,'y',pf(-current.y));current.tspan.setAttributeNS(null,'font-family',current.fontFamily);current.tspan.setAttributeNS(null,'font-size',pf(current.fontSize)+'px');if(current.fontStyle!==SVG_DEFAULTS.fontStyle){current.tspan.setAttributeNS(null,'font-style',current.fontStyle);}
if(current.fontWeight!==SVG_DEFAULTS.fontWeight){current.tspan.setAttributeNS(null,'font-weight',current.fontWeight);}
if(current.fillColor!==SVG_DEFAULTS.fillColor){current.tspan.setAttributeNS(null,'fill',current.fillColor);}
current.txtElement.setAttributeNS(null,'transform',pm(current.textMatrix)+' scale(1, -1)');current.txtElement.setAttributeNS(XML_NS,'xml:space','preserve');current.txtElement.appendChild(current.tspan);current.txtgrp.appendChild(current.txtElement);this._ensureTransformGroup().appendChild(current.txtElement);},setLeadingMoveText:function SVGGraphics_setLeadingMoveText(x,y){this.setLeading(-y);this.moveText(x,y);},addFontStyle:function SVGGraphics_addFontStyle(fontObj){if(!this.cssStyle){this.cssStyle=document.createElementNS(NS,'svg:style');this.cssStyle.setAttributeNS(null,'type','text/css');this.defs.appendChild(this.cssStyle);}
var url=createObjectURL(fontObj.data,fontObj.mimetype,this.forceDataSchema);this.cssStyle.textContent+='@font-face { font-family: "'+fontObj.loadedName+'";'+' src: url('+url+'); }\n';},setFont:function SVGGraphics_setFont(details){var current=this.current;var fontObj=this.commonObjs.get(details[0]);var size=details[1];this.current.font=fontObj;if(this.embedFonts&&fontObj.data&&!this.embeddedFonts[fontObj.loadedName]){this.addFontStyle(fontObj);this.embeddedFonts[fontObj.loadedName]=fontObj;}
current.fontMatrix=fontObj.fontMatrix?fontObj.fontMatrix:FONT_IDENTITY_MATRIX;var bold=fontObj.black?fontObj.bold?'bolder':'bold':fontObj.bold?'bold':'normal';var italic=fontObj.italic?'italic':'normal';if(size<0){size=-size;current.fontDirection=-1;}else{current.fontDirection=1;}
current.fontSize=size;current.fontFamily=fontObj.loadedName;current.fontWeight=bold;current.fontStyle=italic;current.tspan=document.createElementNS(NS,'svg:tspan');current.tspan.setAttributeNS(null,'y',pf(-current.y));current.xcoords=[];},endText:function SVGGraphics_endText(){},setLineWidth:function SVGGraphics_setLineWidth(width){this.current.lineWidth=width;},setLineCap:function SVGGraphics_setLineCap(style){this.current.lineCap=LINE_CAP_STYLES[style];},setLineJoin:function SVGGraphics_setLineJoin(style){this.current.lineJoin=LINE_JOIN_STYLES[style];},setMiterLimit:function SVGGraphics_setMiterLimit(limit){this.current.miterLimit=limit;},setStrokeRGBColor:function SVGGraphics_setStrokeRGBColor(r,g,b){var color=Util.makeCssRgb(r,g,b);this.current.strokeColor=color;},setFillRGBColor:function SVGGraphics_setFillRGBColor(r,g,b){var color=Util.makeCssRgb(r,g,b);this.current.fillColor=color;this.current.tspan=document.createElementNS(NS,'svg:tspan');this.current.xcoords=[];},setDash:function SVGGraphics_setDash(dashArray,dashPhase){this.current.dashArray=dashArray;this.current.dashPhase=dashPhase;},constructPath:function SVGGraphics_constructPath(ops,args){var current=this.current;var x=current.x,y=current.y;current.path=document.createElementNS(NS,'svg:path');var d=[];var opLength=ops.length;for(var i=0,j=0;i<opLength;i++){switch(ops[i]|0){case OPS.rectangle:x=args[j++];y=args[j++];var width=args[j++];var height=args[j++];var xw=x+width;var yh=y+height;d.push('M',pf(x),pf(y),'L',pf(xw),pf(y),'L',pf(xw),pf(yh),'L',pf(x),pf(yh),'Z');break;case OPS.moveTo:x=args[j++];y=args[j++];d.push('M',pf(x),pf(y));break;case OPS.lineTo:x=args[j++];y=args[j++];d.push('L',pf(x),pf(y));break;case OPS.curveTo:x=args[j+4];y=args[j+5];d.push('C',pf(args[j]),pf(args[j+1]),pf(args[j+2]),pf(args[j+3]),pf(x),pf(y));j+=6;break;case OPS.curveTo2:x=args[j+2];y=args[j+3];d.push('C',pf(x),pf(y),pf(args[j]),pf(args[j+1]),pf(args[j+2]),pf(args[j+3]));j+=4;break;case OPS.curveTo3:x=args[j+2];y=args[j+3];d.push('C',pf(args[j]),pf(args[j+1]),pf(x),pf(y),pf(x),pf(y));j+=4;break;case OPS.closePath:d.push('Z');break;}}
current.path.setAttributeNS(null,'d',d.join(' '));current.path.setAttributeNS(null,'stroke-miterlimit',pf(current.miterLimit));current.path.setAttributeNS(null,'stroke-linecap',current.lineCap);current.path.setAttributeNS(null,'stroke-linejoin',current.lineJoin);current.path.setAttributeNS(null,'stroke-width',pf(current.lineWidth)+'px');current.path.setAttributeNS(null,'stroke-dasharray',current.dashArray.map(pf).join(' '));current.path.setAttributeNS(null,'stroke-dashoffset',pf(current.dashPhase)+'px');current.path.setAttributeNS(null,'fill','none');this._ensureTransformGroup().appendChild(current.path);current.element=current.path;current.setCurrentPoint(x,y);},endPath:function SVGGraphics_endPath(){},clip:function SVGGraphics_clip(type){var current=this.current;var clipId='clippath'+clipCount;clipCount++;var clipPath=document.createElementNS(NS,'svg:clipPath');clipPath.setAttributeNS(null,'id',clipId);clipPath.setAttributeNS(null,'transform',pm(this.transformMatrix));var clipElement=current.element.cloneNode();if(type==='evenodd'){clipElement.setAttributeNS(null,'clip-rule','evenodd');}else{clipElement.setAttributeNS(null,'clip-rule','nonzero');}
clipPath.appendChild(clipElement);this.defs.appendChild(clipPath);if(current.activeClipUrl){current.clipGroup=null;this.extraStack.forEach(function(prev){prev.clipGroup=null;});}
current.activeClipUrl='url(#'+clipId+')';this.tgrp=null;},closePath:function SVGGraphics_closePath(){var current=this.current;var d=current.path.getAttributeNS(null,'d');d+='Z';current.path.setAttributeNS(null,'d',d);},setLeading:function SVGGraphics_setLeading(leading){this.current.leading=-leading;},setTextRise:function SVGGraphics_setTextRise(textRise){this.current.textRise=textRise;},setHScale:function SVGGraphics_setHScale(scale){this.current.textHScale=scale / 100;},setGState:function SVGGraphics_setGState(states){for(var i=0,ii=states.length;i<ii;i++){var state=states[i];var key=state[0];var value=state[1];switch(key){case'LW':this.setLineWidth(value);break;case'LC':this.setLineCap(value);break;case'LJ':this.setLineJoin(value);break;case'ML':this.setMiterLimit(value);break;case'D':this.setDash(value[0],value[1]);break;case'Font':this.setFont(value);break;default:warn('Unimplemented graphic state '+key);break;}}},fill:function SVGGraphics_fill(){var current=this.current;current.element.setAttributeNS(null,'fill',current.fillColor);},stroke:function SVGGraphics_stroke(){var current=this.current;current.element.setAttributeNS(null,'stroke',current.strokeColor);current.element.setAttributeNS(null,'fill','none');},eoFill:function SVGGraphics_eoFill(){var current=this.current;current.element.setAttributeNS(null,'fill',current.fillColor);current.element.setAttributeNS(null,'fill-rule','evenodd');},fillStroke:function SVGGraphics_fillStroke(){this.stroke();this.fill();},eoFillStroke:function SVGGraphics_eoFillStroke(){this.current.element.setAttributeNS(null,'fill-rule','evenodd');this.fillStroke();},closeStroke:function SVGGraphics_closeStroke(){this.closePath();this.stroke();},closeFillStroke:function SVGGraphics_closeFillStroke(){this.closePath();this.fillStroke();},paintSolidColorImageMask:function SVGGraphics_paintSolidColorImageMask(){var current=this.current;var rect=document.createElementNS(NS,'svg:rect');rect.setAttributeNS(null,'x','0');rect.setAttributeNS(null,'y','0');rect.setAttributeNS(null,'width','1px');rect.setAttributeNS(null,'height','1px');rect.setAttributeNS(null,'fill',current.fillColor);this._ensureTransformGroup().appendChild(rect);},paintJpegXObject:function SVGGraphics_paintJpegXObject(objId,w,h){var imgObj=this.objs.get(objId);var imgEl=document.createElementNS(NS,'svg:image');imgEl.setAttributeNS(XLINK_NS,'xlink:href',imgObj.src);imgEl.setAttributeNS(null,'width',imgObj.width+'px');imgEl.setAttributeNS(null,'height',imgObj.height+'px');imgEl.setAttributeNS(null,'x','0');imgEl.setAttributeNS(null,'y',pf(-h));imgEl.setAttributeNS(null,'transform','scale('+pf(1 / w)+' '+pf(-1 / h)+')');this._ensureTransformGroup().appendChild(imgEl);},paintImageXObject:function SVGGraphics_paintImageXObject(objId){var imgData=this.objs.get(objId);if(!imgData){warn('Dependent image isn\'t ready yet');return;}
this.paintInlineImageXObject(imgData);},paintInlineImageXObject:function SVGGraphics_paintInlineImageXObject(imgData,mask){var width=imgData.width;var height=imgData.height;var imgSrc=convertImgDataToPng(imgData,this.forceDataSchema);var cliprect=document.createElementNS(NS,'svg:rect');cliprect.setAttributeNS(null,'x','0');cliprect.setAttributeNS(null,'y','0');cliprect.setAttributeNS(null,'width',pf(width));cliprect.setAttributeNS(null,'height',pf(height));this.current.element=cliprect;this.clip('nonzero');var imgEl=document.createElementNS(NS,'svg:image');imgEl.setAttributeNS(XLINK_NS,'xlink:href',imgSrc);imgEl.setAttributeNS(null,'x','0');imgEl.setAttributeNS(null,'y',pf(-height));imgEl.setAttributeNS(null,'width',pf(width)+'px');imgEl.setAttributeNS(null,'height',pf(height)+'px');imgEl.setAttributeNS(null,'transform','scale('+pf(1 / width)+' '+pf(-1 / height)+')');if(mask){mask.appendChild(imgEl);}else{this._ensureTransformGroup().appendChild(imgEl);}},paintImageMaskXObject:function SVGGraphics_paintImageMaskXObject(imgData){var current=this.current;var width=imgData.width;var height=imgData.height;var fillColor=current.fillColor;current.maskId='mask'+maskCount++;var mask=document.createElementNS(NS,'svg:mask');mask.setAttributeNS(null,'id',current.maskId);var rect=document.createElementNS(NS,'svg:rect');rect.setAttributeNS(null,'x','0');rect.setAttributeNS(null,'y','0');rect.setAttributeNS(null,'width',pf(width));rect.setAttributeNS(null,'height',pf(height));rect.setAttributeNS(null,'fill',fillColor);rect.setAttributeNS(null,'mask','url(#'+current.maskId+')');this.defs.appendChild(mask);this._ensureTransformGroup().appendChild(rect);this.paintInlineImageXObject(imgData,mask);},paintFormXObjectBegin:function SVGGraphics_paintFormXObjectBegin(matrix,bbox){if(isArray(matrix)&&matrix.length===6){this.transform(matrix[0],matrix[1],matrix[2],matrix[3],matrix[4],matrix[5]);}
if(isArray(bbox)&&bbox.length===4){var width=bbox[2]-bbox[0];var height=bbox[3]-bbox[1];var cliprect=document.createElementNS(NS,'svg:rect');cliprect.setAttributeNS(null,'x',bbox[0]);cliprect.setAttributeNS(null,'y',bbox[1]);cliprect.setAttributeNS(null,'width',pf(width));cliprect.setAttributeNS(null,'height',pf(height));this.current.element=cliprect;this.clip('nonzero');this.endPath();}},paintFormXObjectEnd:function SVGGraphics_paintFormXObjectEnd(){},_initialize:function SVGGraphics_initialize(viewport){var svg=document.createElementNS(NS,'svg:svg');svg.setAttributeNS(null,'version','1.1');svg.setAttributeNS(null,'width',viewport.width+'px');svg.setAttributeNS(null,'height',viewport.height+'px');svg.setAttributeNS(null,'preserveAspectRatio','none');svg.setAttributeNS(null,'viewBox','0 0 '+viewport.width+' '+viewport.height);var definitions=document.createElementNS(NS,'svg:defs');svg.appendChild(definitions);this.defs=definitions;var rootGroup=document.createElementNS(NS,'svg:g');rootGroup.setAttributeNS(null,'transform',pm(viewport.transform));svg.appendChild(rootGroup);this.svg=rootGroup;return svg;},_ensureClipGroup:function SVGGraphics_ensureClipGroup(){if(!this.current.clipGroup){var clipGroup=document.createElementNS(NS,'svg:g');clipGroup.setAttributeNS(null,'clip-path',this.current.activeClipUrl);this.svg.appendChild(clipGroup);this.current.clipGroup=clipGroup;}
return this.current.clipGroup;},_ensureTransformGroup:function SVGGraphics_ensureTransformGroup(){if(!this.tgrp){this.tgrp=document.createElementNS(NS,'svg:g');this.tgrp.setAttributeNS(null,'transform',pm(this.transformMatrix));if(this.current.activeClipUrl){this._ensureClipGroup().appendChild(this.tgrp);}else{this.svg.appendChild(this.tgrp);}}
return this.tgrp;}};return SVGGraphics;}();exports.SVGGraphics=SVGGraphics;}));(function(root,factory){factory(root.pdfjsDisplayAnnotationLayer={},root.pdfjsSharedUtil,root.pdfjsDisplayDOMUtils);}(this,function(exports,sharedUtil,displayDOMUtils){var AnnotationBorderStyleType=sharedUtil.AnnotationBorderStyleType;var AnnotationType=sharedUtil.AnnotationType;var Util=sharedUtil.Util;var addLinkAttributes=displayDOMUtils.addLinkAttributes;var LinkTarget=displayDOMUtils.LinkTarget;var getFilenameFromUrl=displayDOMUtils.getFilenameFromUrl;var warn=sharedUtil.warn;var CustomStyle=displayDOMUtils.CustomStyle;var getDefaultSetting=displayDOMUtils.getDefaultSetting;function AnnotationElementFactory(){}
AnnotationElementFactory.prototype={create:function AnnotationElementFactory_create(parameters){var subtype=parameters.data.annotationType;switch(subtype){case AnnotationType.LINK:return new LinkAnnotationElement(parameters);case AnnotationType.TEXT:return new TextAnnotationElement(parameters);case AnnotationType.WIDGET:var fieldType=parameters.data.fieldType;switch(fieldType){case'Tx':return new TextWidgetAnnotationElement(parameters);case'Btn':if(parameters.data.radioButton){return new RadioButtonWidgetAnnotationElement(parameters);}else if(parameters.data.checkBox){return new CheckboxWidgetAnnotationElement(parameters);}
warn('Unimplemented button widget annotation: pushbutton');break;case'Ch':return new ChoiceWidgetAnnotationElement(parameters);}
return new WidgetAnnotationElement(parameters);case AnnotationType.POPUP:return new PopupAnnotationElement(parameters);case AnnotationType.HIGHLIGHT:return new HighlightAnnotationElement(parameters);case AnnotationType.UNDERLINE:return new UnderlineAnnotationElement(parameters);case AnnotationType.SQUIGGLY:return new SquigglyAnnotationElement(parameters);case AnnotationType.STRIKEOUT:return new StrikeOutAnnotationElement(parameters);case AnnotationType.FILEATTACHMENT:return new FileAttachmentAnnotationElement(parameters);default:return new AnnotationElement(parameters);}}};var AnnotationElement=function AnnotationElementClosure(){function AnnotationElement(parameters,isRenderable){this.isRenderable=isRenderable||false;this.data=parameters.data;this.layer=parameters.layer;this.page=parameters.page;this.viewport=parameters.viewport;this.linkService=parameters.linkService;this.downloadManager=parameters.downloadManager;this.imageResourcesPath=parameters.imageResourcesPath;this.renderInteractiveForms=parameters.renderInteractiveForms;if(isRenderable){this.container=this._createContainer();}}
AnnotationElement.prototype={_createContainer:function AnnotationElement_createContainer(){var data=this.data,page=this.page,viewport=this.viewport;var container=document.createElement('section');var width=data.rect[2]-data.rect[0];var height=data.rect[3]-data.rect[1];container.setAttribute('data-annotation-id',data.id);var rect=Util.normalizeRect([data.rect[0],page.view[3]-data.rect[1]+page.view[1],data.rect[2],page.view[3]-data.rect[3]+page.view[1]]);CustomStyle.setProp('transform',container,'matrix('+viewport.transform.join(',')+')');CustomStyle.setProp('transformOrigin',container,-rect[0]+'px '+ -rect[1]+'px');if(data.borderStyle.width>0){container.style.borderWidth=data.borderStyle.width+'px';if(data.borderStyle.style!==AnnotationBorderStyleType.UNDERLINE){width=width-2*data.borderStyle.width;height=height-2*data.borderStyle.width;}
var horizontalRadius=data.borderStyle.horizontalCornerRadius;var verticalRadius=data.borderStyle.verticalCornerRadius;if(horizontalRadius>0||verticalRadius>0){var radius=horizontalRadius+'px / '+verticalRadius+'px';CustomStyle.setProp('borderRadius',container,radius);}
switch(data.borderStyle.style){case AnnotationBorderStyleType.SOLID:container.style.borderStyle='solid';break;case AnnotationBorderStyleType.DASHED:container.style.borderStyle='dashed';break;case AnnotationBorderStyleType.BEVELED:warn('Unimplemented border style: beveled');break;case AnnotationBorderStyleType.INSET:warn('Unimplemented border style: inset');break;case AnnotationBorderStyleType.UNDERLINE:container.style.borderBottomStyle='solid';break;default:break;}
if(data.color){container.style.borderColor=Util.makeCssRgb(data.color[0]|0,data.color[1]|0,data.color[2]|0);}else{container.style.borderWidth=0;}}
container.style.left=rect[0]+'px';container.style.top=rect[1]+'px';container.style.width=width+'px';container.style.height=height+'px';return container;},_createPopup:function AnnotationElement_createPopup(container,trigger,data){if(!trigger){trigger=document.createElement('div');trigger.style.height=container.style.height;trigger.style.width=container.style.width;container.appendChild(trigger);}
var popupElement=new PopupElement({container:container,trigger:trigger,color:data.color,title:data.title,contents:data.contents,hideWrapper:true});var popup=popupElement.render();popup.style.left=container.style.width;container.appendChild(popup);},render:function AnnotationElement_render(){throw new Error('Abstract method AnnotationElement.render called');}};return AnnotationElement;}();var LinkAnnotationElement=function LinkAnnotationElementClosure(){function LinkAnnotationElement(parameters){AnnotationElement.call(this,parameters,true);}
Util.inherit(LinkAnnotationElement,AnnotationElement,{render:function LinkAnnotationElement_render(){this.container.className='linkAnnotation';var link=document.createElement('a');addLinkAttributes(link,{url:this.data.url,target:this.data.newWindow?LinkTarget.BLANK:undefined});if(!this.data.url){if(this.data.action){this._bindNamedAction(link,this.data.action);}else{this._bindLink(link,this.data.dest);}}
this.container.appendChild(link);return this.container;},_bindLink:function LinkAnnotationElement_bindLink(link,destination){var self=this;link.href=this.linkService.getDestinationHash(destination);link.onclick=function(){if(destination){self.linkService.navigateTo(destination);}
return false;};if(destination){link.className='internalLink';}},_bindNamedAction:function LinkAnnotationElement_bindNamedAction(link,action){var self=this;link.href=this.linkService.getAnchorUrl('');link.onclick=function(){self.linkService.executeNamedAction(action);return false;};link.className='internalLink';}});return LinkAnnotationElement;}();var TextAnnotationElement=function TextAnnotationElementClosure(){function TextAnnotationElement(parameters){var isRenderable=!!(parameters.data.hasPopup||parameters.data.title||parameters.data.contents);AnnotationElement.call(this,parameters,isRenderable);}
Util.inherit(TextAnnotationElement,AnnotationElement,{render:function TextAnnotationElement_render(){this.container.className='textAnnotation';var image=document.createElement('img');image.style.height=this.container.style.height;image.style.width=this.container.style.width;image.src=this.imageResourcesPath+'annotation-'+this.data.name.toLowerCase()+'.svg';image.alt='[{{type}} Annotation]';image.dataset.l10nId='text_annotation_type';image.dataset.l10nArgs=JSON.stringify({type:this.data.name});if(!this.data.hasPopup){this._createPopup(this.container,image,this.data);}
this.container.appendChild(image);return this.container;}});return TextAnnotationElement;}();var WidgetAnnotationElement=function WidgetAnnotationElementClosure(){function WidgetAnnotationElement(parameters,isRenderable){AnnotationElement.call(this,parameters,isRenderable);}
Util.inherit(WidgetAnnotationElement,AnnotationElement,{render:function WidgetAnnotationElement_render(){return this.container;}});return WidgetAnnotationElement;}();var TextWidgetAnnotationElement=function TextWidgetAnnotationElementClosure(){var TEXT_ALIGNMENT=['left','center','right'];function TextWidgetAnnotationElement(parameters){var isRenderable=parameters.renderInteractiveForms||!parameters.data.hasAppearance&&!!parameters.data.fieldValue;WidgetAnnotationElement.call(this,parameters,isRenderable);}
Util.inherit(TextWidgetAnnotationElement,WidgetAnnotationElement,{render:function TextWidgetAnnotationElement_render(){this.container.className='textWidgetAnnotation';var element=null;if(this.renderInteractiveForms){if(this.data.multiLine){element=document.createElement('textarea');element.textContent=this.data.fieldValue;}else{element=document.createElement('input');element.type='text';element.setAttribute('value',this.data.fieldValue);}
element.disabled=this.data.readOnly;if(this.data.maxLen!==null){element.maxLength=this.data.maxLen;}
if(this.data.comb){var fieldWidth=this.data.rect[2]-this.data.rect[0];var combWidth=fieldWidth / this.data.maxLen;element.classList.add('comb');element.style.letterSpacing='calc('+combWidth+'px - 1ch)';}}else{element=document.createElement('div');element.textContent=this.data.fieldValue;element.style.verticalAlign='middle';element.style.display='table-cell';var font=null;if(this.data.fontRefName){font=this.page.commonObjs.getData(this.data.fontRefName);}
this._setTextStyle(element,font);}
if(this.data.textAlignment!==null){element.style.textAlign=TEXT_ALIGNMENT[this.data.textAlignment];}
this.container.appendChild(element);return this.container;},_setTextStyle:function TextWidgetAnnotationElement_setTextStyle(element,font){var style=element.style;style.fontSize=this.data.fontSize+'px';style.direction=this.data.fontDirection<0?'rtl':'ltr';if(!font){return;}
style.fontWeight=font.black?font.bold?'900':'bold':font.bold?'bold':'normal';style.fontStyle=font.italic?'italic':'normal';var fontFamily=font.loadedName?'"'+font.loadedName+'", ':'';var fallbackName=font.fallbackName||'Helvetica, sans-serif';style.fontFamily=fontFamily+fallbackName;}});return TextWidgetAnnotationElement;}();var CheckboxWidgetAnnotationElement=function CheckboxWidgetAnnotationElementClosure(){function CheckboxWidgetAnnotationElement(parameters){WidgetAnnotationElement.call(this,parameters,parameters.renderInteractiveForms);}
Util.inherit(CheckboxWidgetAnnotationElement,WidgetAnnotationElement,{render:function CheckboxWidgetAnnotationElement_render(){this.container.className='buttonWidgetAnnotation checkBox';var element=document.createElement('input');element.disabled=this.data.readOnly;element.type='checkbox';if(this.data.fieldValue&&this.data.fieldValue!=='Off'){element.setAttribute('checked',true);}
this.container.appendChild(element);return this.container;}});return CheckboxWidgetAnnotationElement;}();var RadioButtonWidgetAnnotationElement=function RadioButtonWidgetAnnotationElementClosure(){function RadioButtonWidgetAnnotationElement(parameters){WidgetAnnotationElement.call(this,parameters,parameters.renderInteractiveForms);}
Util.inherit(RadioButtonWidgetAnnotationElement,WidgetAnnotationElement,{render:function RadioButtonWidgetAnnotationElement_render(){this.container.className='buttonWidgetAnnotation radioButton';var element=document.createElement('input');element.disabled=this.data.readOnly;element.type='radio';element.name=this.data.fieldName;if(this.data.fieldValue===this.data.buttonValue){element.setAttribute('checked',true);}
this.container.appendChild(element);return this.container;}});return RadioButtonWidgetAnnotationElement;}();var ChoiceWidgetAnnotationElement=function ChoiceWidgetAnnotationElementClosure(){function ChoiceWidgetAnnotationElement(parameters){WidgetAnnotationElement.call(this,parameters,parameters.renderInteractiveForms);}
Util.inherit(ChoiceWidgetAnnotationElement,WidgetAnnotationElement,{render:function ChoiceWidgetAnnotationElement_render(){this.container.className='choiceWidgetAnnotation';var selectElement=document.createElement('select');selectElement.disabled=this.data.readOnly;if(!this.data.combo){selectElement.size=this.data.options.length;if(this.data.multiSelect){selectElement.multiple=true;}}
for(var i=0,ii=this.data.options.length;i<ii;i++){var option=this.data.options[i];var optionElement=document.createElement('option');optionElement.textContent=option.displayValue;optionElement.value=option.exportValue;if(this.data.fieldValue.indexOf(option.displayValue)>=0){optionElement.setAttribute('selected',true);}
selectElement.appendChild(optionElement);}
this.container.appendChild(selectElement);return this.container;}});return ChoiceWidgetAnnotationElement;}();var PopupAnnotationElement=function PopupAnnotationElementClosure(){function PopupAnnotationElement(parameters){var isRenderable=!!(parameters.data.title||parameters.data.contents);AnnotationElement.call(this,parameters,isRenderable);}
Util.inherit(PopupAnnotationElement,AnnotationElement,{render:function PopupAnnotationElement_render(){this.container.className='popupAnnotation';var selector='[data-annotation-id="'+this.data.parentId+'"]';var parentElement=this.layer.querySelector(selector);if(!parentElement){return this.container;}
var popup=new PopupElement({container:this.container,trigger:parentElement,color:this.data.color,title:this.data.title,contents:this.data.contents});var parentLeft=parseFloat(parentElement.style.left);var parentWidth=parseFloat(parentElement.style.width);CustomStyle.setProp('transformOrigin',this.container,-(parentLeft+parentWidth)+'px -'+parentElement.style.top);this.container.style.left=parentLeft+parentWidth+'px';this.container.appendChild(popup.render());return this.container;}});return PopupAnnotationElement;}();var PopupElement=function PopupElementClosure(){var BACKGROUND_ENLIGHT=0.7;function PopupElement(parameters){this.container=parameters.container;this.trigger=parameters.trigger;this.color=parameters.color;this.title=parameters.title;this.contents=parameters.contents;this.hideWrapper=parameters.hideWrapper||false;this.pinned=false;}
PopupElement.prototype={render:function PopupElement_render(){var wrapper=document.createElement('div');wrapper.className='popupWrapper';this.hideElement=this.hideWrapper?wrapper:this.container;this.hideElement.setAttribute('hidden',true);var popup=document.createElement('div');popup.className='popup';var color=this.color;if(color){var r=BACKGROUND_ENLIGHT*(255-color[0])+color[0];var g=BACKGROUND_ENLIGHT*(255-color[1])+color[1];var b=BACKGROUND_ENLIGHT*(255-color[2])+color[2];popup.style.backgroundColor=Util.makeCssRgb(r|0,g|0,b|0);}
var contents=this._formatContents(this.contents);var title=document.createElement('h1');title.textContent=this.title;this.trigger.addEventListener('click',this._toggle.bind(this));this.trigger.addEventListener('mouseover',this._show.bind(this,false));this.trigger.addEventListener('mouseout',this._hide.bind(this,false));popup.addEventListener('click',this._hide.bind(this,true));popup.appendChild(title);popup.appendChild(contents);wrapper.appendChild(popup);return wrapper;},_formatContents:function PopupElement_formatContents(contents){var p=document.createElement('p');var lines=contents.split(/(?:\r\n?|\n)/);for(var i=0,ii=lines.length;i<ii;++i){var line=lines[i];p.appendChild(document.createTextNode(line));if(i<ii-1){p.appendChild(document.createElement('br'));}}
return p;},_toggle:function PopupElement_toggle(){if(this.pinned){this._hide(true);}else{this._show(true);}},_show:function PopupElement_show(pin){if(pin){this.pinned=true;}
if(this.hideElement.hasAttribute('hidden')){this.hideElement.removeAttribute('hidden');this.container.style.zIndex+=1;}},_hide:function PopupElement_hide(unpin){if(unpin){this.pinned=false;}
if(!this.hideElement.hasAttribute('hidden')&&!this.pinned){this.hideElement.setAttribute('hidden',true);this.container.style.zIndex-=1;}}};return PopupElement;}();var HighlightAnnotationElement=function HighlightAnnotationElementClosure(){function HighlightAnnotationElement(parameters){var isRenderable=!!(parameters.data.hasPopup||parameters.data.title||parameters.data.contents);AnnotationElement.call(this,parameters,isRenderable);}
Util.inherit(HighlightAnnotationElement,AnnotationElement,{render:function HighlightAnnotationElement_render(){this.container.className='highlightAnnotation';if(!this.data.hasPopup){this._createPopup(this.container,null,this.data);}
return this.container;}});return HighlightAnnotationElement;}();var UnderlineAnnotationElement=function UnderlineAnnotationElementClosure(){function UnderlineAnnotationElement(parameters){var isRenderable=!!(parameters.data.hasPopup||parameters.data.title||parameters.data.contents);AnnotationElement.call(this,parameters,isRenderable);}
Util.inherit(UnderlineAnnotationElement,AnnotationElement,{render:function UnderlineAnnotationElement_render(){this.container.className='underlineAnnotation';if(!this.data.hasPopup){this._createPopup(this.container,null,this.data);}
return this.container;}});return UnderlineAnnotationElement;}();var SquigglyAnnotationElement=function SquigglyAnnotationElementClosure(){function SquigglyAnnotationElement(parameters){var isRenderable=!!(parameters.data.hasPopup||parameters.data.title||parameters.data.contents);AnnotationElement.call(this,parameters,isRenderable);}
Util.inherit(SquigglyAnnotationElement,AnnotationElement,{render:function SquigglyAnnotationElement_render(){this.container.className='squigglyAnnotation';if(!this.data.hasPopup){this._createPopup(this.container,null,this.data);}
return this.container;}});return SquigglyAnnotationElement;}();var StrikeOutAnnotationElement=function StrikeOutAnnotationElementClosure(){function StrikeOutAnnotationElement(parameters){var isRenderable=!!(parameters.data.hasPopup||parameters.data.title||parameters.data.contents);AnnotationElement.call(this,parameters,isRenderable);}
Util.inherit(StrikeOutAnnotationElement,AnnotationElement,{render:function StrikeOutAnnotationElement_render(){this.container.className='strikeoutAnnotation';if(!this.data.hasPopup){this._createPopup(this.container,null,this.data);}
return this.container;}});return StrikeOutAnnotationElement;}();var FileAttachmentAnnotationElement=function FileAttachmentAnnotationElementClosure(){function FileAttachmentAnnotationElement(parameters){AnnotationElement.call(this,parameters,true);this.filename=getFilenameFromUrl(parameters.data.file.filename);this.content=parameters.data.file.content;}
Util.inherit(FileAttachmentAnnotationElement,AnnotationElement,{render:function FileAttachmentAnnotationElement_render(){this.container.className='fileAttachmentAnnotation';var trigger=document.createElement('div');trigger.style.height=this.container.style.height;trigger.style.width=this.container.style.width;trigger.addEventListener('dblclick',this._download.bind(this));if(!this.data.hasPopup&&(this.data.title||this.data.contents)){this._createPopup(this.container,trigger,this.data);}
this.container.appendChild(trigger);return this.container;},_download:function FileAttachmentAnnotationElement_download(){if(!this.downloadManager){warn('Download cannot be started due to unavailable download manager');return;}
this.downloadManager.downloadData(this.content,this.filename,'');}});return FileAttachmentAnnotationElement;}();var AnnotationLayer=function AnnotationLayerClosure(){return{render:function AnnotationLayer_render(parameters){var annotationElementFactory=new AnnotationElementFactory();for(var i=0,ii=parameters.annotations.length;i<ii;i++){var data=parameters.annotations[i];if(!data){continue;}
var properties={data:data,layer:parameters.div,page:parameters.page,viewport:parameters.viewport,linkService:parameters.linkService,downloadManager:parameters.downloadManager,imageResourcesPath:parameters.imageResourcesPath||getDefaultSetting('imageResourcesPath'),renderInteractiveForms:parameters.renderInteractiveForms||false};var element=annotationElementFactory.create(properties);if(element.isRenderable){parameters.div.appendChild(element.render());}}},update:function AnnotationLayer_update(parameters){for(var i=0,ii=parameters.annotations.length;i<ii;i++){var data=parameters.annotations[i];var element=parameters.div.querySelector('[data-annotation-id="'+data.id+'"]');if(element){CustomStyle.setProp('transform',element,'matrix('+parameters.viewport.transform.join(',')+')');}}
parameters.div.removeAttribute('hidden');}};}();exports.AnnotationLayer=AnnotationLayer;}));(function(root,factory){factory(root.pdfjsDisplayTextLayer={},root.pdfjsSharedUtil,root.pdfjsDisplayDOMUtils);}(this,function(exports,sharedUtil,displayDOMUtils){var Util=sharedUtil.Util;var createPromiseCapability=sharedUtil.createPromiseCapability;var CustomStyle=displayDOMUtils.CustomStyle;var getDefaultSetting=displayDOMUtils.getDefaultSetting;var renderTextLayer=function renderTextLayerClosure(){var MAX_TEXT_DIVS_TO_RENDER=100000;var NonWhitespaceRegexp=/\S/;function isAllWhitespace(str){return!NonWhitespaceRegexp.test(str);}
var styleBuf=['left: ',0,'px; top: ',0,'px; font-size: ',0,'px; font-family: ','',';'];function appendText(task,geom,styles){var textDiv=document.createElement('div');var textDivProperties={style:null,angle:0,canvasWidth:0,isWhitespace:false,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1};task._textDivs.push(textDiv);if(isAllWhitespace(geom.str)){textDivProperties.isWhitespace=true;task._textDivProperties.set(textDiv,textDivProperties);return;}
var tx=Util.transform(task._viewport.transform,geom.transform);var angle=Math.atan2(tx[1],tx[0]);var style=styles[geom.fontName];if(style.vertical){angle+=Math.PI / 2;}
var fontHeight=Math.sqrt(tx[2]*tx[2]+tx[3]*tx[3]);var fontAscent=fontHeight;if(style.ascent){fontAscent=style.ascent*fontAscent;}else if(style.descent){fontAscent=(1+style.descent)*fontAscent;}
var left;var top;if(angle===0){left=tx[4];top=tx[5]-fontAscent;}else{left=tx[4]+fontAscent*Math.sin(angle);top=tx[5]-fontAscent*Math.cos(angle);}
styleBuf[1]=left;styleBuf[3]=top;styleBuf[5]=fontHeight;styleBuf[7]=style.fontFamily;textDivProperties.style=styleBuf.join('');textDiv.setAttribute('style',textDivProperties.style);textDiv.textContent=geom.str;if(getDefaultSetting('pdfBug')){textDiv.dataset.fontName=geom.fontName;}
if(angle!==0){textDivProperties.angle=angle*(180 / Math.PI);}
if(geom.str.length>1){if(style.vertical){textDivProperties.canvasWidth=geom.height*task._viewport.scale;}else{textDivProperties.canvasWidth=geom.width*task._viewport.scale;}}
task._textDivProperties.set(textDiv,textDivProperties);if(task._enhanceTextSelection){var angleCos=1,angleSin=0;if(angle!==0){angleCos=Math.cos(angle);angleSin=Math.sin(angle);}
var divWidth=(style.vertical?geom.height:geom.width)*task._viewport.scale;var divHeight=fontHeight;var m,b;if(angle!==0){m=[angleCos,angleSin,-angleSin,angleCos,left,top];b=Util.getAxialAlignedBoundingBox([0,0,divWidth,divHeight],m);}else{b=[left,top,left+divWidth,top+divHeight];}
task._bounds.push({left:b[0],top:b[1],right:b[2],bottom:b[3],div:textDiv,size:[divWidth,divHeight],m:m});}}
function render(task){if(task._canceled){return;}
var textLayerFrag=task._container;var textDivs=task._textDivs;var capability=task._capability;var textDivsLength=textDivs.length;if(textDivsLength>MAX_TEXT_DIVS_TO_RENDER){task._renderingDone=true;capability.resolve();return;}
var canvas=document.createElement('canvas');canvas.mozOpaque=true;var ctx=canvas.getContext('2d',{alpha:false});var lastFontSize;var lastFontFamily;for(var i=0;i<textDivsLength;i++){var textDiv=textDivs[i];var textDivProperties=task._textDivProperties.get(textDiv);if(textDivProperties.isWhitespace){continue;}
var fontSize=textDiv.style.fontSize;var fontFamily=textDiv.style.fontFamily;if(fontSize!==lastFontSize||fontFamily!==lastFontFamily){ctx.font=fontSize+' '+fontFamily;lastFontSize=fontSize;lastFontFamily=fontFamily;}
var width=ctx.measureText(textDiv.textContent).width;textLayerFrag.appendChild(textDiv);var transform='';if(textDivProperties.canvasWidth!==0&&width>0){textDivProperties.scale=textDivProperties.canvasWidth / width;transform='scaleX('+textDivProperties.scale+')';}
if(textDivProperties.angle!==0){transform='rotate('+textDivProperties.angle+'deg) '+transform;}
if(transform!==''){textDivProperties.originalTransform=transform;CustomStyle.setProp('transform',textDiv,transform);}
task._textDivProperties.set(textDiv,textDivProperties);}
task._renderingDone=true;capability.resolve();}
function expand(task){var bounds=task._bounds;var viewport=task._viewport;var expanded=expandBounds(viewport.width,viewport.height,bounds);for(var i=0;i<expanded.length;i++){var div=bounds[i].div;var divProperties=task._textDivProperties.get(div);if(divProperties.angle===0){divProperties.paddingLeft=bounds[i].left-expanded[i].left;divProperties.paddingTop=bounds[i].top-expanded[i].top;divProperties.paddingRight=expanded[i].right-bounds[i].right;divProperties.paddingBottom=expanded[i].bottom-bounds[i].bottom;task._textDivProperties.set(div,divProperties);continue;}
var e=expanded[i],b=bounds[i];var m=b.m,c=m[0],s=m[1];var points=[[0,0],[0,b.size[1]],[b.size[0],0],b.size];var ts=new Float64Array(64);points.forEach(function(p,i){var t=Util.applyTransform(p,m);ts[i+0]=c&&(e.left-t[0])/ c;ts[i+4]=s&&(e.top-t[1])/ s;ts[i+8]=c&&(e.right-t[0])/ c;ts[i+12]=s&&(e.bottom-t[1])/ s;ts[i+16]=s&&(e.left-t[0])/-s;ts[i+20]=c&&(e.top-t[1])/ c;ts[i+24]=s&&(e.right-t[0])/-s;ts[i+28]=c&&(e.bottom-t[1])/ c;ts[i+32]=c&&(e.left-t[0])/-c;ts[i+36]=s&&(e.top-t[1])/-s;ts[i+40]=c&&(e.right-t[0])/-c;ts[i+44]=s&&(e.bottom-t[1])/-s;ts[i+48]=s&&(e.left-t[0])/ s;ts[i+52]=c&&(e.top-t[1])/-c;ts[i+56]=s&&(e.right-t[0])/ s;ts[i+60]=c&&(e.bottom-t[1])/-c;});var findPositiveMin=function(ts,offset,count){var result=0;for(var i=0;i<count;i++){var t=ts[offset++];if(t>0){result=result?Math.min(t,result):t;}}
return result;};var boxScale=1+Math.min(Math.abs(c),Math.abs(s));divProperties.paddingLeft=findPositiveMin(ts,32,16)/ boxScale;divProperties.paddingTop=findPositiveMin(ts,48,16)/ boxScale;divProperties.paddingRight=findPositiveMin(ts,0,16)/ boxScale;divProperties.paddingBottom=findPositiveMin(ts,16,16)/ boxScale;task._textDivProperties.set(div,divProperties);}}
function expandBounds(width,height,boxes){var bounds=boxes.map(function(box,i){return{x1:box.left,y1:box.top,x2:box.right,y2:box.bottom,index:i,x1New:undefined,x2New:undefined};});expandBoundsLTR(width,bounds);var expanded=new Array(boxes.length);bounds.forEach(function(b){var i=b.index;expanded[i]={left:b.x1New,top:0,right:b.x2New,bottom:0};});boxes.map(function(box,i){var e=expanded[i],b=bounds[i];b.x1=box.top;b.y1=width-e.right;b.x2=box.bottom;b.y2=width-e.left;b.index=i;b.x1New=undefined;b.x2New=undefined;});expandBoundsLTR(height,bounds);bounds.forEach(function(b){var i=b.index;expanded[i].top=b.x1New;expanded[i].bottom=b.x2New;});return expanded;}
function expandBoundsLTR(width,bounds){bounds.sort(function(a,b){return a.x1-b.x1||a.index-b.index;});var fakeBoundary={x1:-Infinity,y1:-Infinity,x2:0,y2:Infinity,index:-1,x1New:0,x2New:0};var horizon=[{start:-Infinity,end:Infinity,boundary:fakeBoundary}];bounds.forEach(function(boundary){var i=0;while(i<horizon.length&&horizon[i].end<=boundary.y1){i++;}
var j=horizon.length-1;while(j>=0&&horizon[j].start>=boundary.y2){j--;}
var horizonPart,affectedBoundary;var q,k,maxXNew=-Infinity;for(q=i;q<=j;q++){horizonPart=horizon[q];affectedBoundary=horizonPart.boundary;var xNew;if(affectedBoundary.x2>boundary.x1){xNew=affectedBoundary.index>boundary.index?affectedBoundary.x1New:boundary.x1;}else if(affectedBoundary.x2New===undefined){xNew=(affectedBoundary.x2+boundary.x1)/ 2;}else{xNew=affectedBoundary.x2New;}
if(xNew>maxXNew){maxXNew=xNew;}}
boundary.x1New=maxXNew;for(q=i;q<=j;q++){horizonPart=horizon[q];affectedBoundary=horizonPart.boundary;if(affectedBoundary.x2New===undefined){if(affectedBoundary.x2>boundary.x1){if(affectedBoundary.index>boundary.index){affectedBoundary.x2New=affectedBoundary.x2;}}else{affectedBoundary.x2New=maxXNew;}}else if(affectedBoundary.x2New>maxXNew){affectedBoundary.x2New=Math.max(maxXNew,affectedBoundary.x2);}}
var changedHorizon=[],lastBoundary=null;for(q=i;q<=j;q++){horizonPart=horizon[q];affectedBoundary=horizonPart.boundary;var useBoundary=affectedBoundary.x2>boundary.x2?affectedBoundary:boundary;if(lastBoundary===useBoundary){changedHorizon[changedHorizon.length-1].end=horizonPart.end;}else{changedHorizon.push({start:horizonPart.start,end:horizonPart.end,boundary:useBoundary});lastBoundary=useBoundary;}}
if(horizon[i].start<boundary.y1){changedHorizon[0].start=boundary.y1;changedHorizon.unshift({start:horizon[i].start,end:boundary.y1,boundary:horizon[i].boundary});}
if(boundary.y2<horizon[j].end){changedHorizon[changedHorizon.length-1].end=boundary.y2;changedHorizon.push({start:boundary.y2,end:horizon[j].end,boundary:horizon[j].boundary});}
for(q=i;q<=j;q++){horizonPart=horizon[q];affectedBoundary=horizonPart.boundary;if(affectedBoundary.x2New!==undefined){continue;}
var used=false;for(k=i-1;!used&&k>=0&&horizon[k].start>=affectedBoundary.y1;k--){used=horizon[k].boundary===affectedBoundary;}
for(k=j+1;!used&&k<horizon.length&&horizon[k].end<=affectedBoundary.y2;k++){used=horizon[k].boundary===affectedBoundary;}
for(k=0;!used&&k<changedHorizon.length;k++){used=changedHorizon[k].boundary===affectedBoundary;}
if(!used){affectedBoundary.x2New=maxXNew;}}
Array.prototype.splice.apply(horizon,[i,j-i+1].concat(changedHorizon));});horizon.forEach(function(horizonPart){var affectedBoundary=horizonPart.boundary;if(affectedBoundary.x2New===undefined){affectedBoundary.x2New=Math.max(width,affectedBoundary.x2);}});}
function TextLayerRenderTask(textContent,container,viewport,textDivs,enhanceTextSelection){this._textContent=textContent;this._container=container;this._viewport=viewport;this._textDivs=textDivs||[];this._textDivProperties=new WeakMap();this._renderingDone=false;this._canceled=false;this._capability=createPromiseCapability();this._renderTimer=null;this._bounds=[];this._enhanceTextSelection=!!enhanceTextSelection;}
TextLayerRenderTask.prototype={get promise(){return this._capability.promise;},cancel:function TextLayer_cancel(){this._canceled=true;if(this._renderTimer!==null){clearTimeout(this._renderTimer);this._renderTimer=null;}
this._capability.reject('canceled');},_render:function TextLayer_render(timeout){var textItems=this._textContent.items;var textStyles=this._textContent.styles;for(var i=0,len=textItems.length;i<len;i++){appendText(this,textItems[i],textStyles);}
if(!timeout){render(this);}else{var self=this;this._renderTimer=setTimeout(function(){render(self);self._renderTimer=null;},timeout);}},expandTextDivs:function TextLayer_expandTextDivs(expandDivs){if(!this._enhanceTextSelection||!this._renderingDone){return;}
if(this._bounds!==null){expand(this);this._bounds=null;}
for(var i=0,ii=this._textDivs.length;i<ii;i++){var div=this._textDivs[i];var divProperties=this._textDivProperties.get(div);if(divProperties.isWhitespace){continue;}
if(expandDivs){var transform='',padding='';if(divProperties.scale!==1){transform='scaleX('+divProperties.scale+')';}
if(divProperties.angle!==0){transform='rotate('+divProperties.angle+'deg) '+transform;}
if(divProperties.paddingLeft!==0){padding+=' padding-left: '+divProperties.paddingLeft / divProperties.scale+'px;';transform+=' translateX('+ -divProperties.paddingLeft / divProperties.scale+'px)';}
if(divProperties.paddingTop!==0){padding+=' padding-top: '+divProperties.paddingTop+'px;';transform+=' translateY('+ -divProperties.paddingTop+'px)';}
if(divProperties.paddingRight!==0){padding+=' padding-right: '+divProperties.paddingRight / divProperties.scale+'px;';}
if(divProperties.paddingBottom!==0){padding+=' padding-bottom: '+divProperties.paddingBottom+'px;';}
if(padding!==''){div.setAttribute('style',divProperties.style+padding);}
if(transform!==''){CustomStyle.setProp('transform',div,transform);}}else{div.style.padding=0;CustomStyle.setProp('transform',div,divProperties.originalTransform||'');}}}};function renderTextLayer(renderParameters){var task=new TextLayerRenderTask(renderParameters.textContent,renderParameters.container,renderParameters.viewport,renderParameters.textDivs,renderParameters.enhanceTextSelection);task._render(renderParameters.timeout);return task;}
return renderTextLayer;}();exports.renderTextLayer=renderTextLayer;}));(function(root,factory){factory(root.pdfjsDisplayWebGL={},root.pdfjsSharedUtil,root.pdfjsDisplayDOMUtils);}(this,function(exports,sharedUtil,displayDOMUtils){var shadow=sharedUtil.shadow;var getDefaultSetting=displayDOMUtils.getDefaultSetting;var WebGLUtils=function WebGLUtilsClosure(){function loadShader(gl,code,shaderType){var shader=gl.createShader(shaderType);gl.shaderSource(shader,code);gl.compileShader(shader);var compiled=gl.getShaderParameter(shader,gl.COMPILE_STATUS);if(!compiled){var errorMsg=gl.getShaderInfoLog(shader);throw new Error('Error during shader compilation: '+errorMsg);}
return shader;}
function createVertexShader(gl,code){return loadShader(gl,code,gl.VERTEX_SHADER);}
function createFragmentShader(gl,code){return loadShader(gl,code,gl.FRAGMENT_SHADER);}
function createProgram(gl,shaders){var program=gl.createProgram();for(var i=0,ii=shaders.length;i<ii;++i){gl.attachShader(program,shaders[i]);}
gl.linkProgram(program);var linked=gl.getProgramParameter(program,gl.LINK_STATUS);if(!linked){var errorMsg=gl.getProgramInfoLog(program);throw new Error('Error during program linking: '+errorMsg);}
return program;}
function createTexture(gl,image,textureId){gl.activeTexture(textureId);var texture=gl.createTexture();gl.bindTexture(gl.TEXTURE_2D,texture);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.NEAREST);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.NEAREST);gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,gl.RGBA,gl.UNSIGNED_BYTE,image);return texture;}
var currentGL,currentCanvas;function generateGL(){if(currentGL){return;}
currentCanvas=document.createElement('canvas');currentGL=currentCanvas.getContext('webgl',{premultipliedalpha:false});}
var smaskVertexShaderCode='  attribute vec2 a_position;                                      attribute vec2 a_texCoord;                                                                                                      uniform vec2 u_resolution;                                                                                                      varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec2 clipSpace = (a_position / u_resolution) * 2.0 - 1.0;       gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_texCoord = a_texCoord;                                      }                                                             ';var smaskFragmentShaderCode='  precision mediump float;                                                                                                        uniform vec4 u_backdrop;                                        uniform int u_subtype;                                          uniform sampler2D u_image;                                      uniform sampler2D u_mask;                                                                                                       varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec4 imageColor = texture2D(u_image, v_texCoord);               vec4 maskColor = texture2D(u_mask, v_texCoord);                 if (u_backdrop.a > 0.0) {                                         maskColor.rgb = maskColor.rgb * maskColor.a +                                   u_backdrop.rgb * (1.0 - maskColor.a);         }                                                               float lum;                                                      if (u_subtype == 0) {                                             lum = maskColor.a;                                            } else {                                                          lum = maskColor.r * 0.3 + maskColor.g * 0.59 +                        maskColor.b * 0.11;                                     }                                                               imageColor.a *= lum;                                            imageColor.rgb *= imageColor.a;                                 gl_FragColor = imageColor;                                    }                                                             ';var smaskCache=null;function initSmaskGL(){var canvas,gl;generateGL();canvas=currentCanvas;currentCanvas=null;gl=currentGL;currentGL=null;var vertexShader=createVertexShader(gl,smaskVertexShaderCode);var fragmentShader=createFragmentShader(gl,smaskFragmentShaderCode);var program=createProgram(gl,[vertexShader,fragmentShader]);gl.useProgram(program);var cache={};cache.gl=gl;cache.canvas=canvas;cache.resolutionLocation=gl.getUniformLocation(program,'u_resolution');cache.positionLocation=gl.getAttribLocation(program,'a_position');cache.backdropLocation=gl.getUniformLocation(program,'u_backdrop');cache.subtypeLocation=gl.getUniformLocation(program,'u_subtype');var texCoordLocation=gl.getAttribLocation(program,'a_texCoord');var texLayerLocation=gl.getUniformLocation(program,'u_image');var texMaskLocation=gl.getUniformLocation(program,'u_mask');var texCoordBuffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,texCoordBuffer);gl.bufferData(gl.ARRAY_BUFFER,new Float32Array([0.0,0.0,1.0,0.0,0.0,1.0,0.0,1.0,1.0,0.0,1.0,1.0]),gl.STATIC_DRAW);gl.enableVertexAttribArray(texCoordLocation);gl.vertexAttribPointer(texCoordLocation,2,gl.FLOAT,false,0,0);gl.uniform1i(texLayerLocation,0);gl.uniform1i(texMaskLocation,1);smaskCache=cache;}
function composeSMask(layer,mask,properties){var width=layer.width,height=layer.height;if(!smaskCache){initSmaskGL();}
var cache=smaskCache,canvas=cache.canvas,gl=cache.gl;canvas.width=width;canvas.height=height;gl.viewport(0,0,gl.drawingBufferWidth,gl.drawingBufferHeight);gl.uniform2f(cache.resolutionLocation,width,height);if(properties.backdrop){gl.uniform4f(cache.resolutionLocation,properties.backdrop[0],properties.backdrop[1],properties.backdrop[2],1);}else{gl.uniform4f(cache.resolutionLocation,0,0,0,0);}
gl.uniform1i(cache.subtypeLocation,properties.subtype==='Luminosity'?1:0);var texture=createTexture(gl,layer,gl.TEXTURE0);var maskTexture=createTexture(gl,mask,gl.TEXTURE1);var buffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,buffer);gl.bufferData(gl.ARRAY_BUFFER,new Float32Array([0,0,width,0,0,height,0,height,width,0,width,height]),gl.STATIC_DRAW);gl.enableVertexAttribArray(cache.positionLocation);gl.vertexAttribPointer(cache.positionLocation,2,gl.FLOAT,false,0,0);gl.clearColor(0,0,0,0);gl.enable(gl.BLEND);gl.blendFunc(gl.ONE,gl.ONE_MINUS_SRC_ALPHA);gl.clear(gl.COLOR_BUFFER_BIT);gl.drawArrays(gl.TRIANGLES,0,6);gl.flush();gl.deleteTexture(texture);gl.deleteTexture(maskTexture);gl.deleteBuffer(buffer);return canvas;}
var figuresVertexShaderCode='  attribute vec2 a_position;                                      attribute vec3 a_color;                                                                                                         uniform vec2 u_resolution;                                      uniform vec2 u_scale;                                           uniform vec2 u_offset;                                                                                                          varying vec4 v_color;                                                                                                           void main() {                                                     vec2 position = (a_position + u_offset) * u_scale;              vec2 clipSpace = (position / u_resolution) * 2.0 - 1.0;         gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_color = vec4(a_color / 255.0, 1.0);                         }                                                             ';var figuresFragmentShaderCode='  precision mediump float;                                                                                                        varying vec4 v_color;                                                                                                           void main() {                                                     gl_FragColor = v_color;                                       }                                                             ';var figuresCache=null;function initFiguresGL(){var canvas,gl;generateGL();canvas=currentCanvas;currentCanvas=null;gl=currentGL;currentGL=null;var vertexShader=createVertexShader(gl,figuresVertexShaderCode);var fragmentShader=createFragmentShader(gl,figuresFragmentShaderCode);var program=createProgram(gl,[vertexShader,fragmentShader]);gl.useProgram(program);var cache={};cache.gl=gl;cache.canvas=canvas;cache.resolutionLocation=gl.getUniformLocation(program,'u_resolution');cache.scaleLocation=gl.getUniformLocation(program,'u_scale');cache.offsetLocation=gl.getUniformLocation(program,'u_offset');cache.positionLocation=gl.getAttribLocation(program,'a_position');cache.colorLocation=gl.getAttribLocation(program,'a_color');figuresCache=cache;}
function drawFigures(width,height,backgroundColor,figures,context){if(!figuresCache){initFiguresGL();}
var cache=figuresCache,canvas=cache.canvas,gl=cache.gl;canvas.width=width;canvas.height=height;gl.viewport(0,0,gl.drawingBufferWidth,gl.drawingBufferHeight);gl.uniform2f(cache.resolutionLocation,width,height);var count=0;var i,ii,rows;for(i=0,ii=figures.length;i<ii;i++){switch(figures[i].type){case'lattice':rows=figures[i].coords.length / figures[i].verticesPerRow|0;count+=(rows-1)*(figures[i].verticesPerRow-1)*6;break;case'triangles':count+=figures[i].coords.length;break;}}
var coords=new Float32Array(count*2);var colors=new Uint8Array(count*3);var coordsMap=context.coords,colorsMap=context.colors;var pIndex=0,cIndex=0;for(i=0,ii=figures.length;i<ii;i++){var figure=figures[i],ps=figure.coords,cs=figure.colors;switch(figure.type){case'lattice':var cols=figure.verticesPerRow;rows=ps.length / cols|0;for(var row=1;row<rows;row++){var offset=row*cols+1;for(var col=1;col<cols;col++,offset++){coords[pIndex]=coordsMap[ps[offset-cols-1]];coords[pIndex+1]=coordsMap[ps[offset-cols-1]+1];coords[pIndex+2]=coordsMap[ps[offset-cols]];coords[pIndex+3]=coordsMap[ps[offset-cols]+1];coords[pIndex+4]=coordsMap[ps[offset-1]];coords[pIndex+5]=coordsMap[ps[offset-1]+1];colors[cIndex]=colorsMap[cs[offset-cols-1]];colors[cIndex+1]=colorsMap[cs[offset-cols-1]+1];colors[cIndex+2]=colorsMap[cs[offset-cols-1]+2];colors[cIndex+3]=colorsMap[cs[offset-cols]];colors[cIndex+4]=colorsMap[cs[offset-cols]+1];colors[cIndex+5]=colorsMap[cs[offset-cols]+2];colors[cIndex+6]=colorsMap[cs[offset-1]];colors[cIndex+7]=colorsMap[cs[offset-1]+1];colors[cIndex+8]=colorsMap[cs[offset-1]+2];coords[pIndex+6]=coords[pIndex+2];coords[pIndex+7]=coords[pIndex+3];coords[pIndex+8]=coords[pIndex+4];coords[pIndex+9]=coords[pIndex+5];coords[pIndex+10]=coordsMap[ps[offset]];coords[pIndex+11]=coordsMap[ps[offset]+1];colors[cIndex+9]=colors[cIndex+3];colors[cIndex+10]=colors[cIndex+4];colors[cIndex+11]=colors[cIndex+5];colors[cIndex+12]=colors[cIndex+6];colors[cIndex+13]=colors[cIndex+7];colors[cIndex+14]=colors[cIndex+8];colors[cIndex+15]=colorsMap[cs[offset]];colors[cIndex+16]=colorsMap[cs[offset]+1];colors[cIndex+17]=colorsMap[cs[offset]+2];pIndex+=12;cIndex+=18;}}
break;case'triangles':for(var j=0,jj=ps.length;j<jj;j++){coords[pIndex]=coordsMap[ps[j]];coords[pIndex+1]=coordsMap[ps[j]+1];colors[cIndex]=colorsMap[cs[j]];colors[cIndex+1]=colorsMap[cs[j]+1];colors[cIndex+2]=colorsMap[cs[j]+2];pIndex+=2;cIndex+=3;}
break;}}
if(backgroundColor){gl.clearColor(backgroundColor[0]/ 255,backgroundColor[1]/ 255,backgroundColor[2]/ 255,1.0);}else{gl.clearColor(0,0,0,0);}
gl.clear(gl.COLOR_BUFFER_BIT);var coordsBuffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,coordsBuffer);gl.bufferData(gl.ARRAY_BUFFER,coords,gl.STATIC_DRAW);gl.enableVertexAttribArray(cache.positionLocation);gl.vertexAttribPointer(cache.positionLocation,2,gl.FLOAT,false,0,0);var colorsBuffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,colorsBuffer);gl.bufferData(gl.ARRAY_BUFFER,colors,gl.STATIC_DRAW);gl.enableVertexAttribArray(cache.colorLocation);gl.vertexAttribPointer(cache.colorLocation,3,gl.UNSIGNED_BYTE,false,0,0);gl.uniform2f(cache.scaleLocation,context.scaleX,context.scaleY);gl.uniform2f(cache.offsetLocation,context.offsetX,context.offsetY);gl.drawArrays(gl.TRIANGLES,0,count);gl.flush();gl.deleteBuffer(coordsBuffer);gl.deleteBuffer(colorsBuffer);return canvas;}
function cleanup(){if(smaskCache&&smaskCache.canvas){smaskCache.canvas.width=0;smaskCache.canvas.height=0;}
if(figuresCache&&figuresCache.canvas){figuresCache.canvas.width=0;figuresCache.canvas.height=0;}
smaskCache=null;figuresCache=null;}
return{get isEnabled(){if(getDefaultSetting('disableWebGL')){return false;}
var enabled=false;try{generateGL();enabled=!!currentGL;}catch(e){}
return shadow(this,'isEnabled',enabled);},composeSMask:composeSMask,drawFigures:drawFigures,clear:cleanup};}();exports.WebGLUtils=WebGLUtils;}));(function(root,factory){factory(root.pdfjsDisplayPatternHelper={},root.pdfjsSharedUtil,root.pdfjsDisplayWebGL);}(this,function(exports,sharedUtil,displayWebGL){var Util=sharedUtil.Util;var info=sharedUtil.info;var isArray=sharedUtil.isArray;var error=sharedUtil.error;var WebGLUtils=displayWebGL.WebGLUtils;var ShadingIRs={};ShadingIRs.RadialAxial={fromIR:function RadialAxial_fromIR(raw){var type=raw[1];var colorStops=raw[2];var p0=raw[3];var p1=raw[4];var r0=raw[5];var r1=raw[6];return{type:'Pattern',getPattern:function RadialAxial_getPattern(ctx){var grad;if(type==='axial'){grad=ctx.createLinearGradient(p0[0],p0[1],p1[0],p1[1]);}else if(type==='radial'){grad=ctx.createRadialGradient(p0[0],p0[1],r0,p1[0],p1[1],r1);}
for(var i=0,ii=colorStops.length;i<ii;++i){var c=colorStops[i];grad.addColorStop(c[0],c[1]);}
return grad;}};}};var createMeshCanvas=function createMeshCanvasClosure(){function drawTriangle(data,context,p1,p2,p3,c1,c2,c3){var coords=context.coords,colors=context.colors;var bytes=data.data,rowSize=data.width*4;var tmp;if(coords[p1+1]>coords[p2+1]){tmp=p1;p1=p2;p2=tmp;tmp=c1;c1=c2;c2=tmp;}
if(coords[p2+1]>coords[p3+1]){tmp=p2;p2=p3;p3=tmp;tmp=c2;c2=c3;c3=tmp;}
if(coords[p1+1]>coords[p2+1]){tmp=p1;p1=p2;p2=tmp;tmp=c1;c1=c2;c2=tmp;}
var x1=(coords[p1]+context.offsetX)*context.scaleX;var y1=(coords[p1+1]+context.offsetY)*context.scaleY;var x2=(coords[p2]+context.offsetX)*context.scaleX;var y2=(coords[p2+1]+context.offsetY)*context.scaleY;var x3=(coords[p3]+context.offsetX)*context.scaleX;var y3=(coords[p3+1]+context.offsetY)*context.scaleY;if(y1>=y3){return;}
var c1r=colors[c1],c1g=colors[c1+1],c1b=colors[c1+2];var c2r=colors[c2],c2g=colors[c2+1],c2b=colors[c2+2];var c3r=colors[c3],c3g=colors[c3+1],c3b=colors[c3+2];var minY=Math.round(y1),maxY=Math.round(y3);var xa,car,cag,cab;var xb,cbr,cbg,cbb;var k;for(var y=minY;y<=maxY;y++){if(y<y2){k=y<y1?0:y1===y2?1:(y1-y)/(y1-y2);xa=x1-(x1-x2)*k;car=c1r-(c1r-c2r)*k;cag=c1g-(c1g-c2g)*k;cab=c1b-(c1b-c2b)*k;}else{k=y>y3?1:y2===y3?0:(y2-y)/(y2-y3);xa=x2-(x2-x3)*k;car=c2r-(c2r-c3r)*k;cag=c2g-(c2g-c3g)*k;cab=c2b-(c2b-c3b)*k;}
k=y<y1?0:y>y3?1:(y1-y)/(y1-y3);xb=x1-(x1-x3)*k;cbr=c1r-(c1r-c3r)*k;cbg=c1g-(c1g-c3g)*k;cbb=c1b-(c1b-c3b)*k;var x1_=Math.round(Math.min(xa,xb));var x2_=Math.round(Math.max(xa,xb));var j=rowSize*y+x1_*4;for(var x=x1_;x<=x2_;x++){k=(xa-x)/(xa-xb);k=k<0?0:k>1?1:k;bytes[j++]=car-(car-cbr)*k|0;bytes[j++]=cag-(cag-cbg)*k|0;bytes[j++]=cab-(cab-cbb)*k|0;bytes[j++]=255;}}}
function drawFigure(data,figure,context){var ps=figure.coords;var cs=figure.colors;var i,ii;switch(figure.type){case'lattice':var verticesPerRow=figure.verticesPerRow;var rows=Math.floor(ps.length / verticesPerRow)-1;var cols=verticesPerRow-1;for(i=0;i<rows;i++){var q=i*verticesPerRow;for(var j=0;j<cols;j++,q++){drawTriangle(data,context,ps[q],ps[q+1],ps[q+verticesPerRow],cs[q],cs[q+1],cs[q+verticesPerRow]);drawTriangle(data,context,ps[q+verticesPerRow+1],ps[q+1],ps[q+verticesPerRow],cs[q+verticesPerRow+1],cs[q+1],cs[q+verticesPerRow]);}}
break;case'triangles':for(i=0,ii=ps.length;i<ii;i+=3){drawTriangle(data,context,ps[i],ps[i+1],ps[i+2],cs[i],cs[i+1],cs[i+2]);}
break;default:error('illigal figure');break;}}
function createMeshCanvas(bounds,combinesScale,coords,colors,figures,backgroundColor,cachedCanvases){var EXPECTED_SCALE=1.1;var MAX_PATTERN_SIZE=3000;var BORDER_SIZE=2;var offsetX=Math.floor(bounds[0]);var offsetY=Math.floor(bounds[1]);var boundsWidth=Math.ceil(bounds[2])-offsetX;var boundsHeight=Math.ceil(bounds[3])-offsetY;var width=Math.min(Math.ceil(Math.abs(boundsWidth*combinesScale[0]*EXPECTED_SCALE)),MAX_PATTERN_SIZE);var height=Math.min(Math.ceil(Math.abs(boundsHeight*combinesScale[1]*EXPECTED_SCALE)),MAX_PATTERN_SIZE);var scaleX=boundsWidth / width;var scaleY=boundsHeight / height;var context={coords:coords,colors:colors,offsetX:-offsetX,offsetY:-offsetY,scaleX:1 / scaleX,scaleY:1 / scaleY};var paddedWidth=width+BORDER_SIZE*2;var paddedHeight=height+BORDER_SIZE*2;var canvas,tmpCanvas,i,ii;if(WebGLUtils.isEnabled){canvas=WebGLUtils.drawFigures(width,height,backgroundColor,figures,context);tmpCanvas=cachedCanvases.getCanvas('mesh',paddedWidth,paddedHeight,false);tmpCanvas.context.drawImage(canvas,BORDER_SIZE,BORDER_SIZE);canvas=tmpCanvas.canvas;}else{tmpCanvas=cachedCanvases.getCanvas('mesh',paddedWidth,paddedHeight,false);var tmpCtx=tmpCanvas.context;var data=tmpCtx.createImageData(width,height);if(backgroundColor){var bytes=data.data;for(i=0,ii=bytes.length;i<ii;i+=4){bytes[i]=backgroundColor[0];bytes[i+1]=backgroundColor[1];bytes[i+2]=backgroundColor[2];bytes[i+3]=255;}}
for(i=0;i<figures.length;i++){drawFigure(data,figures[i],context);}
tmpCtx.putImageData(data,BORDER_SIZE,BORDER_SIZE);canvas=tmpCanvas.canvas;}
return{canvas:canvas,offsetX:offsetX-BORDER_SIZE*scaleX,offsetY:offsetY-BORDER_SIZE*scaleY,scaleX:scaleX,scaleY:scaleY};}
return createMeshCanvas;}();ShadingIRs.Mesh={fromIR:function Mesh_fromIR(raw){var coords=raw[2];var colors=raw[3];var figures=raw[4];var bounds=raw[5];var matrix=raw[6];var background=raw[8];return{type:'Pattern',getPattern:function Mesh_getPattern(ctx,owner,shadingFill){var scale;if(shadingFill){scale=Util.singularValueDecompose2dScale(ctx.mozCurrentTransform);}else{scale=Util.singularValueDecompose2dScale(owner.baseTransform);if(matrix){var matrixScale=Util.singularValueDecompose2dScale(matrix);scale=[scale[0]*matrixScale[0],scale[1]*matrixScale[1]];}}
var temporaryPatternCanvas=createMeshCanvas(bounds,scale,coords,colors,figures,shadingFill?null:background,owner.cachedCanvases);if(!shadingFill){ctx.setTransform.apply(ctx,owner.baseTransform);if(matrix){ctx.transform.apply(ctx,matrix);}}
ctx.translate(temporaryPatternCanvas.offsetX,temporaryPatternCanvas.offsetY);ctx.scale(temporaryPatternCanvas.scaleX,temporaryPatternCanvas.scaleY);return ctx.createPattern(temporaryPatternCanvas.canvas,'no-repeat');}};}};ShadingIRs.Dummy={fromIR:function Dummy_fromIR(){return{type:'Pattern',getPattern:function Dummy_fromIR_getPattern(){return'hotpink';}};}};function getShadingPatternFromIR(raw){var shadingIR=ShadingIRs[raw[0]];if(!shadingIR){error('Unknown IR type: '+raw[0]);}
return shadingIR.fromIR(raw);}
var TilingPattern=function TilingPatternClosure(){var PaintType={COLORED:1,UNCOLORED:2};var MAX_PATTERN_SIZE=3000;function TilingPattern(IR,color,ctx,canvasGraphicsFactory,baseTransform){this.operatorList=IR[2];this.matrix=IR[3]||[1,0,0,1,0,0];this.bbox=IR[4];this.xstep=IR[5];this.ystep=IR[6];this.paintType=IR[7];this.tilingType=IR[8];this.color=color;this.canvasGraphicsFactory=canvasGraphicsFactory;this.baseTransform=baseTransform;this.type='Pattern';this.ctx=ctx;}
TilingPattern.prototype={createPatternCanvas:function TilinPattern_createPatternCanvas(owner){var operatorList=this.operatorList;var bbox=this.bbox;var xstep=this.xstep;var ystep=this.ystep;var paintType=this.paintType;var tilingType=this.tilingType;var color=this.color;var canvasGraphicsFactory=this.canvasGraphicsFactory;info('TilingType: '+tilingType);var x0=bbox[0],y0=bbox[1],x1=bbox[2],y1=bbox[3];var topLeft=[x0,y0];var botRight=[x0+xstep,y0+ystep];var width=botRight[0]-topLeft[0];var height=botRight[1]-topLeft[1];var matrixScale=Util.singularValueDecompose2dScale(this.matrix);var curMatrixScale=Util.singularValueDecompose2dScale(this.baseTransform);var combinedScale=[matrixScale[0]*curMatrixScale[0],matrixScale[1]*curMatrixScale[1]];width=Math.min(Math.ceil(Math.abs(width*combinedScale[0])),MAX_PATTERN_SIZE);height=Math.min(Math.ceil(Math.abs(height*combinedScale[1])),MAX_PATTERN_SIZE);var tmpCanvas=owner.cachedCanvases.getCanvas('pattern',width,height,true);var tmpCtx=tmpCanvas.context;var graphics=canvasGraphicsFactory.createCanvasGraphics(tmpCtx);graphics.groupLevel=owner.groupLevel;this.setFillAndStrokeStyleToContext(tmpCtx,paintType,color);this.setScale(width,height,xstep,ystep);this.transformToScale(graphics);var tmpTranslate=[1,0,0,1,-topLeft[0],-topLeft[1]];graphics.transform.apply(graphics,tmpTranslate);this.clipBbox(graphics,bbox,x0,y0,x1,y1);graphics.executeOperatorList(operatorList);return tmpCanvas.canvas;},setScale:function TilingPattern_setScale(width,height,xstep,ystep){this.scale=[width / xstep,height / ystep];},transformToScale:function TilingPattern_transformToScale(graphics){var scale=this.scale;var tmpScale=[scale[0],0,0,scale[1],0,0];graphics.transform.apply(graphics,tmpScale);},scaleToContext:function TilingPattern_scaleToContext(){var scale=this.scale;this.ctx.scale(1 / scale[0],1 / scale[1]);},clipBbox:function clipBbox(graphics,bbox,x0,y0,x1,y1){if(bbox&&isArray(bbox)&&bbox.length===4){var bboxWidth=x1-x0;var bboxHeight=y1-y0;graphics.ctx.rect(x0,y0,bboxWidth,bboxHeight);graphics.clip();graphics.endPath();}},setFillAndStrokeStyleToContext:function setFillAndStrokeStyleToContext(context,paintType,color){switch(paintType){case PaintType.COLORED:var ctx=this.ctx;context.fillStyle=ctx.fillStyle;context.strokeStyle=ctx.strokeStyle;break;case PaintType.UNCOLORED:var cssColor=Util.makeCssRgb(color[0],color[1],color[2]);context.fillStyle=cssColor;context.strokeStyle=cssColor;break;default:error('Unsupported paint type: '+paintType);}},getPattern:function TilingPattern_getPattern(ctx,owner){var temporaryPatternCanvas=this.createPatternCanvas(owner);ctx=this.ctx;ctx.setTransform.apply(ctx,this.baseTransform);ctx.transform.apply(ctx,this.matrix);this.scaleToContext();return ctx.createPattern(temporaryPatternCanvas,'repeat');}};return TilingPattern;}();exports.getShadingPatternFromIR=getShadingPatternFromIR;exports.TilingPattern=TilingPattern;}));(function(root,factory){factory(root.pdfjsDisplayCanvas={},root.pdfjsSharedUtil,root.pdfjsDisplayDOMUtils,root.pdfjsDisplayPatternHelper,root.pdfjsDisplayWebGL);}(this,function(exports,sharedUtil,displayDOMUtils,displayPatternHelper,displayWebGL){var FONT_IDENTITY_MATRIX=sharedUtil.FONT_IDENTITY_MATRIX;var IDENTITY_MATRIX=sharedUtil.IDENTITY_MATRIX;var ImageKind=sharedUtil.ImageKind;var OPS=sharedUtil.OPS;var TextRenderingMode=sharedUtil.TextRenderingMode;var Uint32ArrayView=sharedUtil.Uint32ArrayView;var Util=sharedUtil.Util;var assert=sharedUtil.assert;var info=sharedUtil.info;var isNum=sharedUtil.isNum;var isArray=sharedUtil.isArray;var isLittleEndian=sharedUtil.isLittleEndian;var error=sharedUtil.error;var shadow=sharedUtil.shadow;var warn=sharedUtil.warn;var TilingPattern=displayPatternHelper.TilingPattern;var getShadingPatternFromIR=displayPatternHelper.getShadingPatternFromIR;var WebGLUtils=displayWebGL.WebGLUtils;var hasCanvasTypedArrays=displayDOMUtils.hasCanvasTypedArrays;var MIN_FONT_SIZE=16;var MAX_FONT_SIZE=100;var MAX_GROUP_SIZE=4096;var MIN_WIDTH_FACTOR=0.65;var COMPILE_TYPE3_GLYPHS=true;var MAX_SIZE_TO_COMPILE=1000;var FULL_CHUNK_HEIGHT=16;var HasCanvasTypedArraysCached={get value(){return shadow(HasCanvasTypedArraysCached,'value',hasCanvasTypedArrays());}};var IsLittleEndianCached={get value(){return shadow(IsLittleEndianCached,'value',isLittleEndian());}};function createScratchCanvas(width,height){var canvas=document.createElement('canvas');canvas.width=width;canvas.height=height;return canvas;}
function addContextCurrentTransform(ctx){if(!ctx.mozCurrentTransform){ctx._originalSave=ctx.save;ctx._originalRestore=ctx.restore;ctx._originalRotate=ctx.rotate;ctx._originalScale=ctx.scale;ctx._originalTranslate=ctx.translate;ctx._originalTransform=ctx.transform;ctx._originalSetTransform=ctx.setTransform;ctx._transformMatrix=ctx._transformMatrix||[1,0,0,1,0,0];ctx._transformStack=[];Object.defineProperty(ctx,'mozCurrentTransform',{get:function getCurrentTransform(){return this._transformMatrix;}});Object.defineProperty(ctx,'mozCurrentTransformInverse',{get:function getCurrentTransformInverse(){var m=this._transformMatrix;var a=m[0],b=m[1],c=m[2],d=m[3],e=m[4],f=m[5];var ad_bc=a*d-b*c;var bc_ad=b*c-a*d;return[d / ad_bc,b / bc_ad,c / bc_ad,a / ad_bc,(d*e-c*f)/ bc_ad,(b*e-a*f)/ ad_bc];}});ctx.save=function ctxSave(){var old=this._transformMatrix;this._transformStack.push(old);this._transformMatrix=old.slice(0,6);this._originalSave();};ctx.restore=function ctxRestore(){var prev=this._transformStack.pop();if(prev){this._transformMatrix=prev;this._originalRestore();}};ctx.translate=function ctxTranslate(x,y){var m=this._transformMatrix;m[4]=m[0]*x+m[2]*y+m[4];m[5]=m[1]*x+m[3]*y+m[5];this._originalTranslate(x,y);};ctx.scale=function ctxScale(x,y){var m=this._transformMatrix;m[0]=m[0]*x;m[1]=m[1]*x;m[2]=m[2]*y;m[3]=m[3]*y;this._originalScale(x,y);};ctx.transform=function ctxTransform(a,b,c,d,e,f){var m=this._transformMatrix;this._transformMatrix=[m[0]*a+m[2]*b,m[1]*a+m[3]*b,m[0]*c+m[2]*d,m[1]*c+m[3]*d,m[0]*e+m[2]*f+m[4],m[1]*e+m[3]*f+m[5]];ctx._originalTransform(a,b,c,d,e,f);};ctx.setTransform=function ctxSetTransform(a,b,c,d,e,f){this._transformMatrix=[a,b,c,d,e,f];ctx._originalSetTransform(a,b,c,d,e,f);};ctx.rotate=function ctxRotate(angle){var cosValue=Math.cos(angle);var sinValue=Math.sin(angle);var m=this._transformMatrix;this._transformMatrix=[m[0]*cosValue+m[2]*sinValue,m[1]*cosValue+m[3]*sinValue,m[0]*-sinValue+m[2]*cosValue,m[1]*-sinValue+m[3]*cosValue,m[4],m[5]];this._originalRotate(angle);};}}
var CachedCanvases=function CachedCanvasesClosure(){function CachedCanvases(){this.cache=Object.create(null);}
CachedCanvases.prototype={getCanvas:function CachedCanvases_getCanvas(id,width,height,trackTransform){var canvasEntry;if(this.cache[id]!==undefined){canvasEntry=this.cache[id];canvasEntry.canvas.width=width;canvasEntry.canvas.height=height;canvasEntry.context.setTransform(1,0,0,1,0,0);}else{var canvas=createScratchCanvas(width,height);var ctx=canvas.getContext('2d');if(trackTransform){addContextCurrentTransform(ctx);}
this.cache[id]=canvasEntry={canvas:canvas,context:ctx};}
return canvasEntry;},clear:function(){for(var id in this.cache){var canvasEntry=this.cache[id];canvasEntry.canvas.width=0;canvasEntry.canvas.height=0;delete this.cache[id];}}};return CachedCanvases;}();function compileType3Glyph(imgData){var POINT_TO_PROCESS_LIMIT=1000;var width=imgData.width,height=imgData.height;var i,j,j0,width1=width+1;var points=new Uint8Array(width1*(height+1));var POINT_TYPES=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]);var lineSize=width+7&~7,data0=imgData.data;var data=new Uint8Array(lineSize*height),pos=0,ii;for(i=0,ii=data0.length;i<ii;i++){var mask=128,elem=data0[i];while(mask>0){data[pos++]=elem&mask?0:255;mask>>=1;}}
var count=0;pos=0;if(data[pos]!==0){points[0]=1;++count;}
for(j=1;j<width;j++){if(data[pos]!==data[pos+1]){points[j]=data[pos]?2:1;++count;}
pos++;}
if(data[pos]!==0){points[j]=2;++count;}
for(i=1;i<height;i++){pos=i*lineSize;j0=i*width1;if(data[pos-lineSize]!==data[pos]){points[j0]=data[pos]?1:8;++count;}
var sum=(data[pos]?4:0)+(data[pos-lineSize]?8:0);for(j=1;j<width;j++){sum=(sum>>2)+(data[pos+1]?4:0)+(data[pos-lineSize+1]?8:0);if(POINT_TYPES[sum]){points[j0+j]=POINT_TYPES[sum];++count;}
pos++;}
if(data[pos-lineSize]!==data[pos]){points[j0+j]=data[pos]?2:4;++count;}
if(count>POINT_TO_PROCESS_LIMIT){return null;}}
pos=lineSize*(height-1);j0=i*width1;if(data[pos]!==0){points[j0]=8;++count;}
for(j=1;j<width;j++){if(data[pos]!==data[pos+1]){points[j0+j]=data[pos]?4:8;++count;}
pos++;}
if(data[pos]!==0){points[j0+j]=4;++count;}
if(count>POINT_TO_PROCESS_LIMIT){return null;}
var steps=new Int32Array([0,width1,-1,0,-width1,0,0,0,1]);var outlines=[];for(i=0;count&&i<=height;i++){var p=i*width1;var end=p+width;while(p<end&&!points[p]){p++;}
if(p===end){continue;}
var coords=[p%width1,i];var type=points[p],p0=p,pp;do{var step=steps[type];do{p+=step;}while(!points[p]);pp=points[p];if(pp!==5&&pp!==10){type=pp;points[p]=0;}else{type=pp&0x33*type>>4;points[p]&=type>>2|type<<2;}
coords.push(p%width1);coords.push(p / width1|0);--count;}while(p0!==p);outlines.push(coords);--i;}
var drawOutline=function(c){c.save();c.scale(1 / width,-1 / height);c.translate(0,-height);c.beginPath();for(var i=0,ii=outlines.length;i<ii;i++){var o=outlines[i];c.moveTo(o[0],o[1]);for(var j=2,jj=o.length;j<jj;j+=2){c.lineTo(o[j],o[j+1]);}}
c.fill();c.beginPath();c.restore();};return drawOutline;}
var CanvasExtraState=function CanvasExtraStateClosure(){function CanvasExtraState(old){this.alphaIsShape=false;this.fontSize=0;this.fontSizeScale=1;this.textMatrix=IDENTITY_MATRIX;this.textMatrixScale=1;this.fontMatrix=FONT_IDENTITY_MATRIX;this.leading=0;this.x=0;this.y=0;this.lineX=0;this.lineY=0;this.charSpacing=0;this.wordSpacing=0;this.textHScale=1;this.textRenderingMode=TextRenderingMode.FILL;this.textRise=0;this.fillColor='#000000';this.strokeColor='#000000';this.patternFill=false;this.fillAlpha=1;this.strokeAlpha=1;this.lineWidth=1;this.activeSMask=null;this.resumeSMaskCtx=null;this.old=old;}
CanvasExtraState.prototype={clone:function CanvasExtraState_clone(){return Object.create(this);},setCurrentPoint:function CanvasExtraState_setCurrentPoint(x,y){this.x=x;this.y=y;}};return CanvasExtraState;}();var CanvasGraphics=function CanvasGraphicsClosure(){var EXECUTION_TIME=15;var EXECUTION_STEPS=10;function CanvasGraphics(canvasCtx,commonObjs,objs,imageLayer){this.ctx=canvasCtx;this.current=new CanvasExtraState();this.stateStack=[];this.pendingClip=null;this.pendingEOFill=false;this.res=null;this.xobjs=null;this.commonObjs=commonObjs;this.objs=objs;this.imageLayer=imageLayer;this.groupStack=[];this.processingType3=null;this.baseTransform=null;this.baseTransformStack=[];this.groupLevel=0;this.smaskStack=[];this.smaskCounter=0;this.tempSMask=null;this.cachedCanvases=new CachedCanvases();if(canvasCtx){addContextCurrentTransform(canvasCtx);}
this.cachedGetSinglePixelWidth=null;}
function putBinaryImageData(ctx,imgData){if(typeof ImageData!=='undefined'&&imgData instanceof ImageData){ctx.putImageData(imgData,0,0);return;}
var height=imgData.height,width=imgData.width;var partialChunkHeight=height%FULL_CHUNK_HEIGHT;var fullChunks=(height-partialChunkHeight)/ FULL_CHUNK_HEIGHT;var totalChunks=partialChunkHeight===0?fullChunks:fullChunks+1;var chunkImgData=ctx.createImageData(width,FULL_CHUNK_HEIGHT);var srcPos=0,destPos;var src=imgData.data;var dest=chunkImgData.data;var i,j,thisChunkHeight,elemsInThisChunk;if(imgData.kind===ImageKind.GRAYSCALE_1BPP){var srcLength=src.byteLength;var dest32=HasCanvasTypedArraysCached.value?new Uint32Array(dest.buffer):new Uint32ArrayView(dest);var dest32DataLength=dest32.length;var fullSrcDiff=width+7>>3;var white=0xFFFFFFFF;var black=IsLittleEndianCached.value||!HasCanvasTypedArraysCached.value?0xFF000000:0x000000FF;for(i=0;i<totalChunks;i++){thisChunkHeight=i<fullChunks?FULL_CHUNK_HEIGHT:partialChunkHeight;destPos=0;for(j=0;j<thisChunkHeight;j++){var srcDiff=srcLength-srcPos;var k=0;var kEnd=srcDiff>fullSrcDiff?width:srcDiff*8-7;var kEndUnrolled=kEnd&~7;var mask=0;var srcByte=0;for(;k<kEndUnrolled;k+=8){srcByte=src[srcPos++];dest32[destPos++]=srcByte&128?white:black;dest32[destPos++]=srcByte&64?white:black;dest32[destPos++]=srcByte&32?white:black;dest32[destPos++]=srcByte&16?white:black;dest32[destPos++]=srcByte&8?white:black;dest32[destPos++]=srcByte&4?white:black;dest32[destPos++]=srcByte&2?white:black;dest32[destPos++]=srcByte&1?white:black;}
for(;k<kEnd;k++){if(mask===0){srcByte=src[srcPos++];mask=128;}
dest32[destPos++]=srcByte&mask?white:black;mask>>=1;}}
while(destPos<dest32DataLength){dest32[destPos++]=0;}
ctx.putImageData(chunkImgData,0,i*FULL_CHUNK_HEIGHT);}}else if(imgData.kind===ImageKind.RGBA_32BPP){j=0;elemsInThisChunk=width*FULL_CHUNK_HEIGHT*4;for(i=0;i<fullChunks;i++){dest.set(src.subarray(srcPos,srcPos+elemsInThisChunk));srcPos+=elemsInThisChunk;ctx.putImageData(chunkImgData,0,j);j+=FULL_CHUNK_HEIGHT;}
if(i<totalChunks){elemsInThisChunk=width*partialChunkHeight*4;dest.set(src.subarray(srcPos,srcPos+elemsInThisChunk));ctx.putImageData(chunkImgData,0,j);}}else if(imgData.kind===ImageKind.RGB_24BPP){thisChunkHeight=FULL_CHUNK_HEIGHT;elemsInThisChunk=width*thisChunkHeight;for(i=0;i<totalChunks;i++){if(i>=fullChunks){thisChunkHeight=partialChunkHeight;elemsInThisChunk=width*thisChunkHeight;}
destPos=0;for(j=elemsInThisChunk;j--;){dest[destPos++]=src[srcPos++];dest[destPos++]=src[srcPos++];dest[destPos++]=src[srcPos++];dest[destPos++]=255;}
ctx.putImageData(chunkImgData,0,i*FULL_CHUNK_HEIGHT);}}else{error('bad image kind: '+imgData.kind);}}
function putBinaryImageMask(ctx,imgData){var height=imgData.height,width=imgData.width;var partialChunkHeight=height%FULL_CHUNK_HEIGHT;var fullChunks=(height-partialChunkHeight)/ FULL_CHUNK_HEIGHT;var totalChunks=partialChunkHeight===0?fullChunks:fullChunks+1;var chunkImgData=ctx.createImageData(width,FULL_CHUNK_HEIGHT);var srcPos=0;var src=imgData.data;var dest=chunkImgData.data;for(var i=0;i<totalChunks;i++){var thisChunkHeight=i<fullChunks?FULL_CHUNK_HEIGHT:partialChunkHeight;var destPos=3;for(var j=0;j<thisChunkHeight;j++){var mask=0;for(var k=0;k<width;k++){if(!mask){var elem=src[srcPos++];mask=128;}
dest[destPos]=elem&mask?0:255;destPos+=4;mask>>=1;}}
ctx.putImageData(chunkImgData,0,i*FULL_CHUNK_HEIGHT);}}
function copyCtxState(sourceCtx,destCtx){var properties=['strokeStyle','fillStyle','fillRule','globalAlpha','lineWidth','lineCap','lineJoin','miterLimit','globalCompositeOperation','font'];for(var i=0,ii=properties.length;i<ii;i++){var property=properties[i];if(sourceCtx[property]!==undefined){destCtx[property]=sourceCtx[property];}}
if(sourceCtx.setLineDash!==undefined){destCtx.setLineDash(sourceCtx.getLineDash());destCtx.lineDashOffset=sourceCtx.lineDashOffset;}}
function composeSMaskBackdrop(bytes,r0,g0,b0){var length=bytes.length;for(var i=3;i<length;i+=4){var alpha=bytes[i];if(alpha===0){bytes[i-3]=r0;bytes[i-2]=g0;bytes[i-1]=b0;}else if(alpha<255){var alpha_=255-alpha;bytes[i-3]=bytes[i-3]*alpha+r0*alpha_>>8;bytes[i-2]=bytes[i-2]*alpha+g0*alpha_>>8;bytes[i-1]=bytes[i-1]*alpha+b0*alpha_>>8;}}}
function composeSMaskAlpha(maskData,layerData,transferMap){var length=maskData.length;var scale=1 / 255;for(var i=3;i<length;i+=4){var alpha=transferMap?transferMap[maskData[i]]:maskData[i];layerData[i]=layerData[i]*alpha*scale|0;}}
function composeSMaskLuminosity(maskData,layerData,transferMap){var length=maskData.length;for(var i=3;i<length;i+=4){var y=maskData[i-3]*77+maskData[i-2]*152+maskData[i-1]*28;layerData[i]=transferMap?layerData[i]*transferMap[y>>8]>>8:layerData[i]*y>>16;}}
function genericComposeSMask(maskCtx,layerCtx,width,height,subtype,backdrop,transferMap){var hasBackdrop=!!backdrop;var r0=hasBackdrop?backdrop[0]:0;var g0=hasBackdrop?backdrop[1]:0;var b0=hasBackdrop?backdrop[2]:0;var composeFn;if(subtype==='Luminosity'){composeFn=composeSMaskLuminosity;}else{composeFn=composeSMaskAlpha;}
var PIXELS_TO_PROCESS=1048576;var chunkSize=Math.min(height,Math.ceil(PIXELS_TO_PROCESS / width));for(var row=0;row<height;row+=chunkSize){var chunkHeight=Math.min(chunkSize,height-row);var maskData=maskCtx.getImageData(0,row,width,chunkHeight);var layerData=layerCtx.getImageData(0,row,width,chunkHeight);if(hasBackdrop){composeSMaskBackdrop(maskData.data,r0,g0,b0);}
composeFn(maskData.data,layerData.data,transferMap);maskCtx.putImageData(layerData,0,row);}}
function composeSMask(ctx,smask,layerCtx){var mask=smask.canvas;var maskCtx=smask.context;ctx.setTransform(smask.scaleX,0,0,smask.scaleY,smask.offsetX,smask.offsetY);var backdrop=smask.backdrop||null;if(!smask.transferMap&&WebGLUtils.isEnabled){var composed=WebGLUtils.composeSMask(layerCtx.canvas,mask,{subtype:smask.subtype,backdrop:backdrop});ctx.setTransform(1,0,0,1,0,0);ctx.drawImage(composed,smask.offsetX,smask.offsetY);return;}
genericComposeSMask(maskCtx,layerCtx,mask.width,mask.height,smask.subtype,backdrop,smask.transferMap);ctx.drawImage(mask,0,0);}
var LINE_CAP_STYLES=['butt','round','square'];var LINE_JOIN_STYLES=['miter','round','bevel'];var NORMAL_CLIP={};var EO_CLIP={};CanvasGraphics.prototype={beginDrawing:function CanvasGraphics_beginDrawing(transform,viewport,transparency){var width=this.ctx.canvas.width;var height=this.ctx.canvas.height;this.ctx.save();this.ctx.fillStyle='rgb(255, 255, 255)';this.ctx.fillRect(0,0,width,height);this.ctx.restore();if(transparency){var transparentCanvas=this.cachedCanvases.getCanvas('transparent',width,height,true);this.compositeCtx=this.ctx;this.transparentCanvas=transparentCanvas.canvas;this.ctx=transparentCanvas.context;this.ctx.save();this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform);}
this.ctx.save();if(transform){this.ctx.transform.apply(this.ctx,transform);}
this.ctx.transform.apply(this.ctx,viewport.transform);this.baseTransform=this.ctx.mozCurrentTransform.slice();if(this.imageLayer){this.imageLayer.beginLayout();}},executeOperatorList:function CanvasGraphics_executeOperatorList(operatorList,executionStartIdx,continueCallback,stepper){var argsArray=operatorList.argsArray;var fnArray=operatorList.fnArray;var i=executionStartIdx||0;var argsArrayLen=argsArray.length;if(argsArrayLen===i){return i;}
var chunkOperations=argsArrayLen-i>EXECUTION_STEPS&&typeof continueCallback==='function';var endTime=chunkOperations?Date.now()+EXECUTION_TIME:0;var steps=0;var commonObjs=this.commonObjs;var objs=this.objs;var fnId;while(true){if(stepper!==undefined&&i===stepper.nextBreakPoint){stepper.breakIt(i,continueCallback);return i;}
fnId=fnArray[i];if(fnId!==OPS.dependency){this[fnId].apply(this,argsArray[i]);}else{var deps=argsArray[i];for(var n=0,nn=deps.length;n<nn;n++){var depObjId=deps[n];var common=depObjId[0]==='g'&&depObjId[1]==='_';var objsPool=common?commonObjs:objs;if(!objsPool.isResolved(depObjId)){objsPool.get(depObjId,continueCallback);return i;}}}
i++;if(i===argsArrayLen){return i;}
if(chunkOperations&&++steps>EXECUTION_STEPS){if(Date.now()>endTime){continueCallback();return i;}
steps=0;}}},endDrawing:function CanvasGraphics_endDrawing(){if(this.current.activeSMask!==null){this.endSMaskGroup();}
this.ctx.restore();if(this.transparentCanvas){this.ctx=this.compositeCtx;this.ctx.save();this.ctx.setTransform(1,0,0,1,0,0);this.ctx.drawImage(this.transparentCanvas,0,0);this.ctx.restore();this.transparentCanvas=null;}
this.cachedCanvases.clear();WebGLUtils.clear();if(this.imageLayer){this.imageLayer.endLayout();}},setLineWidth:function CanvasGraphics_setLineWidth(width){this.current.lineWidth=width;this.ctx.lineWidth=width;},setLineCap:function CanvasGraphics_setLineCap(style){this.ctx.lineCap=LINE_CAP_STYLES[style];},setLineJoin:function CanvasGraphics_setLineJoin(style){this.ctx.lineJoin=LINE_JOIN_STYLES[style];},setMiterLimit:function CanvasGraphics_setMiterLimit(limit){this.ctx.miterLimit=limit;},setDash:function CanvasGraphics_setDash(dashArray,dashPhase){var ctx=this.ctx;if(ctx.setLineDash!==undefined){ctx.setLineDash(dashArray);ctx.lineDashOffset=dashPhase;}},setRenderingIntent:function CanvasGraphics_setRenderingIntent(intent){},setFlatness:function CanvasGraphics_setFlatness(flatness){},setGState:function CanvasGraphics_setGState(states){for(var i=0,ii=states.length;i<ii;i++){var state=states[i];var key=state[0];var value=state[1];switch(key){case'LW':this.setLineWidth(value);break;case'LC':this.setLineCap(value);break;case'LJ':this.setLineJoin(value);break;case'ML':this.setMiterLimit(value);break;case'D':this.setDash(value[0],value[1]);break;case'RI':this.setRenderingIntent(value);break;case'FL':this.setFlatness(value);break;case'Font':this.setFont(value[0],value[1]);break;case'CA':this.current.strokeAlpha=state[1];break;case'ca':this.current.fillAlpha=state[1];this.ctx.globalAlpha=state[1];break;case'BM':if(value&&value.name&&value.name!=='Normal'){var mode=value.name.replace(/([A-Z])/g,function(c){return'-'+c.toLowerCase();}).substring(1);this.ctx.globalCompositeOperation=mode;if(this.ctx.globalCompositeOperation!==mode){warn('globalCompositeOperation "'+mode+'" is not supported');}}else{this.ctx.globalCompositeOperation='source-over';}
break;case'SMask':if(this.current.activeSMask){if(this.stateStack.length>0&&this.stateStack[this.stateStack.length-1].activeSMask===this.current.activeSMask){this.suspendSMaskGroup();}else{this.endSMaskGroup();}}
this.current.activeSMask=value?this.tempSMask:null;if(this.current.activeSMask){this.beginSMaskGroup();}
this.tempSMask=null;break;}}},beginSMaskGroup:function CanvasGraphics_beginSMaskGroup(){var activeSMask=this.current.activeSMask;var drawnWidth=activeSMask.canvas.width;var drawnHeight=activeSMask.canvas.height;var cacheId='smaskGroupAt'+this.groupLevel;var scratchCanvas=this.cachedCanvases.getCanvas(cacheId,drawnWidth,drawnHeight,true);var currentCtx=this.ctx;var currentTransform=currentCtx.mozCurrentTransform;this.ctx.save();var groupCtx=scratchCanvas.context;groupCtx.scale(1 / activeSMask.scaleX,1 / activeSMask.scaleY);groupCtx.translate(-activeSMask.offsetX,-activeSMask.offsetY);groupCtx.transform.apply(groupCtx,currentTransform);activeSMask.startTransformInverse=groupCtx.mozCurrentTransformInverse;copyCtxState(currentCtx,groupCtx);this.ctx=groupCtx;this.setGState([['BM','Normal'],['ca',1],['CA',1]]);this.groupStack.push(currentCtx);this.groupLevel++;},suspendSMaskGroup:function CanvasGraphics_endSMaskGroup(){var groupCtx=this.ctx;this.groupLevel--;this.ctx=this.groupStack.pop();composeSMask(this.ctx,this.current.activeSMask,groupCtx);this.ctx.restore();this.ctx.save();copyCtxState(groupCtx,this.ctx);this.current.resumeSMaskCtx=groupCtx;var deltaTransform=Util.transform(this.current.activeSMask.startTransformInverse,groupCtx.mozCurrentTransform);this.ctx.transform.apply(this.ctx,deltaTransform);groupCtx.save();groupCtx.setTransform(1,0,0,1,0,0);groupCtx.clearRect(0,0,groupCtx.canvas.width,groupCtx.canvas.height);groupCtx.restore();},resumeSMaskGroup:function CanvasGraphics_endSMaskGroup(){var groupCtx=this.current.resumeSMaskCtx;var currentCtx=this.ctx;this.ctx=groupCtx;this.groupStack.push(currentCtx);this.groupLevel++;},endSMaskGroup:function CanvasGraphics_endSMaskGroup(){var groupCtx=this.ctx;this.groupLevel--;this.ctx=this.groupStack.pop();composeSMask(this.ctx,this.current.activeSMask,groupCtx);this.ctx.restore();copyCtxState(groupCtx,this.ctx);var deltaTransform=Util.transform(this.current.activeSMask.startTransformInverse,groupCtx.mozCurrentTransform);this.ctx.transform.apply(this.ctx,deltaTransform);},save:function CanvasGraphics_save(){this.ctx.save();var old=this.current;this.stateStack.push(old);this.current=old.clone();this.current.resumeSMaskCtx=null;},restore:function CanvasGraphics_restore(){if(this.current.resumeSMaskCtx){this.resumeSMaskGroup();}
if(this.current.activeSMask!==null&&(this.stateStack.length===0||this.stateStack[this.stateStack.length-1].activeSMask!==this.current.activeSMask)){this.endSMaskGroup();}
if(this.stateStack.length!==0){this.current=this.stateStack.pop();this.ctx.restore();this.pendingClip=null;this.cachedGetSinglePixelWidth=null;}},transform:function CanvasGraphics_transform(a,b,c,d,e,f){this.ctx.transform(a,b,c,d,e,f);this.cachedGetSinglePixelWidth=null;},constructPath:function CanvasGraphics_constructPath(ops,args){var ctx=this.ctx;var current=this.current;var x=current.x,y=current.y;for(var i=0,j=0,ii=ops.length;i<ii;i++){switch(ops[i]|0){case OPS.rectangle:x=args[j++];y=args[j++];var width=args[j++];var height=args[j++];if(width===0){width=this.getSinglePixelWidth();}
if(height===0){height=this.getSinglePixelWidth();}
var xw=x+width;var yh=y+height;this.ctx.moveTo(x,y);this.ctx.lineTo(xw,y);this.ctx.lineTo(xw,yh);this.ctx.lineTo(x,yh);this.ctx.lineTo(x,y);this.ctx.closePath();break;case OPS.moveTo:x=args[j++];y=args[j++];ctx.moveTo(x,y);break;case OPS.lineTo:x=args[j++];y=args[j++];ctx.lineTo(x,y);break;case OPS.curveTo:x=args[j+4];y=args[j+5];ctx.bezierCurveTo(args[j],args[j+1],args[j+2],args[j+3],x,y);j+=6;break;case OPS.curveTo2:ctx.bezierCurveTo(x,y,args[j],args[j+1],args[j+2],args[j+3]);x=args[j+2];y=args[j+3];j+=4;break;case OPS.curveTo3:x=args[j+2];y=args[j+3];ctx.bezierCurveTo(args[j],args[j+1],x,y,x,y);j+=4;break;case OPS.closePath:ctx.closePath();break;}}
current.setCurrentPoint(x,y);},closePath:function CanvasGraphics_closePath(){this.ctx.closePath();},stroke:function CanvasGraphics_stroke(consumePath){consumePath=typeof consumePath!=='undefined'?consumePath:true;var ctx=this.ctx;var strokeColor=this.current.strokeColor;ctx.lineWidth=Math.max(this.getSinglePixelWidth()*MIN_WIDTH_FACTOR,this.current.lineWidth);ctx.globalAlpha=this.current.strokeAlpha;if(strokeColor&&strokeColor.hasOwnProperty('type')&&strokeColor.type==='Pattern'){ctx.save();ctx.strokeStyle=strokeColor.getPattern(ctx,this);ctx.stroke();ctx.restore();}else{ctx.stroke();}
if(consumePath){this.consumePath();}
ctx.globalAlpha=this.current.fillAlpha;},closeStroke:function CanvasGraphics_closeStroke(){this.closePath();this.stroke();},fill:function CanvasGraphics_fill(consumePath){consumePath=typeof consumePath!=='undefined'?consumePath:true;var ctx=this.ctx;var fillColor=this.current.fillColor;var isPatternFill=this.current.patternFill;var needRestore=false;if(isPatternFill){ctx.save();if(this.baseTransform){ctx.setTransform.apply(ctx,this.baseTransform);}
ctx.fillStyle=fillColor.getPattern(ctx,this);needRestore=true;}
if(this.pendingEOFill){if(ctx.mozFillRule!==undefined){ctx.mozFillRule='evenodd';ctx.fill();ctx.mozFillRule='nonzero';}else{ctx.fill('evenodd');}
this.pendingEOFill=false;}else{ctx.fill();}
if(needRestore){ctx.restore();}
if(consumePath){this.consumePath();}},eoFill:function CanvasGraphics_eoFill(){this.pendingEOFill=true;this.fill();},fillStroke:function CanvasGraphics_fillStroke(){this.fill(false);this.stroke(false);this.consumePath();},eoFillStroke:function CanvasGraphics_eoFillStroke(){this.pendingEOFill=true;this.fillStroke();},closeFillStroke:function CanvasGraphics_closeFillStroke(){this.closePath();this.fillStroke();},closeEOFillStroke:function CanvasGraphics_closeEOFillStroke(){this.pendingEOFill=true;this.closePath();this.fillStroke();},endPath:function CanvasGraphics_endPath(){this.consumePath();},clip:function CanvasGraphics_clip(){this.pendingClip=NORMAL_CLIP;},eoClip:function CanvasGraphics_eoClip(){this.pendingClip=EO_CLIP;},beginText:function CanvasGraphics_beginText(){this.current.textMatrix=IDENTITY_MATRIX;this.current.textMatrixScale=1;this.current.x=this.current.lineX=0;this.current.y=this.current.lineY=0;},endText:function CanvasGraphics_endText(){var paths=this.pendingTextPaths;var ctx=this.ctx;if(paths===undefined){ctx.beginPath();return;}
ctx.save();ctx.beginPath();for(var i=0;i<paths.length;i++){var path=paths[i];ctx.setTransform.apply(ctx,path.transform);ctx.translate(path.x,path.y);path.addToPath(ctx,path.fontSize);}
ctx.restore();ctx.clip();ctx.beginPath();delete this.pendingTextPaths;},setCharSpacing:function CanvasGraphics_setCharSpacing(spacing){this.current.charSpacing=spacing;},setWordSpacing:function CanvasGraphics_setWordSpacing(spacing){this.current.wordSpacing=spacing;},setHScale:function CanvasGraphics_setHScale(scale){this.current.textHScale=scale / 100;},setLeading:function CanvasGraphics_setLeading(leading){this.current.leading=-leading;},setFont:function CanvasGraphics_setFont(fontRefName,size){var fontObj=this.commonObjs.get(fontRefName);var current=this.current;if(!fontObj){error('Can\'t find font for '+fontRefName);}
current.fontMatrix=fontObj.fontMatrix?fontObj.fontMatrix:FONT_IDENTITY_MATRIX;if(current.fontMatrix[0]===0||current.fontMatrix[3]===0){warn('Invalid font matrix for font '+fontRefName);}
if(size<0){size=-size;current.fontDirection=-1;}else{current.fontDirection=1;}
this.current.font=fontObj;this.current.fontSize=size;if(fontObj.isType3Font){return;}
var name=fontObj.loadedName||'sans-serif';var bold=fontObj.black?'900':fontObj.bold?'bold':'normal';var italic=fontObj.italic?'italic':'normal';var typeface='"'+name+'", '+fontObj.fallbackName;var browserFontSize=size<MIN_FONT_SIZE?MIN_FONT_SIZE:size>MAX_FONT_SIZE?MAX_FONT_SIZE:size;this.current.fontSizeScale=size / browserFontSize;var rule=italic+' '+bold+' '+browserFontSize+'px '+typeface;this.ctx.font=rule;},setTextRenderingMode:function CanvasGraphics_setTextRenderingMode(mode){this.current.textRenderingMode=mode;},setTextRise:function CanvasGraphics_setTextRise(rise){this.current.textRise=rise;},moveText:function CanvasGraphics_moveText(x,y){this.current.x=this.current.lineX+=x;this.current.y=this.current.lineY+=y;},setLeadingMoveText:function CanvasGraphics_setLeadingMoveText(x,y){this.setLeading(-y);this.moveText(x,y);},setTextMatrix:function CanvasGraphics_setTextMatrix(a,b,c,d,e,f){this.current.textMatrix=[a,b,c,d,e,f];this.current.textMatrixScale=Math.sqrt(a*a+b*b);this.current.x=this.current.lineX=0;this.current.y=this.current.lineY=0;},nextLine:function CanvasGraphics_nextLine(){this.moveText(0,this.current.leading);},paintChar:function CanvasGraphics_paintChar(character,x,y){var ctx=this.ctx;var current=this.current;var font=current.font;var textRenderingMode=current.textRenderingMode;var fontSize=current.fontSize / current.fontSizeScale;var fillStrokeMode=textRenderingMode&TextRenderingMode.FILL_STROKE_MASK;var isAddToPathSet=!!(textRenderingMode&TextRenderingMode.ADD_TO_PATH_FLAG);var addToPath;if(font.disableFontFace||isAddToPathSet){addToPath=font.getPathGenerator(this.commonObjs,character);}
if(font.disableFontFace){ctx.save();ctx.translate(x,y);ctx.beginPath();addToPath(ctx,fontSize);if(fillStrokeMode===TextRenderingMode.FILL||fillStrokeMode===TextRenderingMode.FILL_STROKE){ctx.fill();}
if(fillStrokeMode===TextRenderingMode.STROKE||fillStrokeMode===TextRenderingMode.FILL_STROKE){ctx.stroke();}
ctx.restore();}else{if(fillStrokeMode===TextRenderingMode.FILL||fillStrokeMode===TextRenderingMode.FILL_STROKE){ctx.fillText(character,x,y);}
if(fillStrokeMode===TextRenderingMode.STROKE||fillStrokeMode===TextRenderingMode.FILL_STROKE){ctx.strokeText(character,x,y);}}
if(isAddToPathSet){var paths=this.pendingTextPaths||(this.pendingTextPaths=[]);paths.push({transform:ctx.mozCurrentTransform,x:x,y:y,fontSize:fontSize,addToPath:addToPath});}},get isFontSubpixelAAEnabled(){var ctx=document.createElement('canvas').getContext('2d');ctx.scale(1.5,1);ctx.fillText('I',0,10);var data=ctx.getImageData(0,0,10,10).data;var enabled=false;for(var i=3;i<data.length;i+=4){if(data[i]>0&&data[i]<255){enabled=true;break;}}
return shadow(this,'isFontSubpixelAAEnabled',enabled);},showText:function CanvasGraphics_showText(glyphs){var current=this.current;var font=current.font;if(font.isType3Font){return this.showType3Text(glyphs);}
var fontSize=current.fontSize;if(fontSize===0){return;}
var ctx=this.ctx;var fontSizeScale=current.fontSizeScale;var charSpacing=current.charSpacing;var wordSpacing=current.wordSpacing;var fontDirection=current.fontDirection;var textHScale=current.textHScale*fontDirection;var glyphsLength=glyphs.length;var vertical=font.vertical;var spacingDir=vertical?1:-1;var defaultVMetrics=font.defaultVMetrics;var widthAdvanceScale=fontSize*current.fontMatrix[0];var simpleFillText=current.textRenderingMode===TextRenderingMode.FILL&&!font.disableFontFace;ctx.save();ctx.transform.apply(ctx,current.textMatrix);ctx.translate(current.x,current.y+current.textRise);if(current.patternFill){ctx.fillStyle=current.fillColor.getPattern(ctx,this);}
if(fontDirection>0){ctx.scale(textHScale,-1);}else{ctx.scale(textHScale,1);}
var lineWidth=current.lineWidth;var scale=current.textMatrixScale;if(scale===0||lineWidth===0){var fillStrokeMode=current.textRenderingMode&TextRenderingMode.FILL_STROKE_MASK;if(fillStrokeMode===TextRenderingMode.STROKE||fillStrokeMode===TextRenderingMode.FILL_STROKE){this.cachedGetSinglePixelWidth=null;lineWidth=this.getSinglePixelWidth()*MIN_WIDTH_FACTOR;}}else{lineWidth /=scale;}
if(fontSizeScale!==1.0){ctx.scale(fontSizeScale,fontSizeScale);lineWidth /=fontSizeScale;}
ctx.lineWidth=lineWidth;var x=0,i;for(i=0;i<glyphsLength;++i){var glyph=glyphs[i];if(isNum(glyph)){x+=spacingDir*glyph*fontSize / 1000;continue;}
var restoreNeeded=false;var spacing=(glyph.isSpace?wordSpacing:0)+charSpacing;var character=glyph.fontChar;var accent=glyph.accent;var scaledX,scaledY,scaledAccentX,scaledAccentY;var width=glyph.width;if(vertical){var vmetric,vx,vy;vmetric=glyph.vmetric||defaultVMetrics;vx=glyph.vmetric?vmetric[1]:width*0.5;vx=-vx*widthAdvanceScale;vy=vmetric[2]*widthAdvanceScale;width=vmetric?-vmetric[0]:width;scaledX=vx / fontSizeScale;scaledY=(x+vy)/ fontSizeScale;}else{scaledX=x / fontSizeScale;scaledY=0;}
if(font.remeasure&&width>0){var measuredWidth=ctx.measureText(character).width*1000 / fontSize*fontSizeScale;if(width<measuredWidth&&this.isFontSubpixelAAEnabled){var characterScaleX=width / measuredWidth;restoreNeeded=true;ctx.save();ctx.scale(characterScaleX,1);scaledX /=characterScaleX;}else if(width!==measuredWidth){scaledX+=(width-measuredWidth)/ 2000*fontSize / fontSizeScale;}}
if(glyph.isInFont||font.missingFile){if(simpleFillText&&!accent){ctx.fillText(character,scaledX,scaledY);}else{this.paintChar(character,scaledX,scaledY);if(accent){scaledAccentX=scaledX+accent.offset.x / fontSizeScale;scaledAccentY=scaledY-accent.offset.y / fontSizeScale;this.paintChar(accent.fontChar,scaledAccentX,scaledAccentY);}}}
var charWidth=width*widthAdvanceScale+spacing*fontDirection;x+=charWidth;if(restoreNeeded){ctx.restore();}}
if(vertical){current.y-=x*textHScale;}else{current.x+=x*textHScale;}
ctx.restore();},showType3Text:function CanvasGraphics_showType3Text(glyphs){var ctx=this.ctx;var current=this.current;var font=current.font;var fontSize=current.fontSize;var fontDirection=current.fontDirection;var spacingDir=font.vertical?1:-1;var charSpacing=current.charSpacing;var wordSpacing=current.wordSpacing;var textHScale=current.textHScale*fontDirection;var fontMatrix=current.fontMatrix||FONT_IDENTITY_MATRIX;var glyphsLength=glyphs.length;var isTextInvisible=current.textRenderingMode===TextRenderingMode.INVISIBLE;var i,glyph,width,spacingLength;if(isTextInvisible||fontSize===0){return;}
this.cachedGetSinglePixelWidth=null;ctx.save();ctx.transform.apply(ctx,current.textMatrix);ctx.translate(current.x,current.y);ctx.scale(textHScale,fontDirection);for(i=0;i<glyphsLength;++i){glyph=glyphs[i];if(isNum(glyph)){spacingLength=spacingDir*glyph*fontSize / 1000;this.ctx.translate(spacingLength,0);current.x+=spacingLength*textHScale;continue;}
var spacing=(glyph.isSpace?wordSpacing:0)+charSpacing;var operatorList=font.charProcOperatorList[glyph.operatorListId];if(!operatorList){warn('Type3 character \"'+glyph.operatorListId+'\" is not available');continue;}
this.processingType3=glyph;this.save();ctx.scale(fontSize,fontSize);ctx.transform.apply(ctx,fontMatrix);this.executeOperatorList(operatorList);this.restore();var transformed=Util.applyTransform([glyph.width,0],fontMatrix);width=transformed[0]*fontSize+spacing;ctx.translate(width,0);current.x+=width*textHScale;}
ctx.restore();this.processingType3=null;},setCharWidth:function CanvasGraphics_setCharWidth(xWidth,yWidth){},setCharWidthAndBounds:function CanvasGraphics_setCharWidthAndBounds(xWidth,yWidth,llx,lly,urx,ury){this.ctx.rect(llx,lly,urx-llx,ury-lly);this.clip();this.endPath();},getColorN_Pattern:function CanvasGraphics_getColorN_Pattern(IR){var pattern;if(IR[0]==='TilingPattern'){var color=IR[1];var baseTransform=this.baseTransform||this.ctx.mozCurrentTransform.slice();var self=this;var canvasGraphicsFactory={createCanvasGraphics:function(ctx){return new CanvasGraphics(ctx,self.commonObjs,self.objs);}};pattern=new TilingPattern(IR,color,this.ctx,canvasGraphicsFactory,baseTransform);}else{pattern=getShadingPatternFromIR(IR);}
return pattern;},setStrokeColorN:function CanvasGraphics_setStrokeColorN()
{this.current.strokeColor=this.getColorN_Pattern(arguments);},setFillColorN:function CanvasGraphics_setFillColorN()
{this.current.fillColor=this.getColorN_Pattern(arguments);this.current.patternFill=true;},setStrokeRGBColor:function CanvasGraphics_setStrokeRGBColor(r,g,b){var color=Util.makeCssRgb(r,g,b);this.ctx.strokeStyle=color;this.current.strokeColor=color;},setFillRGBColor:function CanvasGraphics_setFillRGBColor(r,g,b){var color=Util.makeCssRgb(r,g,b);this.ctx.fillStyle=color;this.current.fillColor=color;this.current.patternFill=false;},shadingFill:function CanvasGraphics_shadingFill(patternIR){var ctx=this.ctx;this.save();var pattern=getShadingPatternFromIR(patternIR);ctx.fillStyle=pattern.getPattern(ctx,this,true);var inv=ctx.mozCurrentTransformInverse;if(inv){var canvas=ctx.canvas;var width=canvas.width;var height=canvas.height;var bl=Util.applyTransform([0,0],inv);var br=Util.applyTransform([0,height],inv);var ul=Util.applyTransform([width,0],inv);var ur=Util.applyTransform([width,height],inv);var x0=Math.min(bl[0],br[0],ul[0],ur[0]);var y0=Math.min(bl[1],br[1],ul[1],ur[1]);var x1=Math.max(bl[0],br[0],ul[0],ur[0]);var y1=Math.max(bl[1],br[1],ul[1],ur[1]);this.ctx.fillRect(x0,y0,x1-x0,y1-y0);}else{this.ctx.fillRect(-1e10,-1e10,2e10,2e10);}
this.restore();},beginInlineImage:function CanvasGraphics_beginInlineImage(){error('Should not call beginInlineImage');},beginImageData:function CanvasGraphics_beginImageData(){error('Should not call beginImageData');},paintFormXObjectBegin:function CanvasGraphics_paintFormXObjectBegin(matrix,bbox){this.save();this.baseTransformStack.push(this.baseTransform);if(isArray(matrix)&&matrix.length===6){this.transform.apply(this,matrix);}
this.baseTransform=this.ctx.mozCurrentTransform;if(isArray(bbox)&&bbox.length===4){var width=bbox[2]-bbox[0];var height=bbox[3]-bbox[1];this.ctx.rect(bbox[0],bbox[1],width,height);this.clip();this.endPath();}},paintFormXObjectEnd:function CanvasGraphics_paintFormXObjectEnd(){this.restore();this.baseTransform=this.baseTransformStack.pop();},beginGroup:function CanvasGraphics_beginGroup(group){this.save();var currentCtx=this.ctx;if(!group.isolated){info('TODO: Support non-isolated groups.');}
if(group.knockout){warn('Knockout groups not supported.');}
var currentTransform=currentCtx.mozCurrentTransform;if(group.matrix){currentCtx.transform.apply(currentCtx,group.matrix);}
assert(group.bbox,'Bounding box is required.');var bounds=Util.getAxialAlignedBoundingBox(group.bbox,currentCtx.mozCurrentTransform);var canvasBounds=[0,0,currentCtx.canvas.width,currentCtx.canvas.height];bounds=Util.intersect(bounds,canvasBounds)||[0,0,0,0];var offsetX=Math.floor(bounds[0]);var offsetY=Math.floor(bounds[1]);var drawnWidth=Math.max(Math.ceil(bounds[2])-offsetX,1);var drawnHeight=Math.max(Math.ceil(bounds[3])-offsetY,1);var scaleX=1,scaleY=1;if(drawnWidth>MAX_GROUP_SIZE){scaleX=drawnWidth / MAX_GROUP_SIZE;drawnWidth=MAX_GROUP_SIZE;}
if(drawnHeight>MAX_GROUP_SIZE){scaleY=drawnHeight / MAX_GROUP_SIZE;drawnHeight=MAX_GROUP_SIZE;}
var cacheId='groupAt'+this.groupLevel;if(group.smask){cacheId+='_smask_'+this.smaskCounter++%2;}
var scratchCanvas=this.cachedCanvases.getCanvas(cacheId,drawnWidth,drawnHeight,true);var groupCtx=scratchCanvas.context;groupCtx.scale(1 / scaleX,1 / scaleY);groupCtx.translate(-offsetX,-offsetY);groupCtx.transform.apply(groupCtx,currentTransform);if(group.smask){this.smaskStack.push({canvas:scratchCanvas.canvas,context:groupCtx,offsetX:offsetX,offsetY:offsetY,scaleX:scaleX,scaleY:scaleY,subtype:group.smask.subtype,backdrop:group.smask.backdrop,transferMap:group.smask.transferMap||null,startTransformInverse:null});}else
{currentCtx.setTransform(1,0,0,1,0,0);currentCtx.translate(offsetX,offsetY);currentCtx.scale(scaleX,scaleY);}
copyCtxState(currentCtx,groupCtx);this.ctx=groupCtx;this.setGState([['BM','Normal'],['ca',1],['CA',1]]);this.groupStack.push(currentCtx);this.groupLevel++;this.current.activeSMask=null;},endGroup:function CanvasGraphics_endGroup(group){this.groupLevel--;var groupCtx=this.ctx;this.ctx=this.groupStack.pop();if(this.ctx.imageSmoothingEnabled!==undefined){this.ctx.imageSmoothingEnabled=false;}else{this.ctx.mozImageSmoothingEnabled=false;}
if(group.smask){this.tempSMask=this.smaskStack.pop();}else{this.ctx.drawImage(groupCtx.canvas,0,0);}
this.restore();},beginAnnotations:function CanvasGraphics_beginAnnotations(){this.save();this.current=new CanvasExtraState();if(this.baseTransform){this.ctx.setTransform.apply(this.ctx,this.baseTransform);}},endAnnotations:function CanvasGraphics_endAnnotations(){this.restore();},beginAnnotation:function CanvasGraphics_beginAnnotation(rect,transform,matrix){this.save();if(isArray(rect)&&rect.length===4){var width=rect[2]-rect[0];var height=rect[3]-rect[1];this.ctx.rect(rect[0],rect[1],width,height);this.clip();this.endPath();}
this.transform.apply(this,transform);this.transform.apply(this,matrix);},endAnnotation:function CanvasGraphics_endAnnotation(){this.restore();},paintJpegXObject:function CanvasGraphics_paintJpegXObject(objId,w,h){var domImage=this.objs.get(objId);if(!domImage){warn('Dependent image isn\'t ready yet');return;}
this.save();var ctx=this.ctx;ctx.scale(1 / w,-1 / h);ctx.drawImage(domImage,0,0,domImage.width,domImage.height,0,-h,w,h);if(this.imageLayer){var currentTransform=ctx.mozCurrentTransformInverse;var position=this.getCanvasPosition(0,0);this.imageLayer.appendImage({objId:objId,left:position[0],top:position[1],width:w / currentTransform[0],height:h / currentTransform[3]});}
this.restore();},paintImageMaskXObject:function CanvasGraphics_paintImageMaskXObject(img){var ctx=this.ctx;var width=img.width,height=img.height;var fillColor=this.current.fillColor;var isPatternFill=this.current.patternFill;var glyph=this.processingType3;if(COMPILE_TYPE3_GLYPHS&&glyph&&glyph.compiled===undefined){if(width<=MAX_SIZE_TO_COMPILE&&height<=MAX_SIZE_TO_COMPILE){glyph.compiled=compileType3Glyph({data:img.data,width:width,height:height});}else{glyph.compiled=null;}}
if(glyph&&glyph.compiled){glyph.compiled(ctx);return;}
var maskCanvas=this.cachedCanvases.getCanvas('maskCanvas',width,height);var maskCtx=maskCanvas.context;maskCtx.save();putBinaryImageMask(maskCtx,img);maskCtx.globalCompositeOperation='source-in';maskCtx.fillStyle=isPatternFill?fillColor.getPattern(maskCtx,this):fillColor;maskCtx.fillRect(0,0,width,height);maskCtx.restore();this.paintInlineImageXObject(maskCanvas.canvas);},paintImageMaskXObjectRepeat:function CanvasGraphics_paintImageMaskXObjectRepeat(imgData,scaleX,scaleY,positions){var width=imgData.width;var height=imgData.height;var fillColor=this.current.fillColor;var isPatternFill=this.current.patternFill;var maskCanvas=this.cachedCanvases.getCanvas('maskCanvas',width,height);var maskCtx=maskCanvas.context;maskCtx.save();putBinaryImageMask(maskCtx,imgData);maskCtx.globalCompositeOperation='source-in';maskCtx.fillStyle=isPatternFill?fillColor.getPattern(maskCtx,this):fillColor;maskCtx.fillRect(0,0,width,height);maskCtx.restore();var ctx=this.ctx;for(var i=0,ii=positions.length;i<ii;i+=2){ctx.save();ctx.transform(scaleX,0,0,scaleY,positions[i],positions[i+1]);ctx.scale(1,-1);ctx.drawImage(maskCanvas.canvas,0,0,width,height,0,-1,1,1);ctx.restore();}},paintImageMaskXObjectGroup:function CanvasGraphics_paintImageMaskXObjectGroup(images){var ctx=this.ctx;var fillColor=this.current.fillColor;var isPatternFill=this.current.patternFill;for(var i=0,ii=images.length;i<ii;i++){var image=images[i];var width=image.width,height=image.height;var maskCanvas=this.cachedCanvases.getCanvas('maskCanvas',width,height);var maskCtx=maskCanvas.context;maskCtx.save();putBinaryImageMask(maskCtx,image);maskCtx.globalCompositeOperation='source-in';maskCtx.fillStyle=isPatternFill?fillColor.getPattern(maskCtx,this):fillColor;maskCtx.fillRect(0,0,width,height);maskCtx.restore();ctx.save();ctx.transform.apply(ctx,image.transform);ctx.scale(1,-1);ctx.drawImage(maskCanvas.canvas,0,0,width,height,0,-1,1,1);ctx.restore();}},paintImageXObject:function CanvasGraphics_paintImageXObject(objId){var imgData=this.objs.get(objId);if(!imgData){warn('Dependent image isn\'t ready yet');return;}
this.paintInlineImageXObject(imgData);},paintImageXObjectRepeat:function CanvasGraphics_paintImageXObjectRepeat(objId,scaleX,scaleY,positions){var imgData=this.objs.get(objId);if(!imgData){warn('Dependent image isn\'t ready yet');return;}
var width=imgData.width;var height=imgData.height;var map=[];for(var i=0,ii=positions.length;i<ii;i+=2){map.push({transform:[scaleX,0,0,scaleY,positions[i],positions[i+1]],x:0,y:0,w:width,h:height});}
this.paintInlineImageXObjectGroup(imgData,map);},paintInlineImageXObject:function CanvasGraphics_paintInlineImageXObject(imgData){var width=imgData.width;var height=imgData.height;var ctx=this.ctx;this.save();ctx.scale(1 / width,-1 / height);var currentTransform=ctx.mozCurrentTransformInverse;var a=currentTransform[0],b=currentTransform[1];var widthScale=Math.max(Math.sqrt(a*a+b*b),1);var c=currentTransform[2],d=currentTransform[3];var heightScale=Math.max(Math.sqrt(c*c+d*d),1);var imgToPaint,tmpCanvas;if(imgData instanceof HTMLElement||!imgData.data){imgToPaint=imgData;}else{tmpCanvas=this.cachedCanvases.getCanvas('inlineImage',width,height);var tmpCtx=tmpCanvas.context;putBinaryImageData(tmpCtx,imgData);imgToPaint=tmpCanvas.canvas;}
var paintWidth=width,paintHeight=height;var tmpCanvasId='prescale1';while(widthScale>2&&paintWidth>1||heightScale>2&&paintHeight>1){var newWidth=paintWidth,newHeight=paintHeight;if(widthScale>2&&paintWidth>1){newWidth=Math.ceil(paintWidth / 2);widthScale /=paintWidth / newWidth;}
if(heightScale>2&&paintHeight>1){newHeight=Math.ceil(paintHeight / 2);heightScale /=paintHeight / newHeight;}
tmpCanvas=this.cachedCanvases.getCanvas(tmpCanvasId,newWidth,newHeight);tmpCtx=tmpCanvas.context;tmpCtx.clearRect(0,0,newWidth,newHeight);tmpCtx.drawImage(imgToPaint,0,0,paintWidth,paintHeight,0,0,newWidth,newHeight);imgToPaint=tmpCanvas.canvas;paintWidth=newWidth;paintHeight=newHeight;tmpCanvasId=tmpCanvasId==='prescale1'?'prescale2':'prescale1';}
ctx.drawImage(imgToPaint,0,0,paintWidth,paintHeight,0,-height,width,height);if(this.imageLayer){var position=this.getCanvasPosition(0,-height);this.imageLayer.appendImage({imgData:imgData,left:position[0],top:position[1],width:width / currentTransform[0],height:height / currentTransform[3]});}
this.restore();},paintInlineImageXObjectGroup:function CanvasGraphics_paintInlineImageXObjectGroup(imgData,map){var ctx=this.ctx;var w=imgData.width;var h=imgData.height;var tmpCanvas=this.cachedCanvases.getCanvas('inlineImage',w,h);var tmpCtx=tmpCanvas.context;putBinaryImageData(tmpCtx,imgData);for(var i=0,ii=map.length;i<ii;i++){var entry=map[i];ctx.save();ctx.transform.apply(ctx,entry.transform);ctx.scale(1,-1);ctx.drawImage(tmpCanvas.canvas,entry.x,entry.y,entry.w,entry.h,0,-1,1,1);if(this.imageLayer){var position=this.getCanvasPosition(entry.x,entry.y);this.imageLayer.appendImage({imgData:imgData,left:position[0],top:position[1],width:w,height:h});}
ctx.restore();}},paintSolidColorImageMask:function CanvasGraphics_paintSolidColorImageMask(){this.ctx.fillRect(0,0,1,1);},paintXObject:function CanvasGraphics_paintXObject(){warn('Unsupported \'paintXObject\' command.');},markPoint:function CanvasGraphics_markPoint(tag){},markPointProps:function CanvasGraphics_markPointProps(tag,properties){},beginMarkedContent:function CanvasGraphics_beginMarkedContent(tag){},beginMarkedContentProps:function CanvasGraphics_beginMarkedContentProps(tag,properties){},endMarkedContent:function CanvasGraphics_endMarkedContent(){},beginCompat:function CanvasGraphics_beginCompat(){},endCompat:function CanvasGraphics_endCompat(){},consumePath:function CanvasGraphics_consumePath(){var ctx=this.ctx;if(this.pendingClip){if(this.pendingClip===EO_CLIP){if(ctx.mozFillRule!==undefined){ctx.mozFillRule='evenodd';ctx.clip();ctx.mozFillRule='nonzero';}else{ctx.clip('evenodd');}}else{ctx.clip();}
this.pendingClip=null;}
ctx.beginPath();},getSinglePixelWidth:function CanvasGraphics_getSinglePixelWidth(scale){if(this.cachedGetSinglePixelWidth===null){this.ctx.save();var inverse=this.ctx.mozCurrentTransformInverse;this.ctx.restore();this.cachedGetSinglePixelWidth=Math.sqrt(Math.max(inverse[0]*inverse[0]+inverse[1]*inverse[1],inverse[2]*inverse[2]+inverse[3]*inverse[3]));}
return this.cachedGetSinglePixelWidth;},getCanvasPosition:function CanvasGraphics_getCanvasPosition(x,y){var transform=this.ctx.mozCurrentTransform;return[transform[0]*x+transform[2]*y+transform[4],transform[1]*x+transform[3]*y+transform[5]];}};for(var op in OPS){CanvasGraphics.prototype[OPS[op]]=CanvasGraphics.prototype[op];}
return CanvasGraphics;}();exports.CanvasGraphics=CanvasGraphics;exports.createScratchCanvas=createScratchCanvas;}));(function(root,factory){factory(root.pdfjsDisplayAPI={},root.pdfjsSharedUtil,root.pdfjsDisplayFontLoader,root.pdfjsDisplayCanvas,root.pdfjsDisplayMetadata,root.pdfjsDisplayDOMUtils);}(this,function(exports,sharedUtil,displayFontLoader,displayCanvas,displayMetadata,displayDOMUtils,amdRequire){var InvalidPDFException=sharedUtil.InvalidPDFException;var MessageHandler=sharedUtil.MessageHandler;var MissingPDFException=sharedUtil.MissingPDFException;var PageViewport=sharedUtil.PageViewport;var PasswordResponses=sharedUtil.PasswordResponses;var PasswordException=sharedUtil.PasswordException;var StatTimer=sharedUtil.StatTimer;var UnexpectedResponseException=sharedUtil.UnexpectedResponseException;var UnknownErrorException=sharedUtil.UnknownErrorException;var Util=sharedUtil.Util;var createPromiseCapability=sharedUtil.createPromiseCapability;var error=sharedUtil.error;var deprecated=sharedUtil.deprecated;var getVerbosityLevel=sharedUtil.getVerbosityLevel;var info=sharedUtil.info;var isInt=sharedUtil.isInt;var isArray=sharedUtil.isArray;var isArrayBuffer=sharedUtil.isArrayBuffer;var isSameOrigin=sharedUtil.isSameOrigin;var loadJpegStream=sharedUtil.loadJpegStream;var stringToBytes=sharedUtil.stringToBytes;var globalScope=sharedUtil.globalScope;var warn=sharedUtil.warn;var FontFaceObject=displayFontLoader.FontFaceObject;var FontLoader=displayFontLoader.FontLoader;var CanvasGraphics=displayCanvas.CanvasGraphics;var createScratchCanvas=displayCanvas.createScratchCanvas;var Metadata=displayMetadata.Metadata;var getDefaultSetting=displayDOMUtils.getDefaultSetting;var DEFAULT_RANGE_CHUNK_SIZE=65536;var isWorkerDisabled=false;var workerSrc;var isPostMessageTransfersDisabled=false;var fakeWorkerFilesLoader=null;var useRequireEnsure=false;if(typeof window==='undefined'){isWorkerDisabled=true;if(typeof require.ensure==='undefined'){require.ensure=require('node-ensure');}
useRequireEnsure=true;}
if(typeof __webpack_require__!=='undefined'){useRequireEnsure=true;}
if(typeof requirejs!=='undefined'&&requirejs.toUrl){workerSrc=requirejs.toUrl('pdfjs-dist/build/pdf.worker.js');}
var dynamicLoaderSupported=typeof requirejs!=='undefined'&&requirejs.load;fakeWorkerFilesLoader=useRequireEnsure?function(callback){require.ensure([],function(){var worker=require('./pdf.worker.js');callback(worker.WorkerMessageHandler);});}:dynamicLoaderSupported?function(callback){requirejs(['pdfjs-dist/build/pdf.worker'],function(worker){callback(worker.WorkerMessageHandler);});}:null;function getDocument(src,pdfDataRangeTransport,passwordCallback,progressCallback){var task=new PDFDocumentLoadingTask();if(arguments.length>1){deprecated('getDocument is called with pdfDataRangeTransport, '+'passwordCallback or progressCallback argument');}
if(pdfDataRangeTransport){if(!(pdfDataRangeTransport instanceof PDFDataRangeTransport)){pdfDataRangeTransport=Object.create(pdfDataRangeTransport);pdfDataRangeTransport.length=src.length;pdfDataRangeTransport.initialData=src.initialData;if(!pdfDataRangeTransport.abort){pdfDataRangeTransport.abort=function(){};}}
src=Object.create(src);src.range=pdfDataRangeTransport;}
task.onPassword=passwordCallback||null;task.onProgress=progressCallback||null;var source;if(typeof src==='string'){source={url:src};}else if(isArrayBuffer(src)){source={data:src};}else if(src instanceof PDFDataRangeTransport){source={range:src};}else{if(typeof src!=='object'){error('Invalid parameter in getDocument, need either Uint8Array, '+'string or a parameter object');}
if(!src.url&&!src.data&&!src.range){error('Invalid parameter object: need either .data, .range or .url');}
source=src;}
var params={};var rangeTransport=null;var worker=null;for(var key in source){if(key==='url'&&typeof window!=='undefined'){params[key]=new URL(source[key],window.location).href;continue;}else if(key==='range'){rangeTransport=source[key];continue;}else if(key==='worker'){worker=source[key];continue;}else if(key==='data'&&!(source[key]instanceof Uint8Array)){var pdfBytes=source[key];if(typeof pdfBytes==='string'){params[key]=stringToBytes(pdfBytes);}else if(typeof pdfBytes==='object'&&pdfBytes!==null&&!isNaN(pdfBytes.length)){params[key]=new Uint8Array(pdfBytes);}else if(isArrayBuffer(pdfBytes)){params[key]=new Uint8Array(pdfBytes);}else{error('Invalid PDF binary data: either typed array, string or '+'array-like object is expected in the data property.');}
continue;}
params[key]=source[key];}
params.rangeChunkSize=params.rangeChunkSize||DEFAULT_RANGE_CHUNK_SIZE;if(!worker){worker=new PDFWorker();task._worker=worker;}
var docId=task.docId;worker.promise.then(function(){if(task.destroyed){throw new Error('Loading aborted');}
return _fetchDocument(worker,params,rangeTransport,docId).then(function(workerId){if(task.destroyed){throw new Error('Loading aborted');}
var messageHandler=new MessageHandler(docId,workerId,worker.port);var transport=new WorkerTransport(messageHandler,task,rangeTransport);task._transport=transport;messageHandler.send('Ready',null);});}).catch(task._capability.reject);return task;}
function _fetchDocument(worker,source,pdfDataRangeTransport,docId){if(worker.destroyed){return Promise.reject(new Error('Worker was destroyed'));}
source.disableAutoFetch=getDefaultSetting('disableAutoFetch');source.disableStream=getDefaultSetting('disableStream');source.chunkedViewerLoading=!!pdfDataRangeTransport;if(pdfDataRangeTransport){source.length=pdfDataRangeTransport.length;source.initialData=pdfDataRangeTransport.initialData;}
return worker.messageHandler.sendWithPromise('GetDocRequest',{docId:docId,source:source,disableRange:getDefaultSetting('disableRange'),maxImageSize:getDefaultSetting('maxImageSize'),cMapUrl:getDefaultSetting('cMapUrl'),cMapPacked:getDefaultSetting('cMapPacked'),disableFontFace:getDefaultSetting('disableFontFace'),disableCreateObjectURL:getDefaultSetting('disableCreateObjectURL'),postMessageTransfers:getDefaultSetting('postMessageTransfers')&&!isPostMessageTransfersDisabled,docBaseUrl:source.docBaseUrl}).then(function(workerId){if(worker.destroyed){throw new Error('Worker was destroyed');}
return workerId;});}
var PDFDocumentLoadingTask=function PDFDocumentLoadingTaskClosure(){var nextDocumentId=0;function PDFDocumentLoadingTask(){this._capability=createPromiseCapability();this._transport=null;this._worker=null;this.docId='d'+nextDocumentId++;this.destroyed=false;this.onPassword=null;this.onProgress=null;this.onUnsupportedFeature=null;}
PDFDocumentLoadingTask.prototype={get promise(){return this._capability.promise;},destroy:function(){this.destroyed=true;var transportDestroyed=!this._transport?Promise.resolve():this._transport.destroy();return transportDestroyed.then(function(){this._transport=null;if(this._worker){this._worker.destroy();this._worker=null;}}.bind(this));},then:function PDFDocumentLoadingTask_then(onFulfilled,onRejected){return this.promise.then.apply(this.promise,arguments);}};return PDFDocumentLoadingTask;}();var PDFDataRangeTransport=function pdfDataRangeTransportClosure(){function PDFDataRangeTransport(length,initialData){this.length=length;this.initialData=initialData;this._rangeListeners=[];this._progressListeners=[];this._progressiveReadListeners=[];this._readyCapability=createPromiseCapability();}
PDFDataRangeTransport.prototype={addRangeListener:function PDFDataRangeTransport_addRangeListener(listener){this._rangeListeners.push(listener);},addProgressListener:function PDFDataRangeTransport_addProgressListener(listener){this._progressListeners.push(listener);},addProgressiveReadListener:function PDFDataRangeTransport_addProgressiveReadListener(listener){this._progressiveReadListeners.push(listener);},onDataRange:function PDFDataRangeTransport_onDataRange(begin,chunk){var listeners=this._rangeListeners;for(var i=0,n=listeners.length;i<n;++i){listeners[i](begin,chunk);}},onDataProgress:function PDFDataRangeTransport_onDataProgress(loaded){this._readyCapability.promise.then(function(){var listeners=this._progressListeners;for(var i=0,n=listeners.length;i<n;++i){listeners[i](loaded);}}.bind(this));},onDataProgressiveRead:function PDFDataRangeTransport_onDataProgress(chunk){this._readyCapability.promise.then(function(){var listeners=this._progressiveReadListeners;for(var i=0,n=listeners.length;i<n;++i){listeners[i](chunk);}}.bind(this));},transportReady:function PDFDataRangeTransport_transportReady(){this._readyCapability.resolve();},requestDataRange:function PDFDataRangeTransport_requestDataRange(begin,end){throw new Error('Abstract method PDFDataRangeTransport.requestDataRange');},abort:function PDFDataRangeTransport_abort(){}};return PDFDataRangeTransport;}();var PDFDocumentProxy=function PDFDocumentProxyClosure(){function PDFDocumentProxy(pdfInfo,transport,loadingTask){this.pdfInfo=pdfInfo;this.transport=transport;this.loadingTask=loadingTask;}
PDFDocumentProxy.prototype={get numPages(){return this.pdfInfo.numPages;},get fingerprint(){return this.pdfInfo.fingerprint;},getPage:function PDFDocumentProxy_getPage(pageNumber){return this.transport.getPage(pageNumber);},getPageIndex:function PDFDocumentProxy_getPageIndex(ref){return this.transport.getPageIndex(ref);},getDestinations:function PDFDocumentProxy_getDestinations(){return this.transport.getDestinations();},getDestination:function PDFDocumentProxy_getDestination(id){return this.transport.getDestination(id);},getPageLabels:function PDFDocumentProxy_getPageLabels(){return this.transport.getPageLabels();},getAttachments:function PDFDocumentProxy_getAttachments(){return this.transport.getAttachments();},getJavaScript:function PDFDocumentProxy_getJavaScript(){return this.transport.getJavaScript();},getOutline:function PDFDocumentProxy_getOutline(){return this.transport.getOutline();},getMetadata:function PDFDocumentProxy_getMetadata(){return this.transport.getMetadata();},getData:function PDFDocumentProxy_getData(){return this.transport.getData();},getDownloadInfo:function PDFDocumentProxy_getDownloadInfo(){return this.transport.downloadInfoCapability.promise;},getStats:function PDFDocumentProxy_getStats(){return this.transport.getStats();},cleanup:function PDFDocumentProxy_cleanup(){this.transport.startCleanup();},destroy:function PDFDocumentProxy_destroy(){return this.loadingTask.destroy();}};return PDFDocumentProxy;}();var PDFPageProxy=function PDFPageProxyClosure(){function PDFPageProxy(pageIndex,pageInfo,transport){this.pageIndex=pageIndex;this.pageInfo=pageInfo;this.transport=transport;this.stats=new StatTimer();this.stats.enabled=getDefaultSetting('enableStats');this.commonObjs=transport.commonObjs;this.objs=new PDFObjects();this.cleanupAfterRender=false;this.pendingCleanup=false;this.intentStates=Object.create(null);this.destroyed=false;}
PDFPageProxy.prototype={get pageNumber(){return this.pageIndex+1;},get rotate(){return this.pageInfo.rotate;},get ref(){return this.pageInfo.ref;},get userUnit(){return this.pageInfo.userUnit;},get view(){return this.pageInfo.view;},getViewport:function PDFPageProxy_getViewport(scale,rotate){if(arguments.length<2){rotate=this.rotate;}
return new PageViewport(this.view,scale,rotate,0,0);},getAnnotations:function PDFPageProxy_getAnnotations(params){var intent=params&&params.intent||null;if(!this.annotationsPromise||this.annotationsIntent!==intent){this.annotationsPromise=this.transport.getAnnotations(this.pageIndex,intent);this.annotationsIntent=intent;}
return this.annotationsPromise;},render:function PDFPageProxy_render(params){var stats=this.stats;stats.time('Overall');this.pendingCleanup=false;var renderingIntent=params.intent==='print'?'print':'display';var renderInteractiveForms=params.renderInteractiveForms===true?true:false;if(!this.intentStates[renderingIntent]){this.intentStates[renderingIntent]=Object.create(null);}
var intentState=this.intentStates[renderingIntent];if(!intentState.displayReadyCapability){intentState.receivingOperatorList=true;intentState.displayReadyCapability=createPromiseCapability();intentState.operatorList={fnArray:[],argsArray:[],lastChunk:false};this.stats.time('Page Request');this.transport.messageHandler.send('RenderPageRequest',{pageIndex:this.pageNumber-1,intent:renderingIntent,renderInteractiveForms:renderInteractiveForms});}
var internalRenderTask=new InternalRenderTask(complete,params,this.objs,this.commonObjs,intentState.operatorList,this.pageNumber);internalRenderTask.useRequestAnimationFrame=renderingIntent!=='print';if(!intentState.renderTasks){intentState.renderTasks=[];}
intentState.renderTasks.push(internalRenderTask);var renderTask=internalRenderTask.task;if(params.continueCallback){deprecated('render is used with continueCallback parameter');renderTask.onContinue=params.continueCallback;}
var self=this;intentState.displayReadyCapability.promise.then(function pageDisplayReadyPromise(transparency){if(self.pendingCleanup){complete();return;}
stats.time('Rendering');internalRenderTask.initializeGraphics(transparency);internalRenderTask.operatorListChanged();},function pageDisplayReadPromiseError(reason){complete(reason);});function complete(error){var i=intentState.renderTasks.indexOf(internalRenderTask);if(i>=0){intentState.renderTasks.splice(i,1);}
if(self.cleanupAfterRender){self.pendingCleanup=true;}
self._tryCleanup();if(error){internalRenderTask.capability.reject(error);}else{internalRenderTask.capability.resolve();}
stats.timeEnd('Rendering');stats.timeEnd('Overall');}
return renderTask;},getOperatorList:function PDFPageProxy_getOperatorList(){function operatorListChanged(){if(intentState.operatorList.lastChunk){intentState.opListReadCapability.resolve(intentState.operatorList);var i=intentState.renderTasks.indexOf(opListTask);if(i>=0){intentState.renderTasks.splice(i,1);}}}
var renderingIntent='oplist';if(!this.intentStates[renderingIntent]){this.intentStates[renderingIntent]=Object.create(null);}
var intentState=this.intentStates[renderingIntent];var opListTask;if(!intentState.opListReadCapability){opListTask={};opListTask.operatorListChanged=operatorListChanged;intentState.receivingOperatorList=true;intentState.opListReadCapability=createPromiseCapability();intentState.renderTasks=[];intentState.renderTasks.push(opListTask);intentState.operatorList={fnArray:[],argsArray:[],lastChunk:false};this.transport.messageHandler.send('RenderPageRequest',{pageIndex:this.pageIndex,intent:renderingIntent});}
return intentState.opListReadCapability.promise;},getTextContent:function PDFPageProxy_getTextContent(params){return this.transport.messageHandler.sendWithPromise('GetTextContent',{pageIndex:this.pageNumber-1,normalizeWhitespace:params&&params.normalizeWhitespace===true?true:false,combineTextItems:params&&params.disableCombineTextItems===true?false:true});},_destroy:function PDFPageProxy_destroy(){this.destroyed=true;this.transport.pageCache[this.pageIndex]=null;var waitOn=[];Object.keys(this.intentStates).forEach(function(intent){if(intent==='oplist'){return;}
var intentState=this.intentStates[intent];intentState.renderTasks.forEach(function(renderTask){var renderCompleted=renderTask.capability.promise.catch(function(){});waitOn.push(renderCompleted);renderTask.cancel();});},this);this.objs.clear();this.annotationsPromise=null;this.pendingCleanup=false;return Promise.all(waitOn);},destroy:function(){deprecated('page destroy method, use cleanup() instead');this.cleanup();},cleanup:function PDFPageProxy_cleanup(){this.pendingCleanup=true;this._tryCleanup();},_tryCleanup:function PDFPageProxy_tryCleanup(){if(!this.pendingCleanup||Object.keys(this.intentStates).some(function(intent){var intentState=this.intentStates[intent];return intentState.renderTasks.length!==0||intentState.receivingOperatorList;},this)){return;}
Object.keys(this.intentStates).forEach(function(intent){delete this.intentStates[intent];},this);this.objs.clear();this.annotationsPromise=null;this.pendingCleanup=false;},_startRenderPage:function PDFPageProxy_startRenderPage(transparency,intent){var intentState=this.intentStates[intent];if(intentState.displayReadyCapability){intentState.displayReadyCapability.resolve(transparency);}},_renderPageChunk:function PDFPageProxy_renderPageChunk(operatorListChunk,intent){var intentState=this.intentStates[intent];var i,ii;for(i=0,ii=operatorListChunk.length;i<ii;i++){intentState.operatorList.fnArray.push(operatorListChunk.fnArray[i]);intentState.operatorList.argsArray.push(operatorListChunk.argsArray[i]);}
intentState.operatorList.lastChunk=operatorListChunk.lastChunk;for(i=0;i<intentState.renderTasks.length;i++){intentState.renderTasks[i].operatorListChanged();}
if(operatorListChunk.lastChunk){intentState.receivingOperatorList=false;this._tryCleanup();}}};return PDFPageProxy;}();var PDFWorker=function PDFWorkerClosure(){var nextFakeWorkerId=0;function getWorkerSrc(){if(typeof workerSrc!=='undefined'){return workerSrc;}
if(getDefaultSetting('workerSrc')){return getDefaultSetting('workerSrc');}
if(pdfjsFilePath){return pdfjsFilePath.replace(/\.js$/i,'.worker.js');}
error('No PDFJS.workerSrc specified');}
var fakeWorkerFilesLoadedCapability;function setupFakeWorkerGlobal(){var WorkerMessageHandler;if(fakeWorkerFilesLoadedCapability){return fakeWorkerFilesLoadedCapability.promise;}
fakeWorkerFilesLoadedCapability=createPromiseCapability();var loader=fakeWorkerFilesLoader||function(callback){Util.loadScript(getWorkerSrc(),function(){callback(window.pdfjsDistBuildPdfWorker.WorkerMessageHandler);});};loader(fakeWorkerFilesLoadedCapability.resolve);return fakeWorkerFilesLoadedCapability.promise;}
function FakeWorkerPort(defer){this._listeners=[];this._defer=defer;this._deferred=Promise.resolve(undefined);}
FakeWorkerPort.prototype={postMessage:function(obj,transfers){function cloneValue(value){if(typeof value!=='object'||value===null){return value;}
if(cloned.has(value)){return cloned.get(value);}
var result;var buffer;if((buffer=value.buffer)&&isArrayBuffer(buffer)){var transferable=transfers&&transfers.indexOf(buffer)>=0;if(value===buffer){result=value;}else if(transferable){result=new value.constructor(buffer,value.byteOffset,value.byteLength);}else{result=new value.constructor(value);}
cloned.set(value,result);return result;}
result=isArray(value)?[]:{};cloned.set(value,result);for(var i in value){var desc,p=value;while(!(desc=Object.getOwnPropertyDescriptor(p,i))){p=Object.getPrototypeOf(p);}
if(typeof desc.value==='undefined'||typeof desc.value==='function'){continue;}
result[i]=cloneValue(desc.value);}
return result;}
if(!this._defer){this._listeners.forEach(function(listener){listener.call(this,{data:obj});},this);return;}
var cloned=new WeakMap();var e={data:cloneValue(obj)};this._deferred.then(function(){this._listeners.forEach(function(listener){listener.call(this,e);},this);}.bind(this));},addEventListener:function(name,listener){this._listeners.push(listener);},removeEventListener:function(name,listener){var i=this._listeners.indexOf(listener);this._listeners.splice(i,1);},terminate:function(){this._listeners=[];}};function createCDNWrapper(url){var wrapper='importScripts(\''+url+'\');';return URL.createObjectURL(new Blob([wrapper]));}
function PDFWorker(name){this.name=name;this.destroyed=false;this._readyCapability=createPromiseCapability();this._port=null;this._webWorker=null;this._messageHandler=null;this._initialize();}
PDFWorker.prototype={get promise(){return this._readyCapability.promise;},get port(){return this._port;},get messageHandler(){return this._messageHandler;},_initialize:function PDFWorker_initialize(){if(!isWorkerDisabled&&!getDefaultSetting('disableWorker')&&typeof Worker!=='undefined'){var workerSrc=getWorkerSrc();try{if(!isSameOrigin(window.location.href,workerSrc)){workerSrc=createCDNWrapper(new URL(workerSrc,window.location).href);}
var worker=new Worker(workerSrc);var messageHandler=new MessageHandler('main','worker',worker);var terminateEarly=function(){worker.removeEventListener('error',onWorkerError);messageHandler.destroy();worker.terminate();if(this.destroyed){this._readyCapability.reject(new Error('Worker was destroyed'));}else{this._setupFakeWorker();}}.bind(this);var onWorkerError=function(event){if(!this._webWorker){terminateEarly();}}.bind(this);worker.addEventListener('error',onWorkerError);messageHandler.on('test',function PDFWorker_test(data){worker.removeEventListener('error',onWorkerError);if(this.destroyed){terminateEarly();return;}
var supportTypedArray=data&&data.supportTypedArray;if(supportTypedArray){this._messageHandler=messageHandler;this._port=worker;this._webWorker=worker;if(!data.supportTransfers){isPostMessageTransfersDisabled=true;}
this._readyCapability.resolve();messageHandler.send('configure',{verbosity:getVerbosityLevel()});}else{this._setupFakeWorker();messageHandler.destroy();worker.terminate();}}.bind(this));messageHandler.on('console_log',function(data){console.log.apply(console,data);});messageHandler.on('console_error',function(data){console.error.apply(console,data);});messageHandler.on('ready',function(data){worker.removeEventListener('error',onWorkerError);if(this.destroyed){terminateEarly();return;}
try{sendTest();}catch(e){this._setupFakeWorker();}}.bind(this));var sendTest=function(){var postMessageTransfers=getDefaultSetting('postMessageTransfers')&&!isPostMessageTransfersDisabled;var testObj=new Uint8Array([postMessageTransfers?255:0]);try{messageHandler.send('test',testObj,[testObj.buffer]);}catch(ex){info('Cannot use postMessage transfers');testObj[0]=0;messageHandler.send('test',testObj);}};sendTest();return;}catch(e){info('The worker has been disabled.');}}
this._setupFakeWorker();},_setupFakeWorker:function PDFWorker_setupFakeWorker(){if(!isWorkerDisabled&&!getDefaultSetting('disableWorker')){warn('Setting up fake worker.');isWorkerDisabled=true;}
setupFakeWorkerGlobal().then(function(WorkerMessageHandler){if(this.destroyed){this._readyCapability.reject(new Error('Worker was destroyed'));return;}
var isTypedArraysPresent=Uint8Array!==Float32Array;var port=new FakeWorkerPort(isTypedArraysPresent);this._port=port;var id='fake'+nextFakeWorkerId++;var workerHandler=new MessageHandler(id+'_worker',id,port);WorkerMessageHandler.setup(workerHandler,port);var messageHandler=new MessageHandler(id,id+'_worker',port);this._messageHandler=messageHandler;this._readyCapability.resolve();}.bind(this));},destroy:function PDFWorker_destroy(){this.destroyed=true;if(this._webWorker){this._webWorker.terminate();this._webWorker=null;}
this._port=null;if(this._messageHandler){this._messageHandler.destroy();this._messageHandler=null;}}};return PDFWorker;}();var WorkerTransport=function WorkerTransportClosure(){function WorkerTransport(messageHandler,loadingTask,pdfDataRangeTransport){this.messageHandler=messageHandler;this.loadingTask=loadingTask;this.pdfDataRangeTransport=pdfDataRangeTransport;this.commonObjs=new PDFObjects();this.fontLoader=new FontLoader(loadingTask.docId);this.destroyed=false;this.destroyCapability=null;this._passwordCapability=null;this.pageCache=[];this.pagePromises=[];this.downloadInfoCapability=createPromiseCapability();this.setupMessageHandler();}
WorkerTransport.prototype={destroy:function WorkerTransport_destroy(){if(this.destroyCapability){return this.destroyCapability.promise;}
this.destroyed=true;this.destroyCapability=createPromiseCapability();if(this._passwordCapability){this._passwordCapability.reject(new Error('Worker was destroyed during onPassword callback'));}
var waitOn=[];this.pageCache.forEach(function(page){if(page){waitOn.push(page._destroy());}});this.pageCache=[];this.pagePromises=[];var self=this;var terminated=this.messageHandler.sendWithPromise('Terminate',null);waitOn.push(terminated);Promise.all(waitOn).then(function(){self.fontLoader.clear();if(self.pdfDataRangeTransport){self.pdfDataRangeTransport.abort();self.pdfDataRangeTransport=null;}
if(self.messageHandler){self.messageHandler.destroy();self.messageHandler=null;}
self.destroyCapability.resolve();},this.destroyCapability.reject);return this.destroyCapability.promise;},setupMessageHandler:function WorkerTransport_setupMessageHandler(){var messageHandler=this.messageHandler;var loadingTask=this.loadingTask;var pdfDataRangeTransport=this.pdfDataRangeTransport;if(pdfDataRangeTransport){pdfDataRangeTransport.addRangeListener(function(begin,chunk){messageHandler.send('OnDataRange',{begin:begin,chunk:chunk});});pdfDataRangeTransport.addProgressListener(function(loaded){messageHandler.send('OnDataProgress',{loaded:loaded});});pdfDataRangeTransport.addProgressiveReadListener(function(chunk){messageHandler.send('OnDataRange',{chunk:chunk});});messageHandler.on('RequestDataRange',function transportDataRange(data){pdfDataRangeTransport.requestDataRange(data.begin,data.end);},this);}
messageHandler.on('GetDoc',function transportDoc(data){var pdfInfo=data.pdfInfo;this.numPages=data.pdfInfo.numPages;var loadingTask=this.loadingTask;var pdfDocument=new PDFDocumentProxy(pdfInfo,this,loadingTask);this.pdfDocument=pdfDocument;loadingTask._capability.resolve(pdfDocument);},this);messageHandler.on('PasswordRequest',function transportPasswordRequest(exception){this._passwordCapability=createPromiseCapability();if(loadingTask.onPassword){var updatePassword=function(password){this._passwordCapability.resolve({password:password});}.bind(this);loadingTask.onPassword(updatePassword,exception.code);}else{this._passwordCapability.reject(new PasswordException(exception.message,exception.code));}
return this._passwordCapability.promise;},this);messageHandler.on('PasswordException',function transportPasswordException(exception){loadingTask._capability.reject(new PasswordException(exception.message,exception.code));},this);messageHandler.on('InvalidPDF',function transportInvalidPDF(exception){this.loadingTask._capability.reject(new InvalidPDFException(exception.message));},this);messageHandler.on('MissingPDF',function transportMissingPDF(exception){this.loadingTask._capability.reject(new MissingPDFException(exception.message));},this);messageHandler.on('UnexpectedResponse',function transportUnexpectedResponse(exception){this.loadingTask._capability.reject(new UnexpectedResponseException(exception.message,exception.status));},this);messageHandler.on('UnknownError',function transportUnknownError(exception){this.loadingTask._capability.reject(new UnknownErrorException(exception.message,exception.details));},this);messageHandler.on('DataLoaded',function transportPage(data){this.downloadInfoCapability.resolve(data);},this);messageHandler.on('PDFManagerReady',function transportPage(data){if(this.pdfDataRangeTransport){this.pdfDataRangeTransport.transportReady();}},this);messageHandler.on('StartRenderPage',function transportRender(data){if(this.destroyed){return;}
var page=this.pageCache[data.pageIndex];page.stats.timeEnd('Page Request');page._startRenderPage(data.transparency,data.intent);},this);messageHandler.on('RenderPageChunk',function transportRender(data){if(this.destroyed){return;}
var page=this.pageCache[data.pageIndex];page._renderPageChunk(data.operatorList,data.intent);},this);messageHandler.on('commonobj',function transportObj(data){if(this.destroyed){return;}
var id=data[0];var type=data[1];if(this.commonObjs.hasData(id)){return;}
switch(type){case'Font':var exportedData=data[2];if('error'in exportedData){var exportedError=exportedData.error;warn('Error during font loading: '+exportedError);this.commonObjs.resolve(id,exportedError);break;}
var fontRegistry=null;if(getDefaultSetting('pdfBug')&&globalScope.FontInspector&&globalScope['FontInspector'].enabled){fontRegistry={registerFont:function(font,url){globalScope['FontInspector'].fontAdded(font,url);}};}
var font=new FontFaceObject(exportedData,{isEvalSuported:getDefaultSetting('isEvalSupported'),disableFontFace:getDefaultSetting('disableFontFace'),fontRegistry:fontRegistry});this.fontLoader.bind([font],function fontReady(fontObjs){this.commonObjs.resolve(id,font);}.bind(this));break;case'FontPath':this.commonObjs.resolve(id,data[2]);break;default:error('Got unknown common object type '+type);}},this);messageHandler.on('obj',function transportObj(data){if(this.destroyed){return;}
var id=data[0];var pageIndex=data[1];var type=data[2];var pageProxy=this.pageCache[pageIndex];var imageData;if(pageProxy.objs.hasData(id)){return;}
switch(type){case'JpegStream':imageData=data[3];loadJpegStream(id,imageData,pageProxy.objs);break;case'Image':imageData=data[3];pageProxy.objs.resolve(id,imageData);var MAX_IMAGE_SIZE_TO_STORE=8000000;if(imageData&&'data'in imageData&&imageData.data.length>MAX_IMAGE_SIZE_TO_STORE){pageProxy.cleanupAfterRender=true;}
break;default:error('Got unknown object type '+type);}},this);messageHandler.on('DocProgress',function transportDocProgress(data){if(this.destroyed){return;}
var loadingTask=this.loadingTask;if(loadingTask.onProgress){loadingTask.onProgress({loaded:data.loaded,total:data.total});}},this);messageHandler.on('PageError',function transportError(data){if(this.destroyed){return;}
var page=this.pageCache[data.pageNum-1];var intentState=page.intentStates[data.intent];if(intentState.displayReadyCapability){intentState.displayReadyCapability.reject(data.error);}else{error(data.error);}
if(intentState.operatorList){intentState.operatorList.lastChunk=true;for(var i=0;i<intentState.renderTasks.length;i++){intentState.renderTasks[i].operatorListChanged();}}},this);messageHandler.on('UnsupportedFeature',function transportUnsupportedFeature(data){if(this.destroyed){return;}
var featureId=data.featureId;var loadingTask=this.loadingTask;if(loadingTask.onUnsupportedFeature){loadingTask.onUnsupportedFeature(featureId);}
_UnsupportedManager.notify(featureId);},this);messageHandler.on('JpegDecode',function(data){if(this.destroyed){return Promise.reject(new Error('Worker was destroyed'));}
var imageUrl=data[0];var components=data[1];if(components!==3&&components!==1){return Promise.reject(new Error('Only 3 components or 1 component can be returned'));}
return new Promise(function(resolve,reject){var img=new Image();img.onload=function(){var width=img.width;var height=img.height;var size=width*height;var rgbaLength=size*4;var buf=new Uint8Array(size*components);var tmpCanvas=createScratchCanvas(width,height);var tmpCtx=tmpCanvas.getContext('2d');tmpCtx.drawImage(img,0,0);var data=tmpCtx.getImageData(0,0,width,height).data;var i,j;if(components===3){for(i=0,j=0;i<rgbaLength;i+=4,j+=3){buf[j]=data[i];buf[j+1]=data[i+1];buf[j+2]=data[i+2];}}else if(components===1){for(i=0,j=0;i<rgbaLength;i+=4,j++){buf[j]=data[i];}}
resolve({data:buf,width:width,height:height});};img.onerror=function(){reject(new Error('JpegDecode failed to load image'));};img.src=imageUrl;});},this);},getData:function WorkerTransport_getData(){return this.messageHandler.sendWithPromise('GetData',null);},getPage:function WorkerTransport_getPage(pageNumber,capability){if(!isInt(pageNumber)||pageNumber<=0||pageNumber>this.numPages){return Promise.reject(new Error('Invalid page request'));}
var pageIndex=pageNumber-1;if(pageIndex in this.pagePromises){return this.pagePromises[pageIndex];}
var promise=this.messageHandler.sendWithPromise('GetPage',{pageIndex:pageIndex}).then(function(pageInfo){if(this.destroyed){throw new Error('Transport destroyed');}
var page=new PDFPageProxy(pageIndex,pageInfo,this);this.pageCache[pageIndex]=page;return page;}.bind(this));this.pagePromises[pageIndex]=promise;return promise;},getPageIndex:function WorkerTransport_getPageIndexByRef(ref){return this.messageHandler.sendWithPromise('GetPageIndex',{ref:ref}).catch(function(reason){return Promise.reject(new Error(reason));});},getAnnotations:function WorkerTransport_getAnnotations(pageIndex,intent){return this.messageHandler.sendWithPromise('GetAnnotations',{pageIndex:pageIndex,intent:intent});},getDestinations:function WorkerTransport_getDestinations(){return this.messageHandler.sendWithPromise('GetDestinations',null);},getDestination:function WorkerTransport_getDestination(id){return this.messageHandler.sendWithPromise('GetDestination',{id:id});},getPageLabels:function WorkerTransport_getPageLabels(){return this.messageHandler.sendWithPromise('GetPageLabels',null);},getAttachments:function WorkerTransport_getAttachments(){return this.messageHandler.sendWithPromise('GetAttachments',null);},getJavaScript:function WorkerTransport_getJavaScript(){return this.messageHandler.sendWithPromise('GetJavaScript',null);},getOutline:function WorkerTransport_getOutline(){return this.messageHandler.sendWithPromise('GetOutline',null);},getMetadata:function WorkerTransport_getMetadata(){return this.messageHandler.sendWithPromise('GetMetadata',null).then(function transportMetadata(results){return{info:results[0],metadata:results[1]?new Metadata(results[1]):null};});},getStats:function WorkerTransport_getStats(){return this.messageHandler.sendWithPromise('GetStats',null);},startCleanup:function WorkerTransport_startCleanup(){this.messageHandler.sendWithPromise('Cleanup',null).then(function endCleanup(){for(var i=0,ii=this.pageCache.length;i<ii;i++){var page=this.pageCache[i];if(page){page.cleanup();}}
this.commonObjs.clear();this.fontLoader.clear();}.bind(this));}};return WorkerTransport;}();var PDFObjects=function PDFObjectsClosure(){function PDFObjects(){this.objs=Object.create(null);}
PDFObjects.prototype={ensureObj:function PDFObjects_ensureObj(objId){if(this.objs[objId]){return this.objs[objId];}
var obj={capability:createPromiseCapability(),data:null,resolved:false};this.objs[objId]=obj;return obj;},get:function PDFObjects_get(objId,callback){if(callback){this.ensureObj(objId).capability.promise.then(callback);return null;}
var obj=this.objs[objId];if(!obj||!obj.resolved){error('Requesting object that isn\'t resolved yet '+objId);}
return obj.data;},resolve:function PDFObjects_resolve(objId,data){var obj=this.ensureObj(objId);obj.resolved=true;obj.data=data;obj.capability.resolve(data);},isResolved:function PDFObjects_isResolved(objId){var objs=this.objs;if(!objs[objId]){return false;}
return objs[objId].resolved;},hasData:function PDFObjects_hasData(objId){return this.isResolved(objId);},getData:function PDFObjects_getData(objId){var objs=this.objs;if(!objs[objId]||!objs[objId].resolved){return null;}
return objs[objId].data;},clear:function PDFObjects_clear(){this.objs=Object.create(null);}};return PDFObjects;}();var RenderTask=function RenderTaskClosure(){function RenderTask(internalRenderTask){this._internalRenderTask=internalRenderTask;this.onContinue=null;}
RenderTask.prototype={get promise(){return this._internalRenderTask.capability.promise;},cancel:function RenderTask_cancel(){this._internalRenderTask.cancel();},then:function RenderTask_then(onFulfilled,onRejected){return this.promise.then.apply(this.promise,arguments);}};return RenderTask;}();var InternalRenderTask=function InternalRenderTaskClosure(){function InternalRenderTask(callback,params,objs,commonObjs,operatorList,pageNumber){this.callback=callback;this.params=params;this.objs=objs;this.commonObjs=commonObjs;this.operatorListIdx=null;this.operatorList=operatorList;this.pageNumber=pageNumber;this.running=false;this.graphicsReadyCallback=null;this.graphicsReady=false;this.useRequestAnimationFrame=false;this.cancelled=false;this.capability=createPromiseCapability();this.task=new RenderTask(this);this._continueBound=this._continue.bind(this);this._scheduleNextBound=this._scheduleNext.bind(this);this._nextBound=this._next.bind(this);}
InternalRenderTask.prototype={initializeGraphics:function InternalRenderTask_initializeGraphics(transparency){if(this.cancelled){return;}
if(getDefaultSetting('pdfBug')&&globalScope.StepperManager&&globalScope.StepperManager.enabled){this.stepper=globalScope.StepperManager.create(this.pageNumber-1);this.stepper.init(this.operatorList);this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint();}
var params=this.params;this.gfx=new CanvasGraphics(params.canvasContext,this.commonObjs,this.objs,params.imageLayer);this.gfx.beginDrawing(params.transform,params.viewport,transparency);this.operatorListIdx=0;this.graphicsReady=true;if(this.graphicsReadyCallback){this.graphicsReadyCallback();}},cancel:function InternalRenderTask_cancel(){this.running=false;this.cancelled=true;this.callback('cancelled');},operatorListChanged:function InternalRenderTask_operatorListChanged(){if(!this.graphicsReady){if(!this.graphicsReadyCallback){this.graphicsReadyCallback=this._continueBound;}
return;}
if(this.stepper){this.stepper.updateOperatorList(this.operatorList);}
if(this.running){return;}
this._continue();},_continue:function InternalRenderTask__continue(){this.running=true;if(this.cancelled){return;}
if(this.task.onContinue){this.task.onContinue.call(this.task,this._scheduleNextBound);}else{this._scheduleNext();}},_scheduleNext:function InternalRenderTask__scheduleNext(){if(this.useRequestAnimationFrame&&typeof window!=='undefined'){window.requestAnimationFrame(this._nextBound);}else{Promise.resolve(undefined).then(this._nextBound);}},_next:function InternalRenderTask__next(){if(this.cancelled){return;}
this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper);if(this.operatorListIdx===this.operatorList.argsArray.length){this.running=false;if(this.operatorList.lastChunk){this.gfx.endDrawing();this.callback();}}}};return InternalRenderTask;}();var _UnsupportedManager=function UnsupportedManagerClosure(){var listeners=[];return{listen:function(cb){deprecated('Global UnsupportedManager.listen is used: '+' use PDFDocumentLoadingTask.onUnsupportedFeature instead');listeners.push(cb);},notify:function(featureId){for(var i=0,ii=listeners.length;i<ii;i++){listeners[i](featureId);}}};}();if(typeof pdfjsVersion!=='undefined'){exports.version=pdfjsVersion;}
if(typeof pdfjsBuild!=='undefined'){exports.build=pdfjsBuild;}
exports.getDocument=getDocument;exports.PDFDataRangeTransport=PDFDataRangeTransport;exports.PDFWorker=PDFWorker;exports.PDFDocumentProxy=PDFDocumentProxy;exports.PDFPageProxy=PDFPageProxy;exports._UnsupportedManager=_UnsupportedManager;}));(function(root,factory){factory(root.pdfjsDisplayGlobal={},root.pdfjsSharedUtil,root.pdfjsDisplayDOMUtils,root.pdfjsDisplayAPI,root.pdfjsDisplayAnnotationLayer,root.pdfjsDisplayTextLayer,root.pdfjsDisplayMetadata,root.pdfjsDisplaySVG);}(this,function(exports,sharedUtil,displayDOMUtils,displayAPI,displayAnnotationLayer,displayTextLayer,displayMetadata,displaySVG){var globalScope=sharedUtil.globalScope;var deprecated=sharedUtil.deprecated;var warn=sharedUtil.warn;var LinkTarget=displayDOMUtils.LinkTarget;var isWorker=typeof window==='undefined';if(!globalScope.PDFJS){globalScope.PDFJS={};}
var PDFJS=globalScope.PDFJS;if(typeof pdfjsVersion!=='undefined'){PDFJS.version=pdfjsVersion;}
if(typeof pdfjsBuild!=='undefined'){PDFJS.build=pdfjsBuild;}
PDFJS.pdfBug=false;if(PDFJS.verbosity!==undefined){sharedUtil.setVerbosityLevel(PDFJS.verbosity);}
delete PDFJS.verbosity;Object.defineProperty(PDFJS,'verbosity',{get:function(){return sharedUtil.getVerbosityLevel();},set:function(level){sharedUtil.setVerbosityLevel(level);},enumerable:true,configurable:true});PDFJS.VERBOSITY_LEVELS=sharedUtil.VERBOSITY_LEVELS;PDFJS.OPS=sharedUtil.OPS;PDFJS.UNSUPPORTED_FEATURES=sharedUtil.UNSUPPORTED_FEATURES;PDFJS.isValidUrl=displayDOMUtils.isValidUrl;PDFJS.shadow=sharedUtil.shadow;PDFJS.createBlob=sharedUtil.createBlob;PDFJS.createObjectURL=function PDFJS_createObjectURL(data,contentType){return sharedUtil.createObjectURL(data,contentType,PDFJS.disableCreateObjectURL);};Object.defineProperty(PDFJS,'isLittleEndian',{configurable:true,get:function PDFJS_isLittleEndian(){var value=sharedUtil.isLittleEndian();return sharedUtil.shadow(PDFJS,'isLittleEndian',value);}});PDFJS.removeNullCharacters=sharedUtil.removeNullCharacters;PDFJS.PasswordResponses=sharedUtil.PasswordResponses;PDFJS.PasswordException=sharedUtil.PasswordException;PDFJS.UnknownErrorException=sharedUtil.UnknownErrorException;PDFJS.InvalidPDFException=sharedUtil.InvalidPDFException;PDFJS.MissingPDFException=sharedUtil.MissingPDFException;PDFJS.UnexpectedResponseException=sharedUtil.UnexpectedResponseException;PDFJS.Util=sharedUtil.Util;PDFJS.PageViewport=sharedUtil.PageViewport;PDFJS.createPromiseCapability=sharedUtil.createPromiseCapability;PDFJS.maxImageSize=PDFJS.maxImageSize===undefined?-1:PDFJS.maxImageSize;PDFJS.cMapUrl=PDFJS.cMapUrl===undefined?null:PDFJS.cMapUrl;PDFJS.cMapPacked=PDFJS.cMapPacked===undefined?false:PDFJS.cMapPacked;PDFJS.disableFontFace=PDFJS.disableFontFace===undefined?false:PDFJS.disableFontFace;PDFJS.imageResourcesPath=PDFJS.imageResourcesPath===undefined?'':PDFJS.imageResourcesPath;PDFJS.disableWorker=PDFJS.disableWorker===undefined?false:PDFJS.disableWorker;PDFJS.workerSrc=PDFJS.workerSrc===undefined?null:PDFJS.workerSrc;PDFJS.disableRange=PDFJS.disableRange===undefined?false:PDFJS.disableRange;PDFJS.disableStream=PDFJS.disableStream===undefined?false:PDFJS.disableStream;PDFJS.disableAutoFetch=PDFJS.disableAutoFetch===undefined?false:PDFJS.disableAutoFetch;PDFJS.pdfBug=PDFJS.pdfBug===undefined?false:PDFJS.pdfBug;PDFJS.postMessageTransfers=PDFJS.postMessageTransfers===undefined?true:PDFJS.postMessageTransfers;PDFJS.disableCreateObjectURL=PDFJS.disableCreateObjectURL===undefined?false:PDFJS.disableCreateObjectURL;PDFJS.disableWebGL=PDFJS.disableWebGL===undefined?true:PDFJS.disableWebGL;PDFJS.externalLinkTarget=PDFJS.externalLinkTarget===undefined?LinkTarget.NONE:PDFJS.externalLinkTarget;PDFJS.externalLinkRel=PDFJS.externalLinkRel===undefined?'noreferrer':PDFJS.externalLinkRel;PDFJS.isEvalSupported=PDFJS.isEvalSupported===undefined?true:PDFJS.isEvalSupported;var savedOpenExternalLinksInNewWindow=PDFJS.openExternalLinksInNewWindow;delete PDFJS.openExternalLinksInNewWindow;Object.defineProperty(PDFJS,'openExternalLinksInNewWindow',{get:function(){return PDFJS.externalLinkTarget===LinkTarget.BLANK;},set:function(value){if(value){deprecated('PDFJS.openExternalLinksInNewWindow, please use '+'"PDFJS.externalLinkTarget = PDFJS.LinkTarget.BLANK" instead.');}
if(PDFJS.externalLinkTarget!==LinkTarget.NONE){warn('PDFJS.externalLinkTarget is already initialized');return;}
PDFJS.externalLinkTarget=value?LinkTarget.BLANK:LinkTarget.NONE;},enumerable:true,configurable:true});if(savedOpenExternalLinksInNewWindow){PDFJS.openExternalLinksInNewWindow=savedOpenExternalLinksInNewWindow;}
PDFJS.getDocument=displayAPI.getDocument;PDFJS.PDFDataRangeTransport=displayAPI.PDFDataRangeTransport;PDFJS.PDFWorker=displayAPI.PDFWorker;Object.defineProperty(PDFJS,'hasCanvasTypedArrays',{configurable:true,get:function PDFJS_hasCanvasTypedArrays(){var value=displayDOMUtils.hasCanvasTypedArrays();return sharedUtil.shadow(PDFJS,'hasCanvasTypedArrays',value);}});PDFJS.CustomStyle=displayDOMUtils.CustomStyle;PDFJS.LinkTarget=LinkTarget;PDFJS.addLinkAttributes=displayDOMUtils.addLinkAttributes;PDFJS.getFilenameFromUrl=displayDOMUtils.getFilenameFromUrl;PDFJS.isExternalLinkTargetSet=displayDOMUtils.isExternalLinkTargetSet;PDFJS.AnnotationLayer=displayAnnotationLayer.AnnotationLayer;PDFJS.renderTextLayer=displayTextLayer.renderTextLayer;PDFJS.Metadata=displayMetadata.Metadata;PDFJS.SVGGraphics=displaySVG.SVGGraphics;PDFJS.UnsupportedManager=displayAPI._UnsupportedManager;exports.globalScope=globalScope;exports.isWorker=isWorker;exports.PDFJS=globalScope.PDFJS;}));}.call(pdfjsLibs));exports.PDFJS=pdfjsLibs.pdfjsDisplayGlobal.PDFJS;exports.build=pdfjsLibs.pdfjsDisplayAPI.build;exports.version=pdfjsLibs.pdfjsDisplayAPI.version;exports.getDocument=pdfjsLibs.pdfjsDisplayAPI.getDocument;exports.PDFDataRangeTransport=pdfjsLibs.pdfjsDisplayAPI.PDFDataRangeTransport;exports.PDFWorker=pdfjsLibs.pdfjsDisplayAPI.PDFWorker;exports.renderTextLayer=pdfjsLibs.pdfjsDisplayTextLayer.renderTextLayer;exports.AnnotationLayer=pdfjsLibs.pdfjsDisplayAnnotationLayer.AnnotationLayer;exports.CustomStyle=pdfjsLibs.pdfjsDisplayDOMUtils.CustomStyle;exports.PasswordResponses=pdfjsLibs.pdfjsSharedUtil.PasswordResponses;exports.InvalidPDFException=pdfjsLibs.pdfjsSharedUtil.InvalidPDFException;exports.MissingPDFException=pdfjsLibs.pdfjsSharedUtil.MissingPDFException;exports.SVGGraphics=pdfjsLibs.pdfjsDisplaySVG.SVGGraphics;exports.UnexpectedResponseException=pdfjsLibs.pdfjsSharedUtil.UnexpectedResponseException;exports.OPS=pdfjsLibs.pdfjsSharedUtil.OPS;exports.UNSUPPORTED_FEATURES=pdfjsLibs.pdfjsSharedUtil.UNSUPPORTED_FEATURES;exports.isValidUrl=pdfjsLibs.pdfjsDisplayDOMUtils.isValidUrl;exports.createValidAbsoluteUrl=pdfjsLibs.pdfjsSharedUtil.createValidAbsoluteUrl;exports.createObjectURL=pdfjsLibs.pdfjsSharedUtil.createObjectURL;exports.removeNullCharacters=pdfjsLibs.pdfjsSharedUtil.removeNullCharacters;exports.shadow=pdfjsLibs.pdfjsSharedUtil.shadow;exports.createBlob=pdfjsLibs.pdfjsSharedUtil.createBlob;exports.getFilenameFromUrl=pdfjsLibs.pdfjsDisplayDOMUtils.getFilenameFromUrl;exports.addLinkAttributes=pdfjsLibs.pdfjsDisplayDOMUtils.addLinkAttributes;}));;(function(root,factory){'use strict';if(typeof define==='function'&&define.amd){define('pdfjs-dist/web/pdf_viewer',['exports','pdfjs-dist/build/pdf'],factory);}else if(typeof exports!=='undefined'){factory(exports,require('../build/pdf.js'));}else{factory(root.pdfjsDistWebPDFViewer={},root.pdfjsDistBuildPdf);}}(this,function(exports,pdfjsLib){'use strict';var pdfViewerLibs={pdfjsWebPDFJS:pdfjsLib};(function(){(function(root,factory){factory(root.pdfjsWebPDFRenderingQueue={});}(this,function(exports){var CLEANUP_TIMEOUT=30000;var RenderingStates={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3};var PDFRenderingQueue=function PDFRenderingQueueClosure(){function PDFRenderingQueue(){this.pdfViewer=null;this.pdfThumbnailViewer=null;this.onIdle=null;this.highestPriorityPage=null;this.idleTimeout=null;this.printing=false;this.isThumbnailViewEnabled=false;}
PDFRenderingQueue.prototype={setViewer:function PDFRenderingQueue_setViewer(pdfViewer){this.pdfViewer=pdfViewer;},setThumbnailViewer:function PDFRenderingQueue_setThumbnailViewer(pdfThumbnailViewer){this.pdfThumbnailViewer=pdfThumbnailViewer;},isHighestPriority:function PDFRenderingQueue_isHighestPriority(view){return this.highestPriorityPage===view.renderingId;},renderHighestPriority:function PDFRenderingQueue_renderHighestPriority(currentlyVisiblePages){if(this.idleTimeout){clearTimeout(this.idleTimeout);this.idleTimeout=null;}
if(this.pdfViewer.forceRendering(currentlyVisiblePages)){return;}
if(this.pdfThumbnailViewer&&this.isThumbnailViewEnabled){if(this.pdfThumbnailViewer.forceRendering()){return;}}
if(this.printing){return;}
if(this.onIdle){this.idleTimeout=setTimeout(this.onIdle.bind(this),CLEANUP_TIMEOUT);}},getHighestPriority:function PDFRenderingQueue_getHighestPriority(visible,views,scrolledDown){var visibleViews=visible.views;var numVisible=visibleViews.length;if(numVisible===0){return false;}
for(var i=0;i<numVisible;++i){var view=visibleViews[i].view;if(!this.isViewFinished(view)){return view;}}
if(scrolledDown){var nextPageIndex=visible.last.id;if(views[nextPageIndex]&&!this.isViewFinished(views[nextPageIndex])){return views[nextPageIndex];}}else{var previousPageIndex=visible.first.id-2;if(views[previousPageIndex]&&!this.isViewFinished(views[previousPageIndex])){return views[previousPageIndex];}}
return null;},isViewFinished:function PDFRenderingQueue_isViewFinished(view){return view.renderingState===RenderingStates.FINISHED;},renderView:function PDFRenderingQueue_renderView(view){var state=view.renderingState;switch(state){case RenderingStates.FINISHED:return false;case RenderingStates.PAUSED:this.highestPriorityPage=view.renderingId;view.resume();break;case RenderingStates.RUNNING:this.highestPriorityPage=view.renderingId;break;case RenderingStates.INITIAL:this.highestPriorityPage=view.renderingId;var continueRendering=function(){this.renderHighestPriority();}.bind(this);view.draw().then(continueRendering,continueRendering);break;}
return true;}};return PDFRenderingQueue;}();exports.RenderingStates=RenderingStates;exports.PDFRenderingQueue=PDFRenderingQueue;}));(function(root,factory){factory(root.pdfjsWebDownloadManager={},root.pdfjsWebPDFJS);}(this,function(exports,pdfjsLib){function download(blobUrl,filename){var a=document.createElement('a');if(a.click){a.href=blobUrl;a.target='_parent';if('download'in a){a.download=filename;}
(document.body||document.documentElement).appendChild(a);a.click();a.parentNode.removeChild(a);}else{if(window.top===window&&blobUrl.split('#')[0]===window.location.href.split('#')[0]){var padCharacter=blobUrl.indexOf('?')===-1?'?':'&';blobUrl=blobUrl.replace(/#|$/,padCharacter+'$&');}
window.open(blobUrl,'_parent');}}
function DownloadManager(){}
DownloadManager.prototype={downloadUrl:function DownloadManager_downloadUrl(url,filename){if(!pdfjsLib.createValidAbsoluteUrl(url,'http://example.com')){return;}
download(url+'#pdfjs.action=download',filename);},downloadData:function DownloadManager_downloadData(data,filename,contentType){if(navigator.msSaveBlob){return navigator.msSaveBlob(new Blob([data],{type:contentType}),filename);}
var blobUrl=pdfjsLib.createObjectURL(data,contentType,pdfjsLib.PDFJS.disableCreateObjectURL);download(blobUrl,filename);},download:function DownloadManager_download(blob,url,filename){if(!URL){this.downloadUrl(url,filename);return;}
if(navigator.msSaveBlob){if(!navigator.msSaveBlob(blob,filename)){this.downloadUrl(url,filename);}
return;}
var blobUrl=URL.createObjectURL(blob);download(blobUrl,filename);}};exports.DownloadManager=DownloadManager;}));(function(root,factory){factory(root.pdfjsWebUIUtils={},root.pdfjsWebPDFJS);}(this,function(exports,pdfjsLib){var CSS_UNITS=96.0 / 72.0;var DEFAULT_SCALE_VALUE='auto';var DEFAULT_SCALE=1.0;var MIN_SCALE=0.25;var MAX_SCALE=10.0;var UNKNOWN_SCALE=0;var MAX_AUTO_SCALE=1.25;var SCROLLBAR_PADDING=40;var VERTICAL_PADDING=5;var RendererType={CANVAS:'canvas',SVG:'svg'};var mozL10n=document.mozL10n||document.webL10n;var PDFJS=pdfjsLib.PDFJS;PDFJS.disableFullscreen=PDFJS.disableFullscreen===undefined?false:PDFJS.disableFullscreen;PDFJS.useOnlyCssZoom=PDFJS.useOnlyCssZoom===undefined?false:PDFJS.useOnlyCssZoom;PDFJS.maxCanvasPixels=PDFJS.maxCanvasPixels===undefined?16777216:PDFJS.maxCanvasPixels;PDFJS.disableHistory=PDFJS.disableHistory===undefined?false:PDFJS.disableHistory;PDFJS.disableTextLayer=PDFJS.disableTextLayer===undefined?false:PDFJS.disableTextLayer;PDFJS.ignoreCurrentPositionOnZoom=PDFJS.ignoreCurrentPositionOnZoom===undefined?false:PDFJS.ignoreCurrentPositionOnZoom;PDFJS.locale=PDFJS.locale===undefined?navigator.language:PDFJS.locale;function getOutputScale(ctx){var devicePixelRatio=window.devicePixelRatio||1;var backingStoreRatio=ctx.webkitBackingStorePixelRatio||ctx.mozBackingStorePixelRatio||ctx.msBackingStorePixelRatio||ctx.oBackingStorePixelRatio||ctx.backingStorePixelRatio||1;var pixelRatio=devicePixelRatio / backingStoreRatio;return{sx:pixelRatio,sy:pixelRatio,scaled:pixelRatio!==1};}
function scrollIntoView(element,spot,skipOverflowHiddenElements){var parent=element.offsetParent;if(!parent){console.error('offsetParent is not set -- cannot scroll');return;}
var checkOverflow=skipOverflowHiddenElements||false;var offsetY=element.offsetTop+element.clientTop;var offsetX=element.offsetLeft+element.clientLeft;while(parent.clientHeight===parent.scrollHeight||checkOverflow&&getComputedStyle(parent).overflow==='hidden'){if(parent.dataset._scaleY){offsetY /=parent.dataset._scaleY;offsetX /=parent.dataset._scaleX;}
offsetY+=parent.offsetTop;offsetX+=parent.offsetLeft;parent=parent.offsetParent;if(!parent){return;}}
if(spot){if(spot.top!==undefined){offsetY+=spot.top;}
if(spot.left!==undefined){offsetX+=spot.left;parent.scrollLeft=offsetX;}}
parent.scrollTop=offsetY;}
function watchScroll(viewAreaElement,callback){var debounceScroll=function debounceScroll(evt){if(rAF){return;}
rAF=window.requestAnimationFrame(function viewAreaElementScrolled(){rAF=null;var currentY=viewAreaElement.scrollTop;var lastY=state.lastY;if(currentY!==lastY){state.down=currentY>lastY;}
state.lastY=currentY;callback(state);});};var state={down:true,lastY:viewAreaElement.scrollTop,_eventHandler:debounceScroll};var rAF=null;viewAreaElement.addEventListener('scroll',debounceScroll,true);return state;}
function parseQueryString(query){var parts=query.split('&');var params={};for(var i=0,ii=parts.length;i<ii;++i){var param=parts[i].split('=');var key=param[0].toLowerCase();var value=param.length>1?param[1]:null;params[decodeURIComponent(key)]=decodeURIComponent(value);}
return params;}
function binarySearchFirstItem(items,condition){var minIndex=0;var maxIndex=items.length-1;if(items.length===0||!condition(items[maxIndex])){return items.length;}
if(condition(items[minIndex])){return minIndex;}
while(minIndex<maxIndex){var currentIndex=minIndex+maxIndex>>1;var currentItem=items[currentIndex];if(condition(currentItem)){maxIndex=currentIndex;}else{minIndex=currentIndex+1;}}
return minIndex;}
function approximateFraction(x){if(Math.floor(x)===x){return[x,1];}
var xinv=1 / x;var limit=8;if(xinv>limit){return[1,limit];}else if(Math.floor(xinv)===xinv){return[1,xinv];}
var x_=x>1?xinv:x;var a=0,b=1,c=1,d=1;while(true){var p=a+c,q=b+d;if(q>limit){break;}
if(x_<=p / q){c=p;d=q;}else{a=p;b=q;}}
var result;if(x_-a / b<c / d-x_){result=x_===x?[a,b]:[b,a];}else{result=x_===x?[c,d]:[d,c];}
return result;}
function roundToDivide(x,div){var r=x%div;return r===0?x:Math.round(x-r+div);}
function getVisibleElements(scrollEl,views,sortByVisibility){var top=scrollEl.scrollTop,bottom=top+scrollEl.clientHeight;var left=scrollEl.scrollLeft,right=left+scrollEl.clientWidth;function isElementBottomBelowViewTop(view){var element=view.div;var elementBottom=element.offsetTop+element.clientTop+element.clientHeight;return elementBottom>top;}
var visible=[],view,element;var currentHeight,viewHeight,hiddenHeight,percentHeight;var currentWidth,viewWidth;var firstVisibleElementInd=views.length===0?0:binarySearchFirstItem(views,isElementBottomBelowViewTop);for(var i=firstVisibleElementInd,ii=views.length;i<ii;i++){view=views[i];element=view.div;currentHeight=element.offsetTop+element.clientTop;viewHeight=element.clientHeight;if(currentHeight>bottom){break;}
currentWidth=element.offsetLeft+element.clientLeft;viewWidth=element.clientWidth;if(currentWidth+viewWidth<left||currentWidth>right){continue;}
hiddenHeight=Math.max(0,top-currentHeight)+Math.max(0,currentHeight+viewHeight-bottom);percentHeight=(viewHeight-hiddenHeight)*100 / viewHeight|0;visible.push({id:view.id,x:currentWidth,y:currentHeight,view:view,percent:percentHeight});}
var first=visible[0];var last=visible[visible.length-1];if(sortByVisibility){visible.sort(function(a,b){var pc=a.percent-b.percent;if(Math.abs(pc)>0.001){return-pc;}
return a.id-b.id;});}
return{first:first,last:last,views:visible};}
function noContextMenuHandler(e){e.preventDefault();}
function getPDFFileNameFromURL(url){var reURI=/^(?:([^:]+:)?\/\/[^\/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/;var reFilename=/[^\/?#=]+\.pdf\b(?!.*\.pdf\b)/i;var splitURI=reURI.exec(url);var suggestedFilename=reFilename.exec(splitURI[1])||reFilename.exec(splitURI[2])||reFilename.exec(splitURI[3]);if(suggestedFilename){suggestedFilename=suggestedFilename[0];if(suggestedFilename.indexOf('%')!==-1){try{suggestedFilename=reFilename.exec(decodeURIComponent(suggestedFilename))[0];}catch(e){}}}
return suggestedFilename||'document.pdf';}
function normalizeWheelEventDelta(evt){var delta=Math.sqrt(evt.deltaX*evt.deltaX+evt.deltaY*evt.deltaY);var angle=Math.atan2(evt.deltaY,evt.deltaX);if(-0.25*Math.PI<angle&&angle<0.75*Math.PI){delta=-delta;}
var MOUSE_DOM_DELTA_PIXEL_MODE=0;var MOUSE_DOM_DELTA_LINE_MODE=1;var MOUSE_PIXELS_PER_LINE=30;var MOUSE_LINES_PER_PAGE=30;if(evt.deltaMode===MOUSE_DOM_DELTA_PIXEL_MODE){delta /=MOUSE_PIXELS_PER_LINE*MOUSE_LINES_PER_PAGE;}else if(evt.deltaMode===MOUSE_DOM_DELTA_LINE_MODE){delta /=MOUSE_LINES_PER_PAGE;}
return delta;}
var animationStarted=new Promise(function(resolve){window.requestAnimationFrame(resolve);});var localized=new Promise(function(resolve,reject){if(!mozL10n){resolve();return;}
if(mozL10n.getReadyState()!=='loading'){resolve();return;}
window.addEventListener('localized',function localized(evt){resolve();});});var EventBus=function EventBusClosure(){function EventBus(){this._listeners=Object.create(null);}
EventBus.prototype={on:function EventBus_on(eventName,listener){var eventListeners=this._listeners[eventName];if(!eventListeners){eventListeners=[];this._listeners[eventName]=eventListeners;}
eventListeners.push(listener);},off:function EventBus_on(eventName,listener){var eventListeners=this._listeners[eventName];var i;if(!eventListeners||(i=eventListeners.indexOf(listener))<0){return;}
eventListeners.splice(i,1);},dispatch:function EventBus_dispath(eventName){var eventListeners=this._listeners[eventName];if(!eventListeners||eventListeners.length===0){return;}
var args=Array.prototype.slice.call(arguments,1);eventListeners.slice(0).forEach(function(listener){listener.apply(null,args);});}};return EventBus;}();var ProgressBar=function ProgressBarClosure(){function clamp(v,min,max){return Math.min(Math.max(v,min),max);}
function ProgressBar(id,opts){this.visible=true;this.div=document.querySelector(id+' .progress');this.bar=this.div.parentNode;this.height=opts.height||100;this.width=opts.width||100;this.units=opts.units||'%';this.div.style.height=this.height+this.units;this.percent=0;}
ProgressBar.prototype={updateBar:function ProgressBar_updateBar(){if(this._indeterminate){this.div.classList.add('indeterminate');this.div.style.width=this.width+this.units;return;}
this.div.classList.remove('indeterminate');var progressSize=this.width*this._percent / 100;this.div.style.width=progressSize+this.units;},get percent(){return this._percent;},set percent(val){this._indeterminate=isNaN(val);this._percent=clamp(val,0,100);this.updateBar();},setWidth:function ProgressBar_setWidth(viewer){if(viewer){var container=viewer.parentNode;var scrollbarWidth=container.offsetWidth-viewer.offsetWidth;if(scrollbarWidth>0){this.bar.setAttribute('style','width: calc(100% - '+scrollbarWidth+'px);');}}},hide:function ProgressBar_hide(){if(!this.visible){return;}
this.visible=false;this.bar.classList.add('hidden');document.body.classList.remove('loadingInProgress');},show:function ProgressBar_show(){if(this.visible){return;}
this.visible=true;document.body.classList.add('loadingInProgress');this.bar.classList.remove('hidden');}};return ProgressBar;}();exports.CSS_UNITS=CSS_UNITS;exports.DEFAULT_SCALE_VALUE=DEFAULT_SCALE_VALUE;exports.DEFAULT_SCALE=DEFAULT_SCALE;exports.MIN_SCALE=MIN_SCALE;exports.MAX_SCALE=MAX_SCALE;exports.UNKNOWN_SCALE=UNKNOWN_SCALE;exports.MAX_AUTO_SCALE=MAX_AUTO_SCALE;exports.SCROLLBAR_PADDING=SCROLLBAR_PADDING;exports.VERTICAL_PADDING=VERTICAL_PADDING;exports.RendererType=RendererType;exports.mozL10n=mozL10n;exports.EventBus=EventBus;exports.ProgressBar=ProgressBar;exports.getPDFFileNameFromURL=getPDFFileNameFromURL;exports.noContextMenuHandler=noContextMenuHandler;exports.parseQueryString=parseQueryString;exports.getVisibleElements=getVisibleElements;exports.roundToDivide=roundToDivide;exports.approximateFraction=approximateFraction;exports.getOutputScale=getOutputScale;exports.scrollIntoView=scrollIntoView;exports.watchScroll=watchScroll;exports.binarySearchFirstItem=binarySearchFirstItem;exports.normalizeWheelEventDelta=normalizeWheelEventDelta;exports.animationStarted=animationStarted;exports.localized=localized;}));(function(root,factory){factory(root.pdfjsWebDOMEvents={},root.pdfjsWebUIUtils);}(this,function(exports,uiUtils){var EventBus=uiUtils.EventBus;function attachDOMEventsToEventBus(eventBus){eventBus.on('documentload',function(){var event=document.createEvent('CustomEvent');event.initCustomEvent('documentload',true,true,{});window.dispatchEvent(event);});eventBus.on('pagerendered',function(e){var event=document.createEvent('CustomEvent');event.initCustomEvent('pagerendered',true,true,{pageNumber:e.pageNumber,cssTransform:e.cssTransform});e.source.div.dispatchEvent(event);});eventBus.on('textlayerrendered',function(e){var event=document.createEvent('CustomEvent');event.initCustomEvent('textlayerrendered',true,true,{pageNumber:e.pageNumber});e.source.textLayerDiv.dispatchEvent(event);});eventBus.on('pagechange',function(e){var event=document.createEvent('UIEvents');event.initUIEvent('pagechange',true,true,window,0);event.pageNumber=e.pageNumber;e.source.container.dispatchEvent(event);});eventBus.on('pagesinit',function(e){var event=document.createEvent('CustomEvent');event.initCustomEvent('pagesinit',true,true,null);e.source.container.dispatchEvent(event);});eventBus.on('pagesloaded',function(e){var event=document.createEvent('CustomEvent');event.initCustomEvent('pagesloaded',true,true,{pagesCount:e.pagesCount});e.source.container.dispatchEvent(event);});eventBus.on('scalechange',function(e){var event=document.createEvent('UIEvents');event.initUIEvent('scalechange',true,true,window,0);event.scale=e.scale;event.presetValue=e.presetValue;e.source.container.dispatchEvent(event);});eventBus.on('updateviewarea',function(e){var event=document.createEvent('UIEvents');event.initUIEvent('updateviewarea',true,true,window,0);event.location=e.location;e.source.container.dispatchEvent(event);});eventBus.on('find',function(e){if(e.source===window){return;}
var event=document.createEvent('CustomEvent');event.initCustomEvent('find'+e.type,true,true,{query:e.query,phraseSearch:e.phraseSearch,caseSensitive:e.caseSensitive,highlightAll:e.highlightAll,findPrevious:e.findPrevious});window.dispatchEvent(event);});eventBus.on('attachmentsloaded',function(e){var event=document.createEvent('CustomEvent');event.initCustomEvent('attachmentsloaded',true,true,{attachmentsCount:e.attachmentsCount});e.source.container.dispatchEvent(event);});eventBus.on('sidebarviewchanged',function(e){var event=document.createEvent('CustomEvent');event.initCustomEvent('sidebarviewchanged',true,true,{view:e.view});e.source.outerContainer.dispatchEvent(event);});eventBus.on('pagemode',function(e){var event=document.createEvent('CustomEvent');event.initCustomEvent('pagemode',true,true,{mode:e.mode});e.source.pdfViewer.container.dispatchEvent(event);});eventBus.on('namedaction',function(e){var event=document.createEvent('CustomEvent');event.initCustomEvent('namedaction',true,true,{action:e.action});e.source.pdfViewer.container.dispatchEvent(event);});eventBus.on('presentationmodechanged',function(e){var event=document.createEvent('CustomEvent');event.initCustomEvent('presentationmodechanged',true,true,{active:e.active,switchInProgress:e.switchInProgress});window.dispatchEvent(event);});eventBus.on('outlineloaded',function(e){var event=document.createEvent('CustomEvent');event.initCustomEvent('outlineloaded',true,true,{outlineCount:e.outlineCount});e.source.container.dispatchEvent(event);});}
var globalEventBus=null;function getGlobalEventBus(){if(globalEventBus){return globalEventBus;}
globalEventBus=new EventBus();attachDOMEventsToEventBus(globalEventBus);return globalEventBus;}
exports.attachDOMEventsToEventBus=attachDOMEventsToEventBus;exports.getGlobalEventBus=getGlobalEventBus;}));(function(root,factory){factory(root.pdfjsWebPDFFindController={},root.pdfjsWebUIUtils);}(this,function(exports,uiUtils){var scrollIntoView=uiUtils.scrollIntoView;var FindStates={FIND_FOUND:0,FIND_NOTFOUND:1,FIND_WRAPPED:2,FIND_PENDING:3};var FIND_SCROLL_OFFSET_TOP=-50;var FIND_SCROLL_OFFSET_LEFT=-400;var CHARACTERS_TO_NORMALIZE={'\u2018':'\'','\u2019':'\'','\u201A':'\'','\u201B':'\'','\u201C':'"','\u201D':'"','\u201E':'"','\u201F':'"','\u00BC':'1/4','\u00BD':'1/2','\u00BE':'3/4'};var PDFFindController=function PDFFindControllerClosure(){function PDFFindController(options){this.pdfViewer=options.pdfViewer||null;this.onUpdateResultsCount=null;this.onUpdateState=null;this.reset();var replace=Object.keys(CHARACTERS_TO_NORMALIZE).join('');this.normalizationRegex=new RegExp('['+replace+']','g');}
PDFFindController.prototype={reset:function PDFFindController_reset(){this.startedTextExtraction=false;this.extractTextPromises=[];this.pendingFindMatches=Object.create(null);this.active=false;this.pageContents=[];this.pageMatches=[];this.pageMatchesLength=null;this.matchCount=0;this.selected={pageIdx:-1,matchIdx:-1};this.offset={pageIdx:null,matchIdx:null};this.pagesToSearch=null;this.resumePageIdx=null;this.state=null;this.dirtyMatch=false;this.findTimeout=null;this.firstPagePromise=new Promise(function(resolve){this.resolveFirstPage=resolve;}.bind(this));},normalize:function PDFFindController_normalize(text){return text.replace(this.normalizationRegex,function(ch){return CHARACTERS_TO_NORMALIZE[ch];});},_prepareMatches:function PDFFindController_prepareMatches(matchesWithLength,matches,matchesLength){function isSubTerm(matchesWithLength,currentIndex){var currentElem,prevElem,nextElem;currentElem=matchesWithLength[currentIndex];nextElem=matchesWithLength[currentIndex+1];if(currentIndex<matchesWithLength.length-1&&currentElem.match===nextElem.match){currentElem.skipped=true;return true;}
for(var i=currentIndex-1;i>=0;i--){prevElem=matchesWithLength[i];if(prevElem.skipped){continue;}
if(prevElem.match+prevElem.matchLength<currentElem.match){break;}
if(prevElem.match+prevElem.matchLength>=currentElem.match+currentElem.matchLength){currentElem.skipped=true;return true;}}
return false;}
var i,len;matchesWithLength.sort(function(a,b){return a.match===b.match?a.matchLength-b.matchLength:a.match-b.match;});for(i=0,len=matchesWithLength.length;i<len;i++){if(isSubTerm(matchesWithLength,i)){continue;}
matches.push(matchesWithLength[i].match);matchesLength.push(matchesWithLength[i].matchLength);}},calcFindPhraseMatch:function PDFFindController_calcFindPhraseMatch(query,pageIndex,pageContent){var matches=[];var queryLen=query.length;var matchIdx=-queryLen;while(true){matchIdx=pageContent.indexOf(query,matchIdx+queryLen);if(matchIdx===-1){break;}
matches.push(matchIdx);}
this.pageMatches[pageIndex]=matches;},calcFindWordMatch:function PDFFindController_calcFindWordMatch(query,pageIndex,pageContent){var matchesWithLength=[];var queryArray=query.match(/\S+/g);var subquery,subqueryLen,matchIdx;for(var i=0,len=queryArray.length;i<len;i++){subquery=queryArray[i];subqueryLen=subquery.length;matchIdx=-subqueryLen;while(true){matchIdx=pageContent.indexOf(subquery,matchIdx+subqueryLen);if(matchIdx===-1){break;}
matchesWithLength.push({match:matchIdx,matchLength:subqueryLen,skipped:false});}}
if(!this.pageMatchesLength){this.pageMatchesLength=[];}
this.pageMatchesLength[pageIndex]=[];this.pageMatches[pageIndex]=[];this._prepareMatches(matchesWithLength,this.pageMatches[pageIndex],this.pageMatchesLength[pageIndex]);},calcFindMatch:function PDFFindController_calcFindMatch(pageIndex){var pageContent=this.normalize(this.pageContents[pageIndex]);var query=this.normalize(this.state.query);var caseSensitive=this.state.caseSensitive;var phraseSearch=this.state.phraseSearch;var queryLen=query.length;if(queryLen===0){return;}
if(!caseSensitive){pageContent=pageContent.toLowerCase();query=query.toLowerCase();}
if(phraseSearch){this.calcFindPhraseMatch(query,pageIndex,pageContent);}else{this.calcFindWordMatch(query,pageIndex,pageContent);}
this.updatePage(pageIndex);if(this.resumePageIdx===pageIndex){this.resumePageIdx=null;this.nextPageMatch();}
if(this.pageMatches[pageIndex].length>0){this.matchCount+=this.pageMatches[pageIndex].length;this.updateUIResultsCount();}},extractText:function PDFFindController_extractText(){if(this.startedTextExtraction){return;}
this.startedTextExtraction=true;this.pageContents=[];var extractTextPromisesResolves=[];var numPages=this.pdfViewer.pagesCount;for(var i=0;i<numPages;i++){this.extractTextPromises.push(new Promise(function(resolve){extractTextPromisesResolves.push(resolve);}));}
var self=this;function extractPageText(pageIndex){self.pdfViewer.getPageTextContent(pageIndex).then(function textContentResolved(textContent){var textItems=textContent.items;var str=[];for(var i=0,len=textItems.length;i<len;i++){str.push(textItems[i].str);}
self.pageContents.push(str.join(''));extractTextPromisesResolves[pageIndex](pageIndex);if(pageIndex+1<self.pdfViewer.pagesCount){extractPageText(pageIndex+1);}});}
extractPageText(0);},executeCommand:function PDFFindController_executeCommand(cmd,state){if(this.state===null||cmd!=='findagain'){this.dirtyMatch=true;}
this.state=state;this.updateUIState(FindStates.FIND_PENDING);this.firstPagePromise.then(function(){this.extractText();clearTimeout(this.findTimeout);if(cmd==='find'){this.findTimeout=setTimeout(this.nextMatch.bind(this),250);}else{this.nextMatch();}}.bind(this));},updatePage:function PDFFindController_updatePage(index){if(this.selected.pageIdx===index){this.pdfViewer.currentPageNumber=index+1;}
var page=this.pdfViewer.getPageView(index);if(page.textLayer){page.textLayer.updateMatches();}},nextMatch:function PDFFindController_nextMatch(){var previous=this.state.findPrevious;var currentPageIndex=this.pdfViewer.currentPageNumber-1;var numPages=this.pdfViewer.pagesCount;this.active=true;if(this.dirtyMatch){this.dirtyMatch=false;this.selected.pageIdx=this.selected.matchIdx=-1;this.offset.pageIdx=currentPageIndex;this.offset.matchIdx=null;this.hadMatch=false;this.resumePageIdx=null;this.pageMatches=[];this.matchCount=0;this.pageMatchesLength=null;var self=this;for(var i=0;i<numPages;i++){this.updatePage(i);if(!(i in this.pendingFindMatches)){this.pendingFindMatches[i]=true;this.extractTextPromises[i].then(function(pageIdx){delete self.pendingFindMatches[pageIdx];self.calcFindMatch(pageIdx);});}}}
if(this.state.query===''){this.updateUIState(FindStates.FIND_FOUND);return;}
if(this.resumePageIdx){return;}
var offset=this.offset;this.pagesToSearch=numPages;if(offset.matchIdx!==null){var numPageMatches=this.pageMatches[offset.pageIdx].length;if(!previous&&offset.matchIdx+1<numPageMatches||previous&&offset.matchIdx>0){this.hadMatch=true;offset.matchIdx=previous?offset.matchIdx-1:offset.matchIdx+1;this.updateMatch(true);return;}
this.advanceOffsetPage(previous);}
this.nextPageMatch();},matchesReady:function PDFFindController_matchesReady(matches){var offset=this.offset;var numMatches=matches.length;var previous=this.state.findPrevious;if(numMatches){this.hadMatch=true;offset.matchIdx=previous?numMatches-1:0;this.updateMatch(true);return true;}
this.advanceOffsetPage(previous);if(offset.wrapped){offset.matchIdx=null;if(this.pagesToSearch<0){this.updateMatch(false);return true;}}
return false;},updateMatchPosition:function PDFFindController_updateMatchPosition(pageIndex,index,elements,beginIdx){if(this.selected.matchIdx===index&&this.selected.pageIdx===pageIndex){var spot={top:FIND_SCROLL_OFFSET_TOP,left:FIND_SCROLL_OFFSET_LEFT};scrollIntoView(elements[beginIdx],spot,true);}},nextPageMatch:function PDFFindController_nextPageMatch(){if(this.resumePageIdx!==null){console.error('There can only be one pending page.');}
do{var pageIdx=this.offset.pageIdx;var matches=this.pageMatches[pageIdx];if(!matches){this.resumePageIdx=pageIdx;break;}}while(!this.matchesReady(matches));},advanceOffsetPage:function PDFFindController_advanceOffsetPage(previous){var offset=this.offset;var numPages=this.extractTextPromises.length;offset.pageIdx=previous?offset.pageIdx-1:offset.pageIdx+1;offset.matchIdx=null;this.pagesToSearch--;if(offset.pageIdx>=numPages||offset.pageIdx<0){offset.pageIdx=previous?numPages-1:0;offset.wrapped=true;}},updateMatch:function PDFFindController_updateMatch(found){var state=FindStates.FIND_NOTFOUND;var wrapped=this.offset.wrapped;this.offset.wrapped=false;if(found){var previousPage=this.selected.pageIdx;this.selected.pageIdx=this.offset.pageIdx;this.selected.matchIdx=this.offset.matchIdx;state=wrapped?FindStates.FIND_WRAPPED:FindStates.FIND_FOUND;if(previousPage!==-1&&previousPage!==this.selected.pageIdx){this.updatePage(previousPage);}}
this.updateUIState(state,this.state.findPrevious);if(this.selected.pageIdx!==-1){this.updatePage(this.selected.pageIdx);}},updateUIResultsCount:function PDFFindController_updateUIResultsCount(){if(this.onUpdateResultsCount){this.onUpdateResultsCount(this.matchCount);}},updateUIState:function PDFFindController_updateUIState(state,previous){if(this.onUpdateState){this.onUpdateState(state,previous,this.matchCount);}}};return PDFFindController;}();exports.FindStates=FindStates;exports.PDFFindController=PDFFindController;}));(function(root,factory){factory(root.pdfjsWebPDFHistory={},root.pdfjsWebDOMEvents);}(this,function(exports,domEvents){function PDFHistory(options){this.linkService=options.linkService;this.eventBus=options.eventBus||domEvents.getGlobalEventBus();this.initialized=false;this.initialDestination=null;this.initialBookmark=null;}
PDFHistory.prototype={initialize:function pdfHistoryInitialize(fingerprint){this.initialized=true;this.reInitialized=false;this.allowHashChange=true;this.historyUnlocked=true;this.isViewerInPresentationMode=false;this.previousHash=window.location.hash.substring(1);this.currentBookmark='';this.currentPage=0;this.updatePreviousBookmark=false;this.previousBookmark='';this.previousPage=0;this.nextHashParam='';this.fingerprint=fingerprint;this.currentUid=this.uid=0;this.current={};var state=window.history.state;if(this._isStateObjectDefined(state)){if(state.target.dest){this.initialDestination=state.target.dest;}else{this.initialBookmark=state.target.hash;}
this.currentUid=state.uid;this.uid=state.uid+1;this.current=state.target;}else{if(state&&state.fingerprint&&this.fingerprint!==state.fingerprint){this.reInitialized=true;}
this._pushOrReplaceState({fingerprint:this.fingerprint},true);}
var self=this;window.addEventListener('popstate',function pdfHistoryPopstate(evt){if(!self.historyUnlocked){return;}
if(evt.state){self._goTo(evt.state);return;}
if(self.uid===0){var previousParams=self.previousHash&&self.currentBookmark&&self.previousHash!==self.currentBookmark?{hash:self.currentBookmark,page:self.currentPage}:{page:1};replacePreviousHistoryState(previousParams,function(){updateHistoryWithCurrentHash();});}else{updateHistoryWithCurrentHash();}});function updateHistoryWithCurrentHash(){self.previousHash=window.location.hash.slice(1);self._pushToHistory({hash:self.previousHash},false,true);self._updatePreviousBookmark();}
function replacePreviousHistoryState(params,callback){self.historyUnlocked=false;self.allowHashChange=false;window.addEventListener('popstate',rewriteHistoryAfterBack);history.back();function rewriteHistoryAfterBack(){window.removeEventListener('popstate',rewriteHistoryAfterBack);window.addEventListener('popstate',rewriteHistoryAfterForward);self._pushToHistory(params,false,true);history.forward();}
function rewriteHistoryAfterForward(){window.removeEventListener('popstate',rewriteHistoryAfterForward);self.allowHashChange=true;self.historyUnlocked=true;callback();}}
function pdfHistoryBeforeUnload(){var previousParams=self._getPreviousParams(null,true);if(previousParams){var replacePrevious=!self.current.dest&&self.current.hash!==self.previousHash;self._pushToHistory(previousParams,false,replacePrevious);self._updatePreviousBookmark();}
window.removeEventListener('beforeunload',pdfHistoryBeforeUnload);}
window.addEventListener('beforeunload',pdfHistoryBeforeUnload);window.addEventListener('pageshow',function pdfHistoryPageShow(evt){window.addEventListener('beforeunload',pdfHistoryBeforeUnload);});self.eventBus.on('presentationmodechanged',function(e){self.isViewerInPresentationMode=e.active;});},clearHistoryState:function pdfHistory_clearHistoryState(){this._pushOrReplaceState(null,true);},_isStateObjectDefined:function pdfHistory_isStateObjectDefined(state){return state&&state.uid>=0&&state.fingerprint&&this.fingerprint===state.fingerprint&&state.target&&state.target.hash?true:false;},_pushOrReplaceState:function pdfHistory_pushOrReplaceState(stateObj,replace){if(replace){window.history.replaceState(stateObj,'',document.URL);}else{window.history.pushState(stateObj,'',document.URL);}},get isHashChangeUnlocked(){if(!this.initialized){return true;}
return this.allowHashChange;},_updatePreviousBookmark:function pdfHistory_updatePreviousBookmark(){if(this.updatePreviousBookmark&&this.currentBookmark&&this.currentPage){this.previousBookmark=this.currentBookmark;this.previousPage=this.currentPage;this.updatePreviousBookmark=false;}},updateCurrentBookmark:function pdfHistoryUpdateCurrentBookmark(bookmark,pageNum){if(this.initialized){this.currentBookmark=bookmark.substring(1);this.currentPage=pageNum|0;this._updatePreviousBookmark();}},updateNextHashParam:function pdfHistoryUpdateNextHashParam(param){if(this.initialized){this.nextHashParam=param;}},push:function pdfHistoryPush(params,isInitialBookmark){if(!(this.initialized&&this.historyUnlocked)){return;}
if(params.dest&&!params.hash){params.hash=this.current.hash&&this.current.dest&&this.current.dest===params.dest?this.current.hash:this.linkService.getDestinationHash(params.dest).split('#')[1];}
if(params.page){params.page|=0;}
if(isInitialBookmark){var target=window.history.state.target;if(!target){this._pushToHistory(params,false);this.previousHash=window.location.hash.substring(1);}
this.updatePreviousBookmark=this.nextHashParam?false:true;if(target){this._updatePreviousBookmark();}
return;}
if(this.nextHashParam){if(this.nextHashParam===params.hash){this.nextHashParam=null;this.updatePreviousBookmark=true;return;}
this.nextHashParam=null;}
if(params.hash){if(this.current.hash){if(this.current.hash!==params.hash){this._pushToHistory(params,true);}else{if(!this.current.page&&params.page){this._pushToHistory(params,false,true);}
this.updatePreviousBookmark=true;}}else{this._pushToHistory(params,true);}}else if(this.current.page&&params.page&&this.current.page!==params.page){this._pushToHistory(params,true);}},_getPreviousParams:function pdfHistory_getPreviousParams(onlyCheckPage,beforeUnload){if(!(this.currentBookmark&&this.currentPage)){return null;}else if(this.updatePreviousBookmark){this.updatePreviousBookmark=false;}
if(this.uid>0&&!(this.previousBookmark&&this.previousPage)){return null;}
if(!this.current.dest&&!onlyCheckPage||beforeUnload){if(this.previousBookmark===this.currentBookmark){return null;}}else if(this.current.page||onlyCheckPage){if(this.previousPage===this.currentPage){return null;}}else{return null;}
var params={hash:this.currentBookmark,page:this.currentPage};if(this.isViewerInPresentationMode){params.hash=null;}
return params;},_stateObj:function pdfHistory_stateObj(params){return{fingerprint:this.fingerprint,uid:this.uid,target:params};},_pushToHistory:function pdfHistory_pushToHistory(params,addPrevious,overwrite){if(!this.initialized){return;}
if(!params.hash&&params.page){params.hash='page='+params.page;}
if(addPrevious&&!overwrite){var previousParams=this._getPreviousParams();if(previousParams){var replacePrevious=!this.current.dest&&this.current.hash!==this.previousHash;this._pushToHistory(previousParams,false,replacePrevious);}}
this._pushOrReplaceState(this._stateObj(params),overwrite||this.uid===0);this.currentUid=this.uid++;this.current=params;this.updatePreviousBookmark=true;},_goTo:function pdfHistory_goTo(state){if(!(this.initialized&&this.historyUnlocked&&this._isStateObjectDefined(state))){return;}
if(!this.reInitialized&&state.uid<this.currentUid){var previousParams=this._getPreviousParams(true);if(previousParams){this._pushToHistory(this.current,false);this._pushToHistory(previousParams,false);this.currentUid=state.uid;window.history.back();return;}}
this.historyUnlocked=false;if(state.target.dest){this.linkService.navigateTo(state.target.dest);}else{this.linkService.setHash(state.target.hash);}
this.currentUid=state.uid;if(state.uid>this.uid){this.uid=state.uid;}
this.current=state.target;this.updatePreviousBookmark=true;var currentHash=window.location.hash.substring(1);if(this.previousHash!==currentHash){this.allowHashChange=false;}
this.previousHash=currentHash;this.historyUnlocked=true;},back:function pdfHistoryBack(){this.go(-1);},forward:function pdfHistoryForward(){this.go(1);},go:function pdfHistoryGo(direction){if(this.initialized&&this.historyUnlocked){var state=window.history.state;if(direction===-1&&state&&state.uid>0){window.history.back();}else if(direction===1&&state&&state.uid<this.uid-1){window.history.forward();}}}};exports.PDFHistory=PDFHistory;}));(function(root,factory){factory(root.pdfjsWebPDFLinkService={},root.pdfjsWebUIUtils,root.pdfjsWebDOMEvents);}(this,function(exports,uiUtils,domEvents){var parseQueryString=uiUtils.parseQueryString;var PageNumberRegExp=/^\d+$/;function isPageNumber(str){return PageNumberRegExp.test(str);}
var PDFLinkService=function PDFLinkServiceClosure(){function PDFLinkService(options){options=options||{};this.eventBus=options.eventBus||domEvents.getGlobalEventBus();this.baseUrl=null;this.pdfDocument=null;this.pdfViewer=null;this.pdfHistory=null;this._pagesRefCache=null;}
PDFLinkService.prototype={setDocument:function PDFLinkService_setDocument(pdfDocument,baseUrl){this.baseUrl=baseUrl;this.pdfDocument=pdfDocument;this._pagesRefCache=Object.create(null);},setViewer:function PDFLinkService_setViewer(pdfViewer){this.pdfViewer=pdfViewer;},setHistory:function PDFLinkService_setHistory(pdfHistory){this.pdfHistory=pdfHistory;},get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0;},get page(){return this.pdfViewer.currentPageNumber;},set page(value){this.pdfViewer.currentPageNumber=value;},navigateTo:function PDFLinkService_navigateTo(dest){var destString='';var self=this;var goToDestination=function(destRef){var pageNumber;if(destRef instanceof Object){pageNumber=self._cachedPageNumber(destRef);}else if((destRef|0)===destRef){pageNumber=destRef+1;}else{console.error('PDFLinkService_navigateTo: "'+destRef+'" is not a valid destination reference.');return;}
if(pageNumber){if(pageNumber<1||pageNumber>self.pagesCount){console.error('PDFLinkService_navigateTo: "'+pageNumber+'" is a non-existent page number.');return;}
self.pdfViewer.scrollPageIntoView({pageNumber:pageNumber,destArray:dest});if(self.pdfHistory){self.pdfHistory.push({dest:dest,hash:destString,page:pageNumber});}}else{self.pdfDocument.getPageIndex(destRef).then(function(pageIndex){self.cachePageRef(pageIndex+1,destRef);goToDestination(destRef);}).catch(function(){console.error('PDFLinkService_navigateTo: "'+destRef+'" is not a valid page reference.');});}};var destinationPromise;if(typeof dest==='string'){destString=dest;destinationPromise=this.pdfDocument.getDestination(dest);}else{destinationPromise=Promise.resolve(dest);}
destinationPromise.then(function(destination){dest=destination;if(!(destination instanceof Array)){console.error('PDFLinkService_navigateTo: "'+destination+'" is not a valid destination array.');return;}
goToDestination(destination[0]);});},getDestinationHash:function PDFLinkService_getDestinationHash(dest){if(typeof dest==='string'){return this.getAnchorUrl('#'+(isPageNumber(dest)?'nameddest=':'')+escape(dest));}
if(dest instanceof Array){var str=JSON.stringify(dest);return this.getAnchorUrl('#'+escape(str));}
return this.getAnchorUrl('');},getAnchorUrl:function PDFLinkService_getAnchorUrl(anchor){return(this.baseUrl||'')+anchor;},setHash:function PDFLinkService_setHash(hash){var pageNumber,dest;if(hash.indexOf('=')>=0){var params=parseQueryString(hash);if('search'in params){this.eventBus.dispatch('findfromurlhash',{source:this,query:params['search'].replace(/"/g,''),phraseSearch:params['phrase']==='true'});}
if('nameddest'in params){if(this.pdfHistory){this.pdfHistory.updateNextHashParam(params.nameddest);}
this.navigateTo(params.nameddest);return;}
if('page'in params){pageNumber=params.page|0||1;}
if('zoom'in params){var zoomArgs=params.zoom.split(',');var zoomArg=zoomArgs[0];var zoomArgNumber=parseFloat(zoomArg);if(zoomArg.indexOf('Fit')===-1){dest=[null,{name:'XYZ'},zoomArgs.length>1?zoomArgs[1]|0:null,zoomArgs.length>2?zoomArgs[2]|0:null,zoomArgNumber?zoomArgNumber / 100:zoomArg];}else{if(zoomArg==='Fit'||zoomArg==='FitB'){dest=[null,{name:zoomArg}];}else if(zoomArg==='FitH'||zoomArg==='FitBH'||(zoomArg==='FitV'||zoomArg==='FitBV')){dest=[null,{name:zoomArg},zoomArgs.length>1?zoomArgs[1]|0:null];}else if(zoomArg==='FitR'){if(zoomArgs.length!==5){console.error('PDFLinkService_setHash: '+'Not enough parameters for \'FitR\'.');}else{dest=[null,{name:zoomArg},zoomArgs[1]|0,zoomArgs[2]|0,zoomArgs[3]|0,zoomArgs[4]|0];}}else{console.error('PDFLinkService_setHash: \''+zoomArg+'\' is not a valid zoom value.');}}}
if(dest){this.pdfViewer.scrollPageIntoView({pageNumber:pageNumber||this.page,destArray:dest,allowNegativeOffset:true});}else if(pageNumber){this.page=pageNumber;}
if('pagemode'in params){this.eventBus.dispatch('pagemode',{source:this,mode:params.pagemode});}}else{if(isPageNumber(hash)&&hash<=this.pagesCount){console.warn('PDFLinkService_setHash: specifying a page number '+'directly after the hash symbol (#) is deprecated, '+'please use the "#page='+hash+'" form instead.');this.page=hash|0;}
dest=unescape(hash);try{dest=JSON.parse(dest);if(!(dest instanceof Array)){dest=dest.toString();}}catch(ex){}
if(typeof dest==='string'||isValidExplicitDestination(dest)){if(this.pdfHistory){this.pdfHistory.updateNextHashParam(dest);}
this.navigateTo(dest);return;}
console.error('PDFLinkService_setHash: \''+unescape(hash)+'\' is not a valid destination.');}},executeNamedAction:function PDFLinkService_executeNamedAction(action){switch(action){case'GoBack':if(this.pdfHistory){this.pdfHistory.back();}
break;case'GoForward':if(this.pdfHistory){this.pdfHistory.forward();}
break;case'NextPage':if(this.page<this.pagesCount){this.page++;}
break;case'PrevPage':if(this.page>1){this.page--;}
break;case'LastPage':this.page=this.pagesCount;break;case'FirstPage':this.page=1;break;default:break;}
this.eventBus.dispatch('namedaction',{source:this,action:action});},cachePageRef:function PDFLinkService_cachePageRef(pageNum,pageRef){var refStr=pageRef.num+' '+pageRef.gen+' R';this._pagesRefCache[refStr]=pageNum;},_cachedPageNumber:function PDFLinkService_cachedPageNumber(pageRef){var refStr=pageRef.num+' '+pageRef.gen+' R';return this._pagesRefCache&&this._pagesRefCache[refStr]||null;}};function isValidExplicitDestination(dest){if(!(dest instanceof Array)){return false;}
var destLength=dest.length,allowNull=true;if(destLength<2){return false;}
var page=dest[0];if(!(typeof page==='object'&&typeof page.num==='number'&&(page.num|0)===page.num&&typeof page.gen==='number'&&(page.gen|0)===page.gen)&&!(typeof page==='number'&&(page|0)===page&&page>=0)){return false;}
var zoom=dest[1];if(!(typeof zoom==='object'&&typeof zoom.name==='string')){return false;}
switch(zoom.name){case'XYZ':if(destLength!==5){return false;}
break;case'Fit':case'FitB':return destLength===2;case'FitH':case'FitBH':case'FitV':case'FitBV':if(destLength!==3){return false;}
break;case'FitR':if(destLength!==6){return false;}
allowNull=false;break;default:return false;}
for(var i=2;i<destLength;i++){var param=dest[i];if(!(typeof param==='number'||allowNull&&param===null)){return false;}}
return true;}
return PDFLinkService;}();var SimpleLinkService=function SimpleLinkServiceClosure(){function SimpleLinkService(){}
SimpleLinkService.prototype={get page(){return 0;},set page(value){},navigateTo:function(dest){},getDestinationHash:function(dest){return'#';},getAnchorUrl:function(hash){return'#';},setHash:function(hash){},executeNamedAction:function(action){},cachePageRef:function(pageNum,pageRef){}};return SimpleLinkService;}();exports.PDFLinkService=PDFLinkService;exports.SimpleLinkService=SimpleLinkService;}));(function(root,factory){factory(root.pdfjsWebPDFPageView={},root.pdfjsWebUIUtils,root.pdfjsWebPDFRenderingQueue,root.pdfjsWebDOMEvents,root.pdfjsWebPDFJS);}(this,function(exports,uiUtils,pdfRenderingQueue,domEvents,pdfjsLib){var CSS_UNITS=uiUtils.CSS_UNITS;var DEFAULT_SCALE=uiUtils.DEFAULT_SCALE;var getOutputScale=uiUtils.getOutputScale;var approximateFraction=uiUtils.approximateFraction;var roundToDivide=uiUtils.roundToDivide;var RendererType=uiUtils.RendererType;var RenderingStates=pdfRenderingQueue.RenderingStates;var TEXT_LAYER_RENDER_DELAY=200;var PDFPageView=function PDFPageViewClosure(){function PDFPageView(options){var container=options.container;var id=options.id;var scale=options.scale;var defaultViewport=options.defaultViewport;var renderingQueue=options.renderingQueue;var textLayerFactory=options.textLayerFactory;var annotationLayerFactory=options.annotationLayerFactory;var enhanceTextSelection=options.enhanceTextSelection||false;var renderInteractiveForms=options.renderInteractiveForms||false;this.id=id;this.renderingId='page'+id;this.pageLabel=null;this.rotation=0;this.scale=scale||DEFAULT_SCALE;this.viewport=defaultViewport;this.pdfPageRotate=defaultViewport.rotation;this.hasRestrictedScaling=false;this.enhanceTextSelection=enhanceTextSelection;this.renderInteractiveForms=renderInteractiveForms;this.eventBus=options.eventBus||domEvents.getGlobalEventBus();this.renderingQueue=renderingQueue;this.textLayerFactory=textLayerFactory;this.annotationLayerFactory=annotationLayerFactory;this.renderer=options.renderer||RendererType.CANVAS;this.paintTask=null;this.paintedViewport=null;this.renderingState=RenderingStates.INITIAL;this.resume=null;this.error=null;this.onBeforeDraw=null;this.onAfterDraw=null;this.textLayer=null;this.zoomLayer=null;this.annotationLayer=null;var div=document.createElement('div');div.id='pageContainer'+this.id;div.className='page';div.style.width=Math.floor(this.viewport.width)+'px';div.style.height=Math.floor(this.viewport.height)+'px';div.setAttribute('data-page-number',this.id);this.div=div;container.appendChild(div);}
PDFPageView.prototype={setPdfPage:function PDFPageView_setPdfPage(pdfPage){this.pdfPage=pdfPage;this.pdfPageRotate=pdfPage.rotate;var totalRotation=(this.rotation+this.pdfPageRotate)%360;this.viewport=pdfPage.getViewport(this.scale*CSS_UNITS,totalRotation);this.stats=pdfPage.stats;this.reset();},destroy:function PDFPageView_destroy(){this.zoomLayer=null;this.reset();if(this.pdfPage){this.pdfPage.cleanup();}},reset:function PDFPageView_reset(keepZoomLayer,keepAnnotations){this.cancelRendering();var div=this.div;div.style.width=Math.floor(this.viewport.width)+'px';div.style.height=Math.floor(this.viewport.height)+'px';var childNodes=div.childNodes;var currentZoomLayerNode=keepZoomLayer&&this.zoomLayer||null;var currentAnnotationNode=keepAnnotations&&this.annotationLayer&&this.annotationLayer.div||null;for(var i=childNodes.length-1;i>=0;i--){var node=childNodes[i];if(currentZoomLayerNode===node||currentAnnotationNode===node){continue;}
div.removeChild(node);}
div.removeAttribute('data-loaded');if(currentAnnotationNode){this.annotationLayer.hide();}else{this.annotationLayer=null;}
if(this.canvas&&!currentZoomLayerNode){this.canvas.width=0;this.canvas.height=0;delete this.canvas;}
if(this.svg){delete this.svg;}
if(!currentZoomLayerNode){this.paintedViewport=null;}
this.loadingIconDiv=document.createElement('div');this.loadingIconDiv.className='loadingIcon';div.appendChild(this.loadingIconDiv);},update:function PDFPageView_update(scale,rotation){this.scale=scale||this.scale;if(typeof rotation!=='undefined'){this.rotation=rotation;}
var totalRotation=(this.rotation+this.pdfPageRotate)%360;this.viewport=this.viewport.clone({scale:this.scale*CSS_UNITS,rotation:totalRotation});if(this.svg){this.cssTransform(this.svg,true);this.eventBus.dispatch('pagerendered',{source:this,pageNumber:this.id,cssTransform:true});return;}
var isScalingRestricted=false;if(this.canvas&&pdfjsLib.PDFJS.maxCanvasPixels>0){var outputScale=this.outputScale;if((Math.floor(this.viewport.width)*outputScale.sx|0)*(Math.floor(this.viewport.height)*outputScale.sy|0)>pdfjsLib.PDFJS.maxCanvasPixels){isScalingRestricted=true;}}
if(this.canvas){if(pdfjsLib.PDFJS.useOnlyCssZoom||this.hasRestrictedScaling&&isScalingRestricted){this.cssTransform(this.canvas,true);this.eventBus.dispatch('pagerendered',{source:this,pageNumber:this.id,cssTransform:true});return;}
if(!this.zoomLayer){this.zoomLayer=this.canvas.parentNode;this.zoomLayer.style.position='absolute';}}
if(this.zoomLayer){this.cssTransform(this.zoomLayer.firstChild);}
this.reset(true,true);},cancelRendering:function PDFPageView_cancelRendering(){if(this.paintTask){this.paintTask.cancel();this.paintTask=null;}
this.renderingState=RenderingStates.INITIAL;this.resume=null;if(this.textLayer){this.textLayer.cancel();this.textLayer=null;}},updatePosition:function PDFPageView_updatePosition(){if(this.textLayer){this.textLayer.render(TEXT_LAYER_RENDER_DELAY);}},cssTransform:function PDFPageView_transform(target,redrawAnnotations){var CustomStyle=pdfjsLib.CustomStyle;var width=this.viewport.width;var height=this.viewport.height;var div=this.div;target.style.width=target.parentNode.style.width=div.style.width=Math.floor(width)+'px';target.style.height=target.parentNode.style.height=div.style.height=Math.floor(height)+'px';var relativeRotation=this.viewport.rotation-this.paintedViewport.rotation;var absRotation=Math.abs(relativeRotation);var scaleX=1,scaleY=1;if(absRotation===90||absRotation===270){scaleX=height / width;scaleY=width / height;}
var cssTransform='rotate('+relativeRotation+'deg) '+'scale('+scaleX+','+scaleY+')';CustomStyle.setProp('transform',target,cssTransform);if(this.textLayer){var textLayerViewport=this.textLayer.viewport;var textRelativeRotation=this.viewport.rotation-textLayerViewport.rotation;var textAbsRotation=Math.abs(textRelativeRotation);var scale=width / textLayerViewport.width;if(textAbsRotation===90||textAbsRotation===270){scale=width / textLayerViewport.height;}
var textLayerDiv=this.textLayer.textLayerDiv;var transX,transY;switch(textAbsRotation){case 0:transX=transY=0;break;case 90:transX=0;transY='-'+textLayerDiv.style.height;break;case 180:transX='-'+textLayerDiv.style.width;transY='-'+textLayerDiv.style.height;break;case 270:transX='-'+textLayerDiv.style.width;transY=0;break;default:console.error('Bad rotation value.');break;}
CustomStyle.setProp('transform',textLayerDiv,'rotate('+textAbsRotation+'deg) '+'scale('+scale+', '+scale+') '+'translate('+transX+', '+transY+')');CustomStyle.setProp('transformOrigin',textLayerDiv,'0% 0%');}
if(redrawAnnotations&&this.annotationLayer){this.annotationLayer.render(this.viewport,'display');}},get width(){return this.viewport.width;},get height(){return this.viewport.height;},getPagePoint:function PDFPageView_getPagePoint(x,y){return this.viewport.convertToPdfPoint(x,y);},draw:function PDFPageView_draw(){if(this.renderingState!==RenderingStates.INITIAL){console.error('Must be in new state before drawing');this.reset();}
this.renderingState=RenderingStates.RUNNING;var self=this;var pdfPage=this.pdfPage;var viewport=this.viewport;var div=this.div;var canvasWrapper=document.createElement('div');canvasWrapper.style.width=div.style.width;canvasWrapper.style.height=div.style.height;canvasWrapper.classList.add('canvasWrapper');if(this.annotationLayer&&this.annotationLayer.div){div.insertBefore(canvasWrapper,this.annotationLayer.div);}else{div.appendChild(canvasWrapper);}
var textLayerDiv=null;var textLayer=null;if(this.textLayerFactory){textLayerDiv=document.createElement('div');textLayerDiv.className='textLayer';textLayerDiv.style.width=canvasWrapper.style.width;textLayerDiv.style.height=canvasWrapper.style.height;if(this.annotationLayer&&this.annotationLayer.div){div.insertBefore(textLayerDiv,this.annotationLayer.div);}else{div.appendChild(textLayerDiv);}
textLayer=this.textLayerFactory.createTextLayerBuilder(textLayerDiv,this.id-1,this.viewport,this.enhanceTextSelection);}
this.textLayer=textLayer;var renderContinueCallback=null;if(this.renderingQueue){renderContinueCallback=function renderContinueCallback(cont){if(!self.renderingQueue.isHighestPriority(self)){self.renderingState=RenderingStates.PAUSED;self.resume=function resumeCallback(){self.renderingState=RenderingStates.RUNNING;cont();};return;}
cont();};}
var finishPaintTask=function finishPaintTask(error){if(paintTask===self.paintTask){self.paintTask=null;}
if(error==='cancelled'){self.error=null;return Promise.resolve(undefined);}
self.renderingState=RenderingStates.FINISHED;if(self.loadingIconDiv){div.removeChild(self.loadingIconDiv);delete self.loadingIconDiv;}
if(self.zoomLayer){var zoomLayerCanvas=self.zoomLayer.firstChild;zoomLayerCanvas.width=0;zoomLayerCanvas.height=0;if(div.contains(self.zoomLayer)){div.removeChild(self.zoomLayer);}
self.zoomLayer=null;}
self.error=error;self.stats=pdfPage.stats;if(self.onAfterDraw){self.onAfterDraw();}
self.eventBus.dispatch('pagerendered',{source:self,pageNumber:self.id,cssTransform:false});if(error){return Promise.reject(error);}
return Promise.resolve(undefined);};var paintTask=this.renderer===RendererType.SVG?this.paintOnSvg(canvasWrapper):this.paintOnCanvas(canvasWrapper);paintTask.onRenderContinue=renderContinueCallback;this.paintTask=paintTask;var resultPromise=paintTask.promise.then(function(){return finishPaintTask(null).then(function(){if(textLayer){pdfPage.getTextContent({normalizeWhitespace:true}).then(function textContentResolved(textContent){textLayer.setTextContent(textContent);textLayer.render(TEXT_LAYER_RENDER_DELAY);});}});},function(reason){return finishPaintTask(reason);});if(this.annotationLayerFactory){if(!this.annotationLayer){this.annotationLayer=this.annotationLayerFactory.createAnnotationLayerBuilder(div,pdfPage,this.renderInteractiveForms);}
this.annotationLayer.render(this.viewport,'display');}
div.setAttribute('data-loaded',true);if(this.onBeforeDraw){this.onBeforeDraw();}
return resultPromise;},paintOnCanvas:function(canvasWrapper){var resolveRenderPromise,rejectRenderPromise;var promise=new Promise(function(resolve,reject){resolveRenderPromise=resolve;rejectRenderPromise=reject;});var result={promise:promise,onRenderContinue:function(cont){cont();},cancel:function(){renderTask.cancel();}};var self=this;var pdfPage=this.pdfPage;var viewport=this.viewport;var canvas=document.createElement('canvas');canvas.id='page'+this.id;canvas.setAttribute('hidden','hidden');var isCanvasHidden=true;var showCanvas=function(){if(isCanvasHidden){canvas.removeAttribute('hidden');isCanvasHidden=false;}};canvasWrapper.appendChild(canvas);this.canvas=canvas;canvas.mozOpaque=true;var ctx=canvas.getContext('2d',{alpha:false});var outputScale=getOutputScale(ctx);this.outputScale=outputScale;if(pdfjsLib.PDFJS.useOnlyCssZoom){var actualSizeViewport=viewport.clone({scale:CSS_UNITS});outputScale.sx*=actualSizeViewport.width / viewport.width;outputScale.sy*=actualSizeViewport.height / viewport.height;outputScale.scaled=true;}
if(pdfjsLib.PDFJS.maxCanvasPixels>0){var pixelsInViewport=viewport.width*viewport.height;var maxScale=Math.sqrt(pdfjsLib.PDFJS.maxCanvasPixels / pixelsInViewport);if(outputScale.sx>maxScale||outputScale.sy>maxScale){outputScale.sx=maxScale;outputScale.sy=maxScale;outputScale.scaled=true;this.hasRestrictedScaling=true;}else{this.hasRestrictedScaling=false;}}
var sfx=approximateFraction(outputScale.sx);var sfy=approximateFraction(outputScale.sy);canvas.width=roundToDivide(viewport.width*outputScale.sx,sfx[0]);canvas.height=roundToDivide(viewport.height*outputScale.sy,sfy[0]);canvas.style.width=roundToDivide(viewport.width,sfx[1])+'px';canvas.style.height=roundToDivide(viewport.height,sfy[1])+'px';this.paintedViewport=viewport;var transform=!outputScale.scaled?null:[outputScale.sx,0,0,outputScale.sy,0,0];var renderContext={canvasContext:ctx,transform:transform,viewport:this.viewport,renderInteractiveForms:this.renderInteractiveForms};var renderTask=this.pdfPage.render(renderContext);renderTask.onContinue=function(cont){showCanvas();if(result.onRenderContinue){result.onRenderContinue(cont);}else{cont();}};renderTask.promise.then(function pdfPageRenderCallback(){showCanvas();resolveRenderPromise(undefined);},function pdfPageRenderError(error){showCanvas();rejectRenderPromise(error);});return result;},paintOnSvg:function PDFPageView_paintOnSvg(wrapper){var cancelled=false;var ensureNotCancelled=function(){if(cancelled){throw'cancelled';}};var self=this;var pdfPage=this.pdfPage;var SVGGraphics=pdfjsLib.SVGGraphics;var actualSizeViewport=this.viewport.clone({scale:CSS_UNITS});var promise=pdfPage.getOperatorList().then(function(opList){ensureNotCancelled();var svgGfx=new SVGGraphics(pdfPage.commonObjs,pdfPage.objs);return svgGfx.getSVG(opList,actualSizeViewport).then(function(svg){ensureNotCancelled();self.svg=svg;self.paintedViewport=actualSizeViewport;svg.style.width=wrapper.style.width;svg.style.height=wrapper.style.height;self.renderingState=RenderingStates.FINISHED;wrapper.appendChild(svg);});});return{promise:promise,onRenderContinue:function(cont){cont();},cancel:function(){cancelled=true;}};},setPageLabel:function PDFView_setPageLabel(label){this.pageLabel=typeof label==='string'?label:null;if(this.pageLabel!==null){this.div.setAttribute('data-page-label',this.pageLabel);}else{this.div.removeAttribute('data-page-label');}}};return PDFPageView;}();exports.PDFPageView=PDFPageView;}));(function(root,factory){factory(root.pdfjsWebTextLayerBuilder={},root.pdfjsWebDOMEvents,root.pdfjsWebPDFJS);}(this,function(exports,domEvents,pdfjsLib){var EXPAND_DIVS_TIMEOUT=300;var TextLayerBuilder=function TextLayerBuilderClosure(){function TextLayerBuilder(options){this.textLayerDiv=options.textLayerDiv;this.eventBus=options.eventBus||domEvents.getGlobalEventBus();this.textContent=null;this.renderingDone=false;this.pageIdx=options.pageIndex;this.pageNumber=this.pageIdx+1;this.matches=[];this.viewport=options.viewport;this.textDivs=[];this.findController=options.findController||null;this.textLayerRenderTask=null;this.enhanceTextSelection=options.enhanceTextSelection;this._bindMouse();}
TextLayerBuilder.prototype={_finishRendering:function TextLayerBuilder_finishRendering(){this.renderingDone=true;if(!this.enhanceTextSelection){var endOfContent=document.createElement('div');endOfContent.className='endOfContent';this.textLayerDiv.appendChild(endOfContent);}
this.eventBus.dispatch('textlayerrendered',{source:this,pageNumber:this.pageNumber,numTextDivs:this.textDivs.length});},render:function TextLayerBuilder_render(timeout){if(!this.textContent||this.renderingDone){return;}
this.cancel();this.textDivs=[];var textLayerFrag=document.createDocumentFragment();this.textLayerRenderTask=pdfjsLib.renderTextLayer({textContent:this.textContent,container:textLayerFrag,viewport:this.viewport,textDivs:this.textDivs,timeout:timeout,enhanceTextSelection:this.enhanceTextSelection});this.textLayerRenderTask.promise.then(function(){this.textLayerDiv.appendChild(textLayerFrag);this._finishRendering();this.updateMatches();}.bind(this),function(reason){});},cancel:function TextLayerBuilder_cancel(){if(this.textLayerRenderTask){this.textLayerRenderTask.cancel();this.textLayerRenderTask=null;}},setTextContent:function TextLayerBuilder_setTextContent(textContent){this.cancel();this.textContent=textContent;},convertMatches:function TextLayerBuilder_convertMatches(matches,matchesLength){var i=0;var iIndex=0;var bidiTexts=this.textContent.items;var end=bidiTexts.length-1;var queryLen=this.findController===null?0:this.findController.state.query.length;var ret=[];if(!matches){return ret;}
for(var m=0,len=matches.length;m<len;m++){var matchIdx=matches[m];while(i!==end&&matchIdx>=iIndex+bidiTexts[i].str.length){iIndex+=bidiTexts[i].str.length;i++;}
if(i===bidiTexts.length){console.error('Could not find a matching mapping');}
var match={begin:{divIdx:i,offset:matchIdx-iIndex}};if(matchesLength){matchIdx+=matchesLength[m];}else{matchIdx+=queryLen;}
while(i!==end&&matchIdx>iIndex+bidiTexts[i].str.length){iIndex+=bidiTexts[i].str.length;i++;}
match.end={divIdx:i,offset:matchIdx-iIndex};ret.push(match);}
return ret;},renderMatches:function TextLayerBuilder_renderMatches(matches){if(matches.length===0){return;}
var bidiTexts=this.textContent.items;var textDivs=this.textDivs;var prevEnd=null;var pageIdx=this.pageIdx;var isSelectedPage=this.findController===null?false:pageIdx===this.findController.selected.pageIdx;var selectedMatchIdx=this.findController===null?-1:this.findController.selected.matchIdx;var highlightAll=this.findController===null?false:this.findController.state.highlightAll;var infinity={divIdx:-1,offset:undefined};function beginText(begin,className){var divIdx=begin.divIdx;textDivs[divIdx].textContent='';appendTextToDiv(divIdx,0,begin.offset,className);}
function appendTextToDiv(divIdx,fromOffset,toOffset,className){var div=textDivs[divIdx];var content=bidiTexts[divIdx].str.substring(fromOffset,toOffset);var node=document.createTextNode(content);if(className){var span=document.createElement('span');span.className=className;span.appendChild(node);div.appendChild(span);return;}
div.appendChild(node);}
var i0=selectedMatchIdx,i1=i0+1;if(highlightAll){i0=0;i1=matches.length;}else if(!isSelectedPage){return;}
for(var i=i0;i<i1;i++){var match=matches[i];var begin=match.begin;var end=match.end;var isSelected=isSelectedPage&&i===selectedMatchIdx;var highlightSuffix=isSelected?' selected':'';if(this.findController){this.findController.updateMatchPosition(pageIdx,i,textDivs,begin.divIdx);}
if(!prevEnd||begin.divIdx!==prevEnd.divIdx){if(prevEnd!==null){appendTextToDiv(prevEnd.divIdx,prevEnd.offset,infinity.offset);}
beginText(begin);}else{appendTextToDiv(prevEnd.divIdx,prevEnd.offset,begin.offset);}
if(begin.divIdx===end.divIdx){appendTextToDiv(begin.divIdx,begin.offset,end.offset,'highlight'+highlightSuffix);}else{appendTextToDiv(begin.divIdx,begin.offset,infinity.offset,'highlight begin'+highlightSuffix);for(var n0=begin.divIdx+1,n1=end.divIdx;n0<n1;n0++){textDivs[n0].className='highlight middle'+highlightSuffix;}
beginText(end,'highlight end'+highlightSuffix);}
prevEnd=end;}
if(prevEnd){appendTextToDiv(prevEnd.divIdx,prevEnd.offset,infinity.offset);}},updateMatches:function TextLayerBuilder_updateMatches(){if(!this.renderingDone){return;}
var matches=this.matches;var textDivs=this.textDivs;var bidiTexts=this.textContent.items;var clearedUntilDivIdx=-1;for(var i=0,len=matches.length;i<len;i++){var match=matches[i];var begin=Math.max(clearedUntilDivIdx,match.begin.divIdx);for(var n=begin,end=match.end.divIdx;n<=end;n++){var div=textDivs[n];div.textContent=bidiTexts[n].str;div.className='';}
clearedUntilDivIdx=match.end.divIdx+1;}
if(this.findController===null||!this.findController.active){return;}
var pageMatches,pageMatchesLength;if(this.findController!==null){pageMatches=this.findController.pageMatches[this.pageIdx]||null;pageMatchesLength=this.findController.pageMatchesLength?this.findController.pageMatchesLength[this.pageIdx]||null:null;}
this.matches=this.convertMatches(pageMatches,pageMatchesLength);this.renderMatches(this.matches);},_bindMouse:function TextLayerBuilder_bindMouse(){var div=this.textLayerDiv;var self=this;var expandDivsTimer=null;div.addEventListener('mousedown',function(e){if(self.enhanceTextSelection&&self.textLayerRenderTask){self.textLayerRenderTask.expandTextDivs(true);if(expandDivsTimer){clearTimeout(expandDivsTimer);expandDivsTimer=null;}
return;}
var end=div.querySelector('.endOfContent');if(!end){return;}
var adjustTop=e.target!==div;adjustTop=adjustTop&&window.getComputedStyle(end).getPropertyValue('-moz-user-select')!=='none';if(adjustTop){var divBounds=div.getBoundingClientRect();var r=Math.max(0,(e.pageY-divBounds.top)/ divBounds.height);end.style.top=(r*100).toFixed(2)+'%';}
end.classList.add('active');});div.addEventListener('mouseup',function(e){if(self.enhanceTextSelection&&self.textLayerRenderTask){expandDivsTimer=setTimeout(function(){if(self.textLayerRenderTask){self.textLayerRenderTask.expandTextDivs(false);}
expandDivsTimer=null;},EXPAND_DIVS_TIMEOUT);return;}
var end=div.querySelector('.endOfContent');if(!end){return;}
end.style.top='';end.classList.remove('active');});}};return TextLayerBuilder;}();function DefaultTextLayerFactory(){}
DefaultTextLayerFactory.prototype={createTextLayerBuilder:function(textLayerDiv,pageIndex,viewport,enhanceTextSelection){return new TextLayerBuilder({textLayerDiv:textLayerDiv,pageIndex:pageIndex,viewport:viewport,enhanceTextSelection:enhanceTextSelection});}};exports.TextLayerBuilder=TextLayerBuilder;exports.DefaultTextLayerFactory=DefaultTextLayerFactory;}));(function(root,factory){factory(root.pdfjsWebAnnotationLayerBuilder={},root.pdfjsWebUIUtils,root.pdfjsWebPDFLinkService,root.pdfjsWebPDFJS);}(this,function(exports,uiUtils,pdfLinkService,pdfjsLib){var mozL10n=uiUtils.mozL10n;var SimpleLinkService=pdfLinkService.SimpleLinkService;var AnnotationLayerBuilder=function AnnotationLayerBuilderClosure(){function AnnotationLayerBuilder(options){this.pageDiv=options.pageDiv;this.pdfPage=options.pdfPage;this.renderInteractiveForms=options.renderInteractiveForms;this.linkService=options.linkService;this.downloadManager=options.downloadManager;this.div=null;}
AnnotationLayerBuilder.prototype={render:function AnnotationLayerBuilder_render(viewport,intent){var self=this;var parameters={intent:intent===undefined?'display':intent};this.pdfPage.getAnnotations(parameters).then(function(annotations){viewport=viewport.clone({dontFlip:true});parameters={viewport:viewport,div:self.div,annotations:annotations,page:self.pdfPage,renderInteractiveForms:self.renderInteractiveForms,linkService:self.linkService,downloadManager:self.downloadManager};if(self.div){pdfjsLib.AnnotationLayer.update(parameters);}else{if(annotations.length===0){return;}
self.div=document.createElement('div');self.div.className='annotationLayer';self.pageDiv.appendChild(self.div);parameters.div=self.div;pdfjsLib.AnnotationLayer.render(parameters);if(typeof mozL10n!=='undefined'){mozL10n.translate(self.div);}}});},hide:function AnnotationLayerBuilder_hide(){if(!this.div){return;}
this.div.setAttribute('hidden','true');}};return AnnotationLayerBuilder;}();function DefaultAnnotationLayerFactory(){}
DefaultAnnotationLayerFactory.prototype={createAnnotationLayerBuilder:function(pageDiv,pdfPage,renderInteractiveForms){return new AnnotationLayerBuilder({pageDiv:pageDiv,pdfPage:pdfPage,renderInteractiveForms:renderInteractiveForms,linkService:new SimpleLinkService()});}};exports.AnnotationLayerBuilder=AnnotationLayerBuilder;exports.DefaultAnnotationLayerFactory=DefaultAnnotationLayerFactory;}));(function(root,factory){factory(root.pdfjsWebPDFViewer={},root.pdfjsWebUIUtils,root.pdfjsWebPDFPageView,root.pdfjsWebPDFRenderingQueue,root.pdfjsWebTextLayerBuilder,root.pdfjsWebAnnotationLayerBuilder,root.pdfjsWebPDFLinkService,root.pdfjsWebDOMEvents,root.pdfjsWebPDFJS);}(this,function(exports,uiUtils,pdfPageView,pdfRenderingQueue,textLayerBuilder,annotationLayerBuilder,pdfLinkService,domEvents,pdfjsLib){var UNKNOWN_SCALE=uiUtils.UNKNOWN_SCALE;var SCROLLBAR_PADDING=uiUtils.SCROLLBAR_PADDING;var VERTICAL_PADDING=uiUtils.VERTICAL_PADDING;var MAX_AUTO_SCALE=uiUtils.MAX_AUTO_SCALE;var CSS_UNITS=uiUtils.CSS_UNITS;var DEFAULT_SCALE=uiUtils.DEFAULT_SCALE;var DEFAULT_SCALE_VALUE=uiUtils.DEFAULT_SCALE_VALUE;var RendererType=uiUtils.RendererType;var scrollIntoView=uiUtils.scrollIntoView;var watchScroll=uiUtils.watchScroll;var getVisibleElements=uiUtils.getVisibleElements;var PDFPageView=pdfPageView.PDFPageView;var RenderingStates=pdfRenderingQueue.RenderingStates;var PDFRenderingQueue=pdfRenderingQueue.PDFRenderingQueue;var TextLayerBuilder=textLayerBuilder.TextLayerBuilder;var AnnotationLayerBuilder=annotationLayerBuilder.AnnotationLayerBuilder;var SimpleLinkService=pdfLinkService.SimpleLinkService;var PresentationModeState={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};var DEFAULT_CACHE_SIZE=10;var PDFViewer=function pdfViewer(){function PDFPageViewBuffer(size){var data=[];this.push=function cachePush(view){var i=data.indexOf(view);if(i>=0){data.splice(i,1);}
data.push(view);if(data.length>size){data.shift().destroy();}};this.resize=function(newSize){size=newSize;while(data.length>size){data.shift().destroy();}};}
function isSameScale(oldScale,newScale){if(newScale===oldScale){return true;}
if(Math.abs(newScale-oldScale)<1e-15){return true;}
return false;}
function PDFViewer(options){this.container=options.container;this.viewer=options.viewer||options.container.firstElementChild;this.eventBus=options.eventBus||domEvents.getGlobalEventBus();this.linkService=options.linkService||new SimpleLinkService();this.downloadManager=options.downloadManager||null;this.removePageBorders=options.removePageBorders||false;this.enhanceTextSelection=options.enhanceTextSelection||false;this.renderInteractiveForms=options.renderInteractiveForms||false;this.renderer=options.renderer||RendererType.CANVAS;this.defaultRenderingQueue=!options.renderingQueue;if(this.defaultRenderingQueue){this.renderingQueue=new PDFRenderingQueue();this.renderingQueue.setViewer(this);}else{this.renderingQueue=options.renderingQueue;}
this.scroll=watchScroll(this.container,this._scrollUpdate.bind(this));this.presentationModeState=PresentationModeState.UNKNOWN;this._resetView();if(this.removePageBorders){this.viewer.classList.add('removePageBorders');}}
PDFViewer.prototype={get pagesCount(){return this._pages.length;},getPageView:function(index){return this._pages[index];},get pageViewsReady(){return this._pageViewsReady;},get currentPageNumber(){return this._currentPageNumber;},set currentPageNumber(val){if((val|0)!==val){throw new Error('Invalid page number.');}
if(!this.pdfDocument){this._currentPageNumber=val;return;}
this._setCurrentPageNumber(val,true);},_setCurrentPageNumber:function PDFViewer_setCurrentPageNumber(val,resetCurrentPageView){if(this._currentPageNumber===val){if(resetCurrentPageView){this._resetCurrentPageView();}
return;}
if(!(0<val&&val<=this.pagesCount)){console.error('PDFViewer_setCurrentPageNumber: "'+val+'" is out of bounds.');return;}
var arg={source:this,pageNumber:val,pageLabel:this._pageLabels&&this._pageLabels[val-1]};this._currentPageNumber=val;this.eventBus.dispatch('pagechanging',arg);this.eventBus.dispatch('pagechange',arg);if(resetCurrentPageView){this._resetCurrentPageView();}},get currentPageLabel(){return this._pageLabels&&this._pageLabels[this._currentPageNumber-1];},set currentPageLabel(val){var pageNumber=val|0;if(this._pageLabels){var i=this._pageLabels.indexOf(val);if(i>=0){pageNumber=i+1;}}
this.currentPageNumber=pageNumber;},get currentScale(){return this._currentScale!==UNKNOWN_SCALE?this._currentScale:DEFAULT_SCALE;},set currentScale(val){if(isNaN(val)){throw new Error('Invalid numeric scale');}
if(!this.pdfDocument){this._currentScale=val;this._currentScaleValue=val!==UNKNOWN_SCALE?val.toString():null;return;}
this._setScale(val,false);},get currentScaleValue(){return this._currentScaleValue;},set currentScaleValue(val){if(!this.pdfDocument){this._currentScale=isNaN(val)?UNKNOWN_SCALE:val;this._currentScaleValue=val.toString();return;}
this._setScale(val,false);},get pagesRotation(){return this._pagesRotation;},set pagesRotation(rotation){if(!(typeof rotation==='number'&&rotation%90===0)){throw new Error('Invalid pages rotation angle.');}
this._pagesRotation=rotation;if(!this.pdfDocument){return;}
for(var i=0,l=this._pages.length;i<l;i++){var pageView=this._pages[i];pageView.update(pageView.scale,rotation);}
this._setScale(this._currentScaleValue,true);if(this.defaultRenderingQueue){this.update();}},setDocument:function(pdfDocument){if(this.pdfDocument){this._cancelRendering();this._resetView();}
this.pdfDocument=pdfDocument;if(!pdfDocument){return;}
var pagesCount=pdfDocument.numPages;var self=this;var resolvePagesPromise;var pagesPromise=new Promise(function(resolve){resolvePagesPromise=resolve;});this.pagesPromise=pagesPromise;pagesPromise.then(function(){self._pageViewsReady=true;self.eventBus.dispatch('pagesloaded',{source:self,pagesCount:pagesCount});});var isOnePageRenderedResolved=false;var resolveOnePageRendered=null;var onePageRendered=new Promise(function(resolve){resolveOnePageRendered=resolve;});this.onePageRendered=onePageRendered;var bindOnAfterAndBeforeDraw=function(pageView){pageView.onBeforeDraw=function pdfViewLoadOnBeforeDraw(){self._buffer.push(this);};pageView.onAfterDraw=function pdfViewLoadOnAfterDraw(){if(!isOnePageRenderedResolved){isOnePageRenderedResolved=true;resolveOnePageRendered();}};};var firstPagePromise=pdfDocument.getPage(1);this.firstPagePromise=firstPagePromise;return firstPagePromise.then(function(pdfPage){var scale=this.currentScale;var viewport=pdfPage.getViewport(scale*CSS_UNITS);for(var pageNum=1;pageNum<=pagesCount;++pageNum){var textLayerFactory=null;if(!pdfjsLib.PDFJS.disableTextLayer){textLayerFactory=this;}
var pageView=new PDFPageView({container:this.viewer,eventBus:this.eventBus,id:pageNum,scale:scale,defaultViewport:viewport.clone(),renderingQueue:this.renderingQueue,textLayerFactory:textLayerFactory,annotationLayerFactory:this,enhanceTextSelection:this.enhanceTextSelection,renderInteractiveForms:this.renderInteractiveForms,renderer:this.renderer});bindOnAfterAndBeforeDraw(pageView);this._pages.push(pageView);}
var linkService=this.linkService;onePageRendered.then(function(){if(!pdfjsLib.PDFJS.disableAutoFetch){var getPagesLeft=pagesCount;for(var pageNum=1;pageNum<=pagesCount;++pageNum){pdfDocument.getPage(pageNum).then(function(pageNum,pdfPage){var pageView=self._pages[pageNum-1];if(!pageView.pdfPage){pageView.setPdfPage(pdfPage);}
linkService.cachePageRef(pageNum,pdfPage.ref);getPagesLeft--;if(!getPagesLeft){resolvePagesPromise();}}.bind(null,pageNum));}}else{resolvePagesPromise();}});self.eventBus.dispatch('pagesinit',{source:self});if(this.defaultRenderingQueue){this.update();}
if(this.findController){this.findController.resolveFirstPage();}}.bind(this));},setPageLabels:function PDFViewer_setPageLabels(labels){if(!this.pdfDocument){return;}
if(!labels){this._pageLabels=null;}else if(!(labels instanceof Array&&this.pdfDocument.numPages===labels.length)){this._pageLabels=null;console.error('PDFViewer_setPageLabels: Invalid page labels.');}else{this._pageLabels=labels;}
for(var i=0,ii=this._pages.length;i<ii;i++){var pageView=this._pages[i];var label=this._pageLabels&&this._pageLabels[i];pageView.setPageLabel(label);}},_resetView:function(){this._pages=[];this._currentPageNumber=1;this._currentScale=UNKNOWN_SCALE;this._currentScaleValue=null;this._pageLabels=null;this._buffer=new PDFPageViewBuffer(DEFAULT_CACHE_SIZE);this._location=null;this._pagesRotation=0;this._pagesRequests=[];this._pageViewsReady=false;this.viewer.textContent='';},_scrollUpdate:function PDFViewer_scrollUpdate(){if(this.pagesCount===0){return;}
this.update();for(var i=0,ii=this._pages.length;i<ii;i++){this._pages[i].updatePosition();}},_setScaleDispatchEvent:function pdfViewer_setScaleDispatchEvent(newScale,newValue,preset){var arg={source:this,scale:newScale,presetValue:preset?newValue:undefined};this.eventBus.dispatch('scalechanging',arg);this.eventBus.dispatch('scalechange',arg);},_setScaleUpdatePages:function pdfViewer_setScaleUpdatePages(newScale,newValue,noScroll,preset){this._currentScaleValue=newValue.toString();if(isSameScale(this._currentScale,newScale)){if(preset){this._setScaleDispatchEvent(newScale,newValue,true);}
return;}
for(var i=0,ii=this._pages.length;i<ii;i++){this._pages[i].update(newScale);}
this._currentScale=newScale;if(!noScroll){var page=this._currentPageNumber,dest;if(this._location&&!pdfjsLib.PDFJS.ignoreCurrentPositionOnZoom&&!(this.isInPresentationMode||this.isChangingPresentationMode)){page=this._location.pageNumber;dest=[null,{name:'XYZ'},this._location.left,this._location.top,null];}
this.scrollPageIntoView({pageNumber:page,destArray:dest,allowNegativeOffset:true});}
this._setScaleDispatchEvent(newScale,newValue,preset);if(this.defaultRenderingQueue){this.update();}},_setScale:function PDFViewer_setScale(value,noScroll){var scale=parseFloat(value);if(scale>0){this._setScaleUpdatePages(scale,value,noScroll,false);}else{var currentPage=this._pages[this._currentPageNumber-1];if(!currentPage){return;}
var hPadding=this.isInPresentationMode||this.removePageBorders?0:SCROLLBAR_PADDING;var vPadding=this.isInPresentationMode||this.removePageBorders?0:VERTICAL_PADDING;var pageWidthScale=(this.container.clientWidth-hPadding)/ currentPage.width*currentPage.scale;var pageHeightScale=(this.container.clientHeight-vPadding)/ currentPage.height*currentPage.scale;switch(value){case'page-actual':scale=1;break;case'page-width':scale=pageWidthScale;break;case'page-height':scale=pageHeightScale;break;case'page-fit':scale=Math.min(pageWidthScale,pageHeightScale);break;case'auto':var isLandscape=currentPage.width>currentPage.height;var horizontalScale=isLandscape?Math.min(pageHeightScale,pageWidthScale):pageWidthScale;scale=Math.min(MAX_AUTO_SCALE,horizontalScale);break;default:console.error('PDFViewer_setScale: "'+value+'" is an unknown zoom value.');return;}
this._setScaleUpdatePages(scale,value,noScroll,true);}},_resetCurrentPageView:function(){if(this.isInPresentationMode){this._setScale(this._currentScaleValue,true);}
var pageView=this._pages[this._currentPageNumber-1];scrollIntoView(pageView.div);},scrollPageIntoView:function PDFViewer_scrollPageIntoView(params){if(!this.pdfDocument){return;}
if(arguments.length>1||typeof params==='number'){console.warn('Call of scrollPageIntoView() with obsolete signature.');var paramObj={};if(typeof params==='number'){paramObj.pageNumber=params;}
if(arguments[1]instanceof Array){paramObj.destArray=arguments[1];}
params=paramObj;}
var pageNumber=params.pageNumber||0;var dest=params.destArray||null;var allowNegativeOffset=params.allowNegativeOffset||false;if(this.isInPresentationMode||!dest){this._setCurrentPageNumber(pageNumber,true);return;}
var pageView=this._pages[pageNumber-1];if(!pageView){console.error('PDFViewer_scrollPageIntoView: '+'Invalid "pageNumber" parameter.');return;}
var x=0,y=0;var width=0,height=0,widthScale,heightScale;var changeOrientation=pageView.rotation%180===0?false:true;var pageWidth=(changeOrientation?pageView.height:pageView.width)/ pageView.scale / CSS_UNITS;var pageHeight=(changeOrientation?pageView.width:pageView.height)/ pageView.scale / CSS_UNITS;var scale=0;switch(dest[1].name){case'XYZ':x=dest[2];y=dest[3];scale=dest[4];x=x!==null?x:0;y=y!==null?y:pageHeight;break;case'Fit':case'FitB':scale='page-fit';break;case'FitH':case'FitBH':y=dest[2];scale='page-width';if(y===null&&this._location){x=this._location.left;y=this._location.top;}
break;case'FitV':case'FitBV':x=dest[2];width=pageWidth;height=pageHeight;scale='page-height';break;case'FitR':x=dest[2];y=dest[3];width=dest[4]-x;height=dest[5]-y;var hPadding=this.removePageBorders?0:SCROLLBAR_PADDING;var vPadding=this.removePageBorders?0:VERTICAL_PADDING;widthScale=(this.container.clientWidth-hPadding)/ width / CSS_UNITS;heightScale=(this.container.clientHeight-vPadding)/ height / CSS_UNITS;scale=Math.min(Math.abs(widthScale),Math.abs(heightScale));break;default:console.error('PDFViewer_scrollPageIntoView: \''+dest[1].name+'\' is not a valid destination type.');return;}
if(scale&&scale!==this._currentScale){this.currentScaleValue=scale;}else if(this._currentScale===UNKNOWN_SCALE){this.currentScaleValue=DEFAULT_SCALE_VALUE;}
if(scale==='page-fit'&&!dest[4]){scrollIntoView(pageView.div);return;}
var boundingRect=[pageView.viewport.convertToViewportPoint(x,y),pageView.viewport.convertToViewportPoint(x+width,y+height)];var left=Math.min(boundingRect[0][0],boundingRect[1][0]);var top=Math.min(boundingRect[0][1],boundingRect[1][1]);if(!allowNegativeOffset){left=Math.max(left,0);top=Math.max(top,0);}
scrollIntoView(pageView.div,{left:left,top:top});},_updateLocation:function(firstPage){var currentScale=this._currentScale;var currentScaleValue=this._currentScaleValue;var normalizedScaleValue=parseFloat(currentScaleValue)===currentScale?Math.round(currentScale*10000)/ 100:currentScaleValue;var pageNumber=firstPage.id;var pdfOpenParams='#page='+pageNumber;pdfOpenParams+='&zoom='+normalizedScaleValue;var currentPageView=this._pages[pageNumber-1];var container=this.container;var topLeft=currentPageView.getPagePoint(container.scrollLeft-firstPage.x,container.scrollTop-firstPage.y);var intLeft=Math.round(topLeft[0]);var intTop=Math.round(topLeft[1]);pdfOpenParams+=','+intLeft+','+intTop;this._location={pageNumber:pageNumber,scale:normalizedScaleValue,top:intTop,left:intLeft,pdfOpenParams:pdfOpenParams};},update:function PDFViewer_update(){var visible=this._getVisiblePages();var visiblePages=visible.views;if(visiblePages.length===0){return;}
var suggestedCacheSize=Math.max(DEFAULT_CACHE_SIZE,2*visiblePages.length+1);this._buffer.resize(suggestedCacheSize);this.renderingQueue.renderHighestPriority(visible);var currentId=this._currentPageNumber;var firstPage=visible.first;for(var i=0,ii=visiblePages.length,stillFullyVisible=false;i<ii;++i){var page=visiblePages[i];if(page.percent<100){break;}
if(page.id===currentId){stillFullyVisible=true;break;}}
if(!stillFullyVisible){currentId=visiblePages[0].id;}
if(!this.isInPresentationMode){this._setCurrentPageNumber(currentId);}
this._updateLocation(firstPage);this.eventBus.dispatch('updateviewarea',{source:this,location:this._location});},containsElement:function(element){return this.container.contains(element);},focus:function(){this.container.focus();},get isInPresentationMode(){return this.presentationModeState===PresentationModeState.FULLSCREEN;},get isChangingPresentationMode(){return this.presentationModeState===PresentationModeState.CHANGING;},get isHorizontalScrollbarEnabled(){return this.isInPresentationMode?false:this.container.scrollWidth>this.container.clientWidth;},_getVisiblePages:function(){if(!this.isInPresentationMode){return getVisibleElements(this.container,this._pages,true);}
var visible=[];var currentPage=this._pages[this._currentPageNumber-1];visible.push({id:currentPage.id,view:currentPage});return{first:currentPage,last:currentPage,views:visible};},cleanup:function(){for(var i=0,ii=this._pages.length;i<ii;i++){if(this._pages[i]&&this._pages[i].renderingState!==RenderingStates.FINISHED){this._pages[i].reset();}}},_cancelRendering:function PDFViewer_cancelRendering(){for(var i=0,ii=this._pages.length;i<ii;i++){if(this._pages[i]){this._pages[i].cancelRendering();}}},_ensurePdfPageLoaded:function(pageView){if(pageView.pdfPage){return Promise.resolve(pageView.pdfPage);}
var pageNumber=pageView.id;if(this._pagesRequests[pageNumber]){return this._pagesRequests[pageNumber];}
var promise=this.pdfDocument.getPage(pageNumber).then(function(pdfPage){pageView.setPdfPage(pdfPage);this._pagesRequests[pageNumber]=null;return pdfPage;}.bind(this));this._pagesRequests[pageNumber]=promise;return promise;},forceRendering:function(currentlyVisiblePages){var visiblePages=currentlyVisiblePages||this._getVisiblePages();var pageView=this.renderingQueue.getHighestPriority(visiblePages,this._pages,this.scroll.down);if(pageView){this._ensurePdfPageLoaded(pageView).then(function(){this.renderingQueue.renderView(pageView);}.bind(this));return true;}
return false;},getPageTextContent:function(pageIndex){return this.pdfDocument.getPage(pageIndex+1).then(function(page){return page.getTextContent({normalizeWhitespace:true});});},createTextLayerBuilder:function(textLayerDiv,pageIndex,viewport,enhanceTextSelection){return new TextLayerBuilder({textLayerDiv:textLayerDiv,eventBus:this.eventBus,pageIndex:pageIndex,viewport:viewport,findController:this.isInPresentationMode?null:this.findController,enhanceTextSelection:this.isInPresentationMode?false:enhanceTextSelection});},createAnnotationLayerBuilder:function(pageDiv,pdfPage,renderInteractiveForms){return new AnnotationLayerBuilder({pageDiv:pageDiv,pdfPage:pdfPage,renderInteractiveForms:renderInteractiveForms,linkService:this.linkService,downloadManager:this.downloadManager});},setFindController:function(findController){this.findController=findController;},getPagesOverview:function(){return this._pages.map(function(pageView){var viewport=pageView.pdfPage.getViewport(1);return{width:viewport.width,height:viewport.height};});}};return PDFViewer;}();exports.PresentationModeState=PresentationModeState;exports.PDFViewer=PDFViewer;}));}.call(pdfViewerLibs));var PDFJS=pdfjsLib.PDFJS;PDFJS.PDFViewer=pdfViewerLibs.pdfjsWebPDFViewer.PDFViewer;PDFJS.PDFPageView=pdfViewerLibs.pdfjsWebPDFPageView.PDFPageView;PDFJS.PDFLinkService=pdfViewerLibs.pdfjsWebPDFLinkService.PDFLinkService;PDFJS.TextLayerBuilder=pdfViewerLibs.pdfjsWebTextLayerBuilder.TextLayerBuilder;PDFJS.DefaultTextLayerFactory=pdfViewerLibs.pdfjsWebTextLayerBuilder.DefaultTextLayerFactory;PDFJS.AnnotationLayerBuilder=pdfViewerLibs.pdfjsWebAnnotationLayerBuilder.AnnotationLayerBuilder;PDFJS.DefaultAnnotationLayerFactory=pdfViewerLibs.pdfjsWebAnnotationLayerBuilder.DefaultAnnotationLayerFactory;PDFJS.PDFHistory=pdfViewerLibs.pdfjsWebPDFHistory.PDFHistory;PDFJS.PDFFindController=pdfViewerLibs.pdfjsWebPDFFindController.PDFFindController;PDFJS.EventBus=pdfViewerLibs.pdfjsWebUIUtils.EventBus;PDFJS.DownloadManager=pdfViewerLibs.pdfjsWebDownloadManager.DownloadManager;PDFJS.ProgressBar=pdfViewerLibs.pdfjsWebUIUtils.ProgressBar;exports.PDFJS=PDFJS;}));;
/*!
 * Minified Utility Resources
 * Theme Core resources.
*/;(function($){var defaults={width:400,height:"65%",minimizedWidth:200,gutter:10,poppedOutDistance:"6%",title:function(){return"";},dialogClass:"",buttons:[],animationSpeed:400,opacity:1,initialState:'modal',showClose:true,showPopout:true,showMinimize:true,create:undefined,open:undefined,beforeClose:undefined,close:undefined,beforeMinimize:undefined,minimize:undefined,beforeRestore:undefined,restore:undefined,beforePopout:undefined,popout:undefined};var dClass="dockmodal";var windowWidth=$(window).width();function setAnimationCSS($this,$el){var aniSpeed=$this.options.animationSpeed / 1000;$el.css({"transition":aniSpeed+"s right, "+aniSpeed+"s left, "+aniSpeed+"s top, "+aniSpeed+"s bottom, "+aniSpeed+"s height, "+aniSpeed+"s width"});return true;}
function removeAnimationCSS($el){$el.css({"transition":"none"});return true;}
var methods={init:function(options){return this.each(function(){var $this=$(this);var data=$this.data('dockmodal');$this.options=$.extend({},defaults,options);(function titleCheck(){if(typeof $this.options.title=="function"){$this.options.title=$this.options.title.call($this);}})();if(!data){$this.data('dockmodal',$this);}else{$("body").append($this.closest("."+dClass).show());methods.refreshLayout();setTimeout(function(){methods.restore.apply($this);},$this.options.animationSpeed);return;}
var $body=$("body");var $window=$(window);var $dockModal=$('<div/>').addClass(dClass).addClass($this.options.dialogClass);if($this.options.initialState=="modal"){$dockModal.addClass("popped-out");}else if($this.options.initialState=="minimized"){$dockModal.addClass("minimized");}
$dockModal.height(0);setAnimationCSS($this,$dockModal);var $dockHeader=$('<div></div>').addClass(dClass+"-header");if($this.options.showClose){$('<a href="#" class="header-action action-close" title="Close"><i class="icon-dockmodal-close"></i></a>').appendTo($dockHeader).click(function(e){methods.destroy.apply($this);return false;});}
if($this.options.showPopout){$('<a href="#" class="header-action action-popout" title="Pop out"><i class="icon-dockmodal-popout"></i></a>').appendTo($dockHeader).click(function(e){if($dockModal.hasClass("popped-out")){methods.restore.apply($this);}else{methods.popout.apply($this);}
return false;});}
if($this.options.showMinimize){$('<a href="#" class="header-action action-minimize" title="Minimize"><i class="icon-dockmodal-minimize"></i></a>').appendTo($dockHeader).click(function(e){if($dockModal.hasClass("minimized")){if($dockModal.hasClass("popped-out")){methods.popout.apply($this);}else{methods.restore.apply($this);}}else{methods.minimize.apply($this);}
return false;});}
if($this.options.showMinimize&&$this.options.showPopout){$dockHeader.click(function(){if($dockModal.hasClass("minimized")){if($dockModal.hasClass("popped-out")){methods.popout.apply($this);}else{methods.restore.apply($this);}}else{methods.minimize.apply($this);}
return false;});}
$dockHeader.append('<div class="title-text">'+($this.options.title||$this.attr("title"))+'</div>');$dockModal.append($dockHeader);var $placeholder=$('<div class="modal-placeholder"></div>').insertAfter($this);$this.placeholder=$placeholder;var $dockBody=$('<div></div>').addClass(dClass+"-body").append($this);$dockModal.append($dockBody);if($this.options.buttons.length){var $dockFooter=$('<div></div>').addClass(dClass+"-footer");var $dockFooterButtonset=$('<div></div>').addClass(dClass+"-footer-buttonset");$dockFooter.append($dockFooterButtonset);$.each($this.options.buttons,function(indx,el){var $btn=$('<a href="#" class="btn"></a>');$btn.attr({"id":el.id,"class":el.buttonClass});$btn.html(el.html);$btn.click(function(e){el.click(e,$this);return false;});$dockFooterButtonset.append($btn);});$dockModal.append($dockFooter);}else{$dockModal.addClass("no-footer");}
var $overlay=$("."+dClass+"-overlay");if(!$overlay.length){$overlay=$('<div/>').addClass(dClass+"-overlay");}
if($.isFunction($this.options.create)){$this.options.create($this);}
$body.append($dockModal);$dockModal.after($overlay);$dockBody.focus();if($.isFunction($this.options.open)){setTimeout(function(){$this.options.open($this);},$this.options.animationSpeed);}
if($dockModal.hasClass("minimized")){$dockModal.find(".dockmodal-body, .dockmodal-footer").hide();methods.minimize.apply($this);}else{if($dockModal.hasClass("popped-out")){methods.popout.apply($this);}else{methods.restore.apply($this);}}
$body.data("windowWidth",$window.width());$window.unbind("resize.dockmodal").bind("resize.dockmodal",function(){if($window.width()==$body.data("windowWidth")){return;}
$body.data("windowWidth",$window.width());methods.refreshLayout();});});},destroy:function(){return this.each(function(){var $this=$(this).data('dockmodal');if(!$this)
return;if($.isFunction($this.options.beforeClose)){if($this.options.beforeClose($this)===false){return;}}
try{var $dockModal=$this.closest("."+dClass);if($dockModal.hasClass("popped-out")&&!$dockModal.hasClass("minimized")){$dockModal.css({"left":"50%","right":"50%","top":"50%","bottom":"50%"});}else{$dockModal.css({"width":"0","height":"0"});}
setTimeout(function(){$this.removeData('dockmodal');$this.placeholder.replaceWith($this);$dockModal.remove();$("."+dClass+"-overlay").hide();methods.refreshLayout();if($.isFunction($this.options.close)){$this.options.close($this);}},$this.options.animationSpeed);}
catch(err){alert(err.message);}})},close:function(){methods.destroy.apply(this);},minimize:function(){return this.each(function(){var $this=$(this).data('dockmodal');if(!$this)
return;if($.isFunction($this.options.beforeMinimize)){if($this.options.beforeMinimize($this)===false){return;}}
var $dockModal=$this.closest("."+dClass);var headerHeight=$dockModal.find(".dockmodal-header").outerHeight();$dockModal.addClass("minimized").css({"width":$this.options.minimizedWidth+"px","height":headerHeight+"px","left":"auto","right":"auto","top":"auto","bottom":"0"});setTimeout(function(){$dockModal.find(".dockmodal-body, .dockmodal-footer").hide();if($.isFunction($this.options.minimize)){$this.options.minimize($this);}},$this.options.animationSpeed);$("."+dClass+"-overlay").hide();$dockModal.find(".action-minimize").attr("title","Restore");methods.refreshLayout();})},restore:function(){return this.each(function(){var $this=$(this).data('dockmodal');if(!$this)
return;if($.isFunction($this.options.beforeRestore)){if($this.options.beforeRestore($this)===false){return;}}
var $dockModal=$this.closest("."+dClass);$dockModal.removeClass("minimized popped-out");$dockModal.find(".dockmodal-body, .dockmodal-footer").show();$dockModal.css({"width":$this.options.width+"px","height":$this.options.height,"left":"auto","right":"auto","top":"auto","bottom":"0"});$("."+dClass+"-overlay").hide();$dockModal.find(".action-minimize").attr("title","Minimize");$dockModal.find(".action-popout").attr("title","Pop-out");setTimeout(function(){if($.isFunction($this.options.restore)){$this.options.restore($this);}},$this.options.animationSpeed);methods.refreshLayout();})},popout:function(){return this.each(function(){var $this=$(this).data('dockmodal');if(!$this)
return;if($.isFunction($this.options.beforePopout)){if($this.options.beforePopout($this)===false){return;}}
var $dockModal=$this.closest("."+dClass);$dockModal.find(".dockmodal-body, .dockmodal-footer").show();removeAnimationCSS($dockModal);var offset=$dockModal.position();var windowWidth=$(window).width();$dockModal.css({"width":"auto","height":"auto","left":offset.left+"px","right":(windowWidth-offset.left-$dockModal.outerWidth(true))+"px","top":offset.top+"px","bottom":0});setAnimationCSS($this,$dockModal);setTimeout(function(){$dockModal.removeClass("minimized").addClass("popped-out").css({"width":"auto","height":"auto","left":$this.options.poppedOutDistance,"right":$this.options.poppedOutDistance,"top":$this.options.poppedOutDistance,"bottom":$this.options.poppedOutDistance});$("."+dClass+"-overlay").show();$dockModal.find(".action-popout").attr("title","Pop-in");methods.refreshLayout();},10);setTimeout(function(){if($.isFunction($this.options.popout)){$this.options.popout($this);}},$this.options.animationSpeed);});},refreshLayout:function(){var right=0;var windowWidth=$(window).width();$.each($("."+dClass).toArray().reverse(),function(i,val){var $dockModal=$(this);var $this=$dockModal.find("."+dClass+"-body > div").data("dockmodal");if($dockModal.hasClass("popped-out")&&!$dockModal.hasClass("minimized")){return;}
right+=$this.options.gutter;$dockModal.css({"right":right+"px"});if($dockModal.hasClass("minimized")){right+=$this.options.minimizedWidth;}else{right+=$this.options.width;}
if(right>windowWidth){$dockModal.hide();}else{setTimeout(function(){$dockModal.show();},$this.options.animationSpeed);}});}};$.fn.dockmodal=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof method==='object'||!method){return methods.init.apply(this,arguments);}else{$.error('Method '+method+' does not exist on jQuery.dockmodal');}};})(jQuery);;(function($,window,document,undefined){$.fn.adminpanel=function(options){var defaults={grid:'.admin-grid',draggable:false,mobile:false,preserveGrid:false,onPanel:function(){console.log('callback:','onPanel');},onStart:function(){console.log('callback:','onStart');},onSave:function(){console.log('callback:','onSave');},onDrop:function(){console.log('callback:','onDrop');},onFinish:function(){console.log('callback:','onFinish');},};var options=$.extend({},defaults,options);var plugin=$(this);var pluginID=plugin.attr('id');var pluginGrid=options.grid;var dragSetting=options.draggable;var mobileSetting=options.mobile;var preserveSetting=options.preserveGrid;var panels=plugin.find('.panel');var settingsKey='panel-settings_'+location.pathname;var positionsKey='panel-positions_'+location.pathname;var settingsGet=localStorage.getItem(settingsKey);var positionsGet=localStorage.getItem(positionsKey);$('.panel').on('click','.panel-controls > a',function(e){e.preventDefault();if($('body.ui-drag-active').length){return;}
methods.controlHandlers.call(this,options);});var methods={init:function(options){var This=$(this);if(typeof options.onStart=='function'){options.onStart();}
if(!positionsGet){localStorage.setItem(positionsKey,methods.findPositions());}else{methods.setPositions();}
if(!settingsGet){localStorage.setItem(settingsKey,methods.modifySettings());}
$(pluginGrid).each(function(i,e){$(e).attr('id','grid-'+i);});if(preserveSetting){var Panel="<div class='panel preserve-grid'></div>";$(pluginGrid).each(function(i,e){$(e).append(Panel);});}
methods.createControls(options);methods.applySettings();methods.createMobileControls(options);if(dragSetting===true){plugin.sortable({items:plugin.find('.panel:not(".sort-disable")'),connectWith:pluginGrid,cursor:'default',revert:250,handle:'.panel-heading',opacity:1,delay:100,tolerance:"pointer",scroll:true,placeholder:'panel-placeholder',forcePlaceholderSize:true,forceHelperSize:true,start:function(e,ui){$('body').addClass('ui-drag-active');ui.placeholder.height(ui.helper.outerHeight()-4);},beforeStop:function(){if(typeof options.onDrop=='function'){options.onDrop();}},stop:function(){$('body').removeClass('ui-drag-active');},update:function(event,ui){methods.toggleLoader();methods.updatePositions(options);}});}
if(typeof options.onFinish=='function'){options.onFinish();}},createMobileControls:function(options){var controls=panels.find('.panel-controls');var arr={};$.each(controls,function(i,e){var This=$(e);var ID=$(e).parents('.panel').attr('id');var controlW=This.width();var titleW=This.siblings('.panel-title').width();var headingW=This.parent('.panel-heading').width();var mobile=(controlW+titleW);arr[ID]=mobile;});console.log(arr)
$.each(arr,function(i,e){var This=$('#'+i);var headingW=This.width()-75;var controls=This.find('.panel-controls');if(mobileSetting===true||headingW<e){This.addClass('mobile-controls');var options={html:true,placement:"left",content:function(e){var Content=$(this).clone();return Content;},template:'<div data-popover-id="'+i+'" class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}
controls.popover(options);}else{controls.removeClass('mobile-controls');}});$('.mobile-controls .panel-heading > .panel-controls').on('click',function(){$(this).toggleClass('panel-controls-open');});},applySettings:function(options){var obj=this;var localSettings=localStorage.getItem(settingsKey);var parseSettings=JSON.parse(localSettings);var panelColors="panel-primary panel-success panel-info panel-warning panel-danger panel-alert panel-system panel-dark panel-default";$.each(parseSettings,function(i,e){$.each(e,function(i,e){var panelID=e['id'];var panelTitle=e['title'];var panelCollapsed=e['collapsed'];var panelHidden=e['hidden'];var panelColor=e['color'];var Target=$('#'+panelID);if(panelTitle){Target.children('.panel-heading').find('.panel-title').text(panelTitle);}
if(panelCollapsed===1){Target.addClass('panel-collapsed').children('.panel-body, .panel-menu, .panel-footer').hide();}
if(panelColor){Target.removeClass(panelColors).addClass(panelColor).attr('data-panel-color',panelColor);}
if(panelHidden===1){Target.addClass('panel-hidden').hide().remove();}});});},createControls:function(options){var panelControls='<span class="panel-controls"></span>';var panelTitle='<a href="#" class="panel-control-title"></a>';var panelColor='<a href="#" class="panel-control-color"></a>';var panelCollapse='<a href="#" class="panel-control-collapse"></a>';var panelFullscreen='<a href="#" class="panel-control-fullscreen"></a>';var panelRemove='<a href="#" class="panel-control-remove"></a>';var panelCallback='<a href="#" class="panel-control-callback"></a>';var panelDock='<a href="#" class="panel-control-dockable" data-toggle="popover" data-content="panelDockContent();"></a>';var panelExpose='<a href="#" class="panel-control-expose"></a>';var panelLoader='<a href="#" class="panel-control-loader"></a>';panels.each(function(i,e){var This=$(e);var panelHeader=This.children('.panel-heading');$(panelControls).appendTo(panelHeader);var title=This.attr('data-panel-title');var color=This.attr('data-panel-color');var collapse=This.attr('data-panel-collapse');var fullscreen=This.attr('data-panel-fullscreen');var remove=This.attr('data-panel-remove');var callback=This.attr('data-panel-callback');var paneldock=This.attr('data-panel-dockable');var expose=This.attr('data-panel-expose');var loader=This.attr('data-panel-loader');if(!loader){var panelMenu=panelHeader.find('.panel-controls');$(panelLoader).appendTo(panelMenu);}
if(expose){var panelMenu=panelHeader.find('.panel-controls');$(panelExpose).appendTo(panelMenu);}
if(paneldock){var panelMenu=panelHeader.find('.panel-controls');$(panelDock).appendTo(panelMenu);}
if(callback){var panelMenu=panelHeader.find('.panel-controls');$(panelCallback).appendTo(panelMenu);}
if(!remove){var panelMenu=panelHeader.find('.panel-controls');$(panelRemove).appendTo(panelMenu);}
if(!title){var panelMenu=panelHeader.find('.panel-controls');$(panelTitle).appendTo(panelMenu);}
if(!color){var panelMenu=panelHeader.find('.panel-controls');$(panelColor).appendTo(panelMenu);}
if(!collapse){var panelMenu=panelHeader.find('.panel-controls');$(panelCollapse).appendTo(panelMenu);}
if(!fullscreen){var panelMenu=panelHeader.find('.panel-controls');$(panelFullscreen).appendTo(panelMenu);}});},controlHandlers:function(e){var This=$(this);var action=This.attr('class');var panel=This.parents('.panel');var panelHeading=panel.children('.panel-heading');var panelTitle=panel.find('.panel-title');var panelEditTitle=function(){var toggleBox=function(){var panelEditBox=panel.find('.panel-editbox');panelEditBox.slideToggle('fast',function(){panel.toggleClass('panel-editbox-open');if(!panel.hasClass('panel-editbox-open')){panelTitle.text(panelEditBox.children('input').val());methods.updateSettings(options);}});};if(!panel.find('.panel-editbox').length){var editBox='<div class="panel-editbox"><input type="text" class="form-control" value="'+panelTitle.text()+'"></div>';panelHeading.after(editBox);var panelEditBox=panel.find('.panel-editbox');panelEditBox.children('input').on('keyup',function(){panelTitle.text(panelEditBox.children('input').val());});panelEditBox.children('input').on('keypress',function(e){if(e.which==13){toggleBox();}});toggleBox();}else{toggleBox();}};var panelColor=function(){if(!panel.find('.panel-colorbox').length){var colorBox='<div class="panel-colorbox"> <span class="bg-white" data-panel-color="panel-default"></span> <span class="bg-primary" data-panel-color="panel-primary"></span> <span class="bg-info" data-panel-color="panel-info"></span> <span class="bg-success" data-panel-color="panel-success"></span> <span class="bg-warning" data-panel-color="panel-warning"></span> <span class="bg-danger" data-panel-color="panel-danger"></span> <span class="bg-alert" data-panel-color="panel-alert"></span> <span class="bg-system" data-panel-color="panel-system"></span> <span class="bg-dark" data-panel-color="panel-dark"></span> </div>'
panelHeading.after(colorBox);}
var panelColorBox=panel.find('.panel-colorbox');panelColorBox.on('click','> span',function(e){var dataColor=$(this).data('panel-color');var altColors='panel-primary panel-info panel-success panel-warning panel-danger panel-alert panel-system panel-dark panel-default panel-white';panel.removeClass(altColors).addClass(dataColor).data('panel-color',dataColor)
methods.updateSettings(options);});panelColorBox.slideToggle('fast',function(){panel.toggleClass('panel-colorbox-open');});};var panelCollapse=function(){panel.toggleClass('panel-collapsed');panel.children('.panel-body, .panel-menu, .panel-footer').slideToggle('fast',function(){methods.updateSettings(options);});};var panelFullscreen=function(){if($('body.panel-fullscreen-active').length){$('body').removeClass('panel-fullscreen-active');panel.removeClass('panel-fullscreen');if(dragSetting===true){plugin.sortable("enable");}}
else{$('body').addClass('panel-fullscreen-active');panel.addClass('panel-fullscreen');if(dragSetting===true){plugin.sortable("disable");}}
$('.panel-controls').removeClass('panel-controls-open');$('.popover').popover('hide');setTimeout(function(){$(window).trigger('resize');},100);};var panelRemove=function(){if(bootbox.confirm){bootbox.confirm("Are You Sure?!",function(e){if(e){setTimeout(function(){panel.addClass('panel-removed').hide();methods.updateSettings(options);},200);}});}else{panel.addClass('panel-removed').hide();methods.updateSettings(options);}};var panelCallback=function(){if(typeof options.onPanel=='function'){options.onPanel();}};var panelExpose=function(){};if($(this).hasClass('panel-control-collapse')){panelCollapse();}
if($(this).hasClass('panel-control-title')){panelEditTitle();}
if($(this).hasClass('panel-control-color')){panelColor();}
if($(this).hasClass('panel-control-fullscreen')){panelFullscreen();}
if($(this).hasClass('panel-control-remove')){panelRemove();}
if($(this).hasClass('panel-control-callback')){panelCallback();}
if($(this).hasClass('panel-control-expose')){panelExpose();}
if($(this).hasClass('panel-control-dockable')){return}
if($(this).hasClass('panel-control-loader')){return;}
methods.toggleLoader.call(this);},toggleLoader:function(options){var This=$(this);var panel=This.parents('.panel');panel.addClass('panel-loader-active');setTimeout(function(){panel.removeClass('panel-loader-active');},650);},modifySettings:function(options){var settingsArr=[];panels.each(function(i,e){var This=$(e);var panelObj={};var panelID=This.attr('id');var panelTitle=This.children('.panel-heading').find('.panel-title').text();var panelCollapsed=(This.hasClass('panel-collapsed')?1:0);var panelHidden=(This.is(':hidden')?1:0);var panelColor=This.data('panel-color');panelObj['id']=This.attr('id');panelObj['title']=This.children('.panel-heading').find('.panel-title').text();panelObj['collapsed']=(This.hasClass('panel-collapsed')?1:0);panelObj['hidden']=(This.is(':hidden')?1:0);panelObj['color']=(panelColor?panelColor:null);settingsArr.push({'panel':panelObj});});var checkedSettings=JSON.stringify(settingsArr);return checkedSettings;},findPositions:function(options){var grids=plugin.find(pluginGrid);var gridsArr=[];grids.each(function(index,ele){var panels=$(ele).find('.panel');var panelArr=[];$(ele).attr('id','grid-'+index);panels.each(function(i,e){var panelID=$(e).attr('id');panelArr.push(panelID);});gridsArr[index]=panelArr;});var checkedPosition=JSON.stringify(gridsArr);return checkedPosition;},setPositions:function(options){var obj=this;var localPositions=localStorage.getItem(positionsKey);var parsePosition=JSON.parse(localPositions);$(pluginGrid).each(function(i,e){var rowID=$(e)
$.each(parsePosition[i],function(i,ele){$('#'+ele).appendTo(rowID);});});},updatePositions:function(options){localStorage.setItem(positionsKey,methods.findPositions());if(typeof options.onSave=='function'){options.onSave();}},updateSettings:function(options){localStorage.setItem(settingsKey,methods.modifySettings());if(typeof options.onSave=='function'){options.onSave();}}}
return this.each(function(){methods.init.call(plugin,options);});};})(jQuery,window,document);;(function(root,factory){"use strict";if(typeof define==="function"&&define.amd){define(["jquery"],factory);}else if(typeof exports==="object"){module.exports=factory(require("jquery"));}else{root.bootbox=factory(root.jQuery);}}(this,function init($,undefined){"use strict";var templates={dialog:"<div class='bootbox modal' tabindex='-1' role='dialog'>"+"<div class='modal-dialog'>"+"<div class='modal-content'>"+"<div class='modal-body'><div class='bootbox-body'></div></div>"+"</div>"+"</div>"+"</div>",header:"<div class='modal-header'>"+"<h4 class='modal-title'></h4>"+"</div>",footer:"<div class='modal-footer'></div>",closeButton:"<button type='button' class='bootbox-close-button close' data-dismiss='modal' aria-hidden='true'>&times;</button>",form:"<form class='bootbox-form'></form>",inputs:{text:"<input class='bootbox-input bootbox-input-text form-control' autocomplete=off type=text />",textarea:"<textarea class='bootbox-input bootbox-input-textarea form-control'></textarea>",email:"<input class='bootbox-input bootbox-input-email form-control' autocomplete='off' type='email' />",select:"<select class='bootbox-input bootbox-input-select form-control'></select>",checkbox:"<div class='checkbox'><label><input class='bootbox-input bootbox-input-checkbox' type='checkbox' /></label></div>",date:"<input class='bootbox-input bootbox-input-date form-control' autocomplete=off type='date' />",time:"<input class='bootbox-input bootbox-input-time form-control' autocomplete=off type='time' />",number:"<input class='bootbox-input bootbox-input-number form-control' autocomplete=off type='number' />",password:"<input class='bootbox-input bootbox-input-password form-control' autocomplete='off' type='password' />"}};var defaults={locale:"en",backdrop:true,animate:true,className:null,keyboard:false,closeButton:true,show:true,container:"body"};var exports={};function _t(key){var locale=locales[defaults.locale];return locale?locale[key]:locales.en[key];}
function processCallback(e,dialog,callback){e.stopPropagation();e.preventDefault();var preserveDialog=$.isFunction(callback)&&callback(e)===false;if(!preserveDialog){dialog.modal("hide");}}
function getKeyLength(obj){var k,t=0;for(k in obj){t++;}
return t;}
function each(collection,iterator){var index=0;$.each(collection,function(key,value){iterator(key,value,index++);});}
function sanitize(options){var buttons;var total;if(typeof options!=="object"){throw new Error("Please supply an object of options");}
if(!options.message){throw new Error("Please specify a message");}
options=$.extend({},defaults,options);if(!options.buttons){options.buttons={};}
options.backdrop=options.backdrop?"static":false;buttons=options.buttons;total=getKeyLength(buttons);each(buttons,function(key,button,index){if($.isFunction(button)){button=buttons[key]={callback:button};}
if($.type(button)!=="object"){throw new Error("button with key "+key+" must be an object");}
if(!button.label){button.label=key;}
if(!button.className){if(total<=2&&index===total-1){button.className="btn-primary";}else{button.className="btn-default";}}});return options;}
function mapArguments(args,properties){var argn=args.length;var options={};if(argn<1||argn>2){throw new Error("Invalid argument length");}
if(argn===2||typeof args[0]==="string"){options[properties[0]]=args[0];options[properties[1]]=args[1];}else{options=args[0];}
return options;}
function mergeArguments(defaults,args,properties){return $.extend(true,{},defaults,mapArguments(args,properties));}
function mergeDialogOptions(className,labels,properties,args){var baseOptions={className:"bootbox-"+className,buttons:createLabels.apply(null,labels)};return validateButtons(mergeArguments(baseOptions,args,properties),labels);}
function createLabels(){var buttons={};for(var i=0,j=arguments.length;i<j;i++){var argument=arguments[i];var key=argument.toLowerCase();var value=argument.toUpperCase();buttons[key]={label:_t(value)};}
return buttons;}
function validateButtons(options,buttons){var allowedButtons={};each(buttons,function(key,value){allowedButtons[value]=true;});each(options.buttons,function(key){if(allowedButtons[key]===undefined){throw new Error("button key "+key+" is not allowed (options are "+buttons.join("\n")+")");}});return options;}
exports.defineLocale=function(name,values){if(values){locales[name]={OK:values.OK,CANCEL:values.CANCEL,CONFIRM:values.CONFIRM};return locales[name];}else{delete locales[name];return null;}};exports.alert=function(){var options;options=mergeDialogOptions("alert",["ok"],["message","callback"],arguments);if(options.callback&&!$.isFunction(options.callback)){throw new Error("alert requires callback property to be a function when provided");}
options.buttons.ok.callback=options.onEscape=function(){if($.isFunction(options.callback)){return options.callback();}
return true;};return exports.dialog(options);};exports.confirm=function(){var options;options=mergeDialogOptions("confirm",["cancel","confirm"],["message","callback"],arguments);options.buttons.cancel.callback=options.onEscape=function(){return options.callback(false);};options.buttons.confirm.callback=function(){return options.callback(true);};if(!$.isFunction(options.callback)){throw new Error("confirm requires a callback");}
return exports.dialog(options);};exports.prompt=function(){var options;var defaults;var dialog;var form;var input;var shouldShow;var inputOptions;form=$(templates.form);defaults={className:"bootbox-prompt",buttons:createLabels("cancel","confirm"),value:"",inputType:"text"};options=validateButtons(mergeArguments(defaults,arguments,["title","callback"]),["cancel","confirm"]);shouldShow=(options.show===undefined)?true:options.show;options.message=form;options.buttons.cancel.callback=options.onEscape=function(){return options.callback(null);};options.buttons.confirm.callback=function(){var value;switch(options.inputType){case"text":case"textarea":case"email":case"select":case"date":case"time":case"number":case"password":value=input.val();break;case"checkbox":var checkedItems=input.find("input:checked");value=[];each(checkedItems,function(_,item){value.push($(item).val());});break;}
return options.callback(value);};options.show=false;if(!options.title){throw new Error("prompt requires a title");}
if(!$.isFunction(options.callback)){throw new Error("prompt requires a callback");}
if(!templates.inputs[options.inputType]){throw new Error("invalid prompt type");}
input=$(templates.inputs[options.inputType]);switch(options.inputType){case"text":case"textarea":case"email":case"date":case"time":case"number":case"password":input.val(options.value);break;case"select":var groups={};inputOptions=options.inputOptions||[];if(!inputOptions.length){throw new Error("prompt with select requires options");}
each(inputOptions,function(_,option){var elem=input;if(option.value===undefined||option.text===undefined){throw new Error("given options in wrong format");}
if(option.group){if(!groups[option.group]){groups[option.group]=$("<optgroup/>").attr("label",option.group);}
elem=groups[option.group];}
elem.append("<option value='"+option.value+"'>"+option.text+"</option>");});each(groups,function(_,group){input.append(group);});input.val(options.value);break;case"checkbox":var values=$.isArray(options.value)?options.value:[options.value];inputOptions=options.inputOptions||[];if(!inputOptions.length){throw new Error("prompt with checkbox requires options");}
if(!inputOptions[0].value||!inputOptions[0].text){throw new Error("given options in wrong format");}
input=$("<div/>");each(inputOptions,function(_,option){var checkbox=$(templates.inputs[options.inputType]);checkbox.find("input").attr("value",option.value);checkbox.find("label").append(option.text);each(values,function(_,value){if(value===option.value){checkbox.find("input").prop("checked",true);}});input.append(checkbox);});break;}
if(options.placeholder){input.attr("placeholder",options.placeholder);}
if(options.pattern){input.attr("pattern",options.pattern);}
form.append(input);form.on("submit",function(e){e.preventDefault();e.stopPropagation();dialog.find(".btn-primary").click();});dialog=exports.dialog(options);dialog.off("shown.bs.modal");dialog.on("shown.bs.modal",function(){input.focus();});if(shouldShow===true){dialog.modal("show");}
return dialog;};exports.dialog=function(options){options=sanitize(options);var dialog=$(templates.dialog);var innerDialog=dialog.find(".modal-dialog");var body=dialog.find(".modal-body");var buttons=options.buttons;var buttonStr="";var callbacks={onEscape:options.onEscape};if($.fn.modal===undefined){throw new Error("$.fn.modal is not defined; please double check you have included "+"the Bootstrap JavaScript library. See http://getbootstrap.com/javascript/ "+"for more details.");}
each(buttons,function(key,button){buttonStr+="<button data-bb-handler='"+key+"' type='button' class='btn "+button.className+"'>"+button.label+"</button>";callbacks[key]=button.callback;});body.find(".bootbox-body").html(options.message);if(options.animate===true){dialog.addClass("fade");}
if(options.className){dialog.addClass(options.className);}
if(options.size==="large"){innerDialog.addClass("modal-lg");}
if(options.size==="small"){innerDialog.addClass("modal-sm");}
if(options.title){body.before(templates.header);}
if(options.closeButton){var closeButton=$(templates.closeButton);if(options.title){dialog.find(".modal-header").prepend(closeButton);}else{closeButton.css("margin-top","-10px").prependTo(body);}}
if(options.title){dialog.find(".modal-title").html(options.title);}
if(buttonStr.length){body.after(templates.footer);dialog.find(".modal-footer").html(buttonStr);}
dialog.on("hidden.bs.modal",function(e){if(e.target===this){dialog.remove();}});dialog.on("shown.bs.modal",function(){dialog.find(".btn-primary:first").focus();});dialog.on("escape.close.bb",function(e){if(callbacks.onEscape){processCallback(e,dialog,callbacks.onEscape);}});dialog.on("click",".modal-footer button",function(e){var callbackKey=$(this).data("bb-handler");processCallback(e,dialog,callbacks[callbackKey]);});dialog.on("click",".bootbox-close-button",function(e){processCallback(e,dialog,callbacks.onEscape);});dialog.on("keyup",function(e){if(e.which===27){dialog.trigger("escape.close.bb");}});$(options.container).append(dialog);dialog.modal({backdrop:options.backdrop,keyboard:options.keyboard||false,show:false});if(options.show){dialog.modal("show");}
return dialog;};exports.setDefaults=function(){var values={};if(arguments.length===2){values[arguments[0]]=arguments[1];}else{values=arguments[0];}
$.extend(defaults,values);};exports.hideAll=function(){$(".bootbox").modal("hide");return exports;};var locales={br:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Sim"},cs:{OK:"OK",CANCEL:"Zrušit",CONFIRM:"Potvrdit"},da:{OK:"OK",CANCEL:"Annuller",CONFIRM:"Accepter"},de:{OK:"OK",CANCEL:"Abbrechen",CONFIRM:"Akzeptieren"},el:{OK:"Εντάξει",CANCEL:"Ακύρωση",CONFIRM:"Επιβεβαίωση"},en:{OK:"OK",CANCEL:"Cancel",CONFIRM:"OK"},es:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Aceptar"},et:{OK:"OK",CANCEL:"Katkesta",CONFIRM:"OK"},fi:{OK:"OK",CANCEL:"Peruuta",CONFIRM:"OK"},fr:{OK:"OK",CANCEL:"Annuler",CONFIRM:"D'accord"},he:{OK:"אישור",CANCEL:"ביטול",CONFIRM:"אישור"},hu:{OK:"OK",CANCEL:"Mégsem",CONFIRM:"Megerősít"},hr:{OK:"OK",CANCEL:"Odustani",CONFIRM:"Potvrdi"},id:{OK:"OK",CANCEL:"Batal",CONFIRM:"OK"},it:{OK:"OK",CANCEL:"Annulla",CONFIRM:"Conferma"},ja:{OK:"OK",CANCEL:"キャンセル",CONFIRM:"確認"},lt:{OK:"Gerai",CANCEL:"Atšaukti",CONFIRM:"Patvirtinti"},lv:{OK:"Labi",CANCEL:"Atcelt",CONFIRM:"Apstiprināt"},nl:{OK:"OK",CANCEL:"Annuleren",CONFIRM:"Accepteren"},no:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},pl:{OK:"OK",CANCEL:"Anuluj",CONFIRM:"Potwierdź"},pt:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Confirmar"},ru:{OK:"OK",CANCEL:"Отмена",CONFIRM:"Применить"},sv:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},tr:{OK:"Tamam",CANCEL:"İptal",CONFIRM:"Onayla"},zh_CN:{OK:"OK",CANCEL:"取消",CONFIRM:"确认"},zh_TW:{OK:"OK",CANCEL:"取消",CONFIRM:"確認"}};exports.init=function(_$){return init(_$||$);};return exports;}));;(function($){function defined(a){return typeof a!=='undefined';}
function extend(child,parent,prototype){var F=function(){};F.prototype=parent.prototype;child.prototype=new F();child.prototype.constructor=child;parent.prototype.constructor=parent;child._super=parent.prototype;if(prototype){$.extend(child.prototype,prototype);}}
var SUBST=[['',''],['exit','cancel'],['screen','Screen']];var VENDOR_PREFIXES=['','o','ms','moz','webkit','webkitCurrent'];function native(obj,name){var prefixed;if(typeof obj==='string'){name=obj;obj=document;}
for(var i=0;i<SUBST.length;++i){name=name.replace(SUBST[i][0],SUBST[i][1]);for(var j=0;j<VENDOR_PREFIXES.length;++j){prefixed=VENDOR_PREFIXES[j];prefixed+=j===0?name:name.charAt(0).toUpperCase()+name.substr(1);if(defined(obj[prefixed])){return obj[prefixed];}}}
return void 0;}var ua=navigator.userAgent;var fsEnabled=native('fullscreenEnabled');var IS_ANDROID_CHROME=ua.indexOf('Android')!==-1&&ua.indexOf('Chrome')!==-1;var IS_NATIVELY_SUPPORTED=!IS_ANDROID_CHROME&&defined(native('fullscreenElement'))&&(!defined(fsEnabled)||fsEnabled===true);var version=$.fn.jquery.split('.');var JQ_LT_17=(parseInt(version[0])<2&&parseInt(version[1])<7);var FullScreenAbstract=function(){this.__options=null;this._fullScreenElement=null;this.__savedStyles={};};FullScreenAbstract.prototype={_DEFAULT_OPTIONS:{styles:{'boxSizing':'border-box','MozBoxSizing':'border-box','WebkitBoxSizing':'border-box'},toggleClass:null},__documentOverflow:'visible',__htmlOverflow:'visible',_preventDocumentScroll:function(){this.__documentOverflow=$('body')[0].style.overflow;this.__htmlOverflow=$('html')[0].style.overflow;},_allowDocumentScroll:function(){$('body')[0].style.overflow=this.__documentOverflow;$('html')[0].style.overflow=this.__htmlOverflow;},_fullScreenChange:function(){if(!this.__options)
return;if(!this.isFullScreen()){this._allowDocumentScroll();this._revertStyles();this._triggerEvents();this._fullScreenElement=null;}else{this._preventDocumentScroll();this._triggerEvents();}},_fullScreenError:function(e){if(!this.__options)
return;this._revertStyles();this._fullScreenElement=null;if(e){$(document).trigger('fscreenerror',[e]);}},_triggerEvents:function(){$(this._fullScreenElement).trigger(this.isFullScreen()?'fscreenopen':'fscreenclose');$(document).trigger('fscreenchange',[this.isFullScreen(),this._fullScreenElement]);},_saveAndApplyStyles:function(){var $elem=$(this._fullScreenElement);this.__savedStyles={};for(var property in this.__options.styles){this.__savedStyles[property]=this._fullScreenElement.style[property];this._fullScreenElement.style[property]=this.__options.styles[property];}
if(this.__options.toggleClass){$elem.addClass(this.__options.toggleClass);}},_revertStyles:function(){var $elem=$(this._fullScreenElement);for(var property in this.__options.styles){this._fullScreenElement.style[property]=this.__savedStyles[property];}
if(this.__options.toggleClass){$elem.removeClass(this.__options.toggleClass);}},open:function(elem,options){if(elem===this._fullScreenElement){return;}
if(this.isFullScreen()){this.exit();}
this._fullScreenElement=elem;this.__options=$.extend(true,{},this._DEFAULT_OPTIONS,options);this._saveAndApplyStyles();},exit:null,isFullScreen:null,isNativelySupported:function(){return IS_NATIVELY_SUPPORTED;}};var FullScreenNative=function(){FullScreenNative._super.constructor.apply(this,arguments);this.exit=$.proxy(native('exitFullscreen'),document);this._DEFAULT_OPTIONS=$.extend(true,{},this._DEFAULT_OPTIONS,{'styles':{'width':'100%','height':'100%'}});$(document).bind(this._prefixedString('fullscreenchange')+' MSFullscreenChange',$.proxy(this._fullScreenChange,this)).bind(this._prefixedString('fullscreenerror')+' MSFullscreenError',$.proxy(this._fullScreenError,this));};extend(FullScreenNative,FullScreenAbstract,{VENDOR_PREFIXES:['','o','moz','webkit'],_prefixedString:function(str){return $.map(this.VENDOR_PREFIXES,function(s){return s+str;}).join(' ');},open:function(elem,options){FullScreenNative._super.open.apply(this,arguments);var requestFS=native(elem,'requestFullscreen');requestFS.call(elem);},exit:$.noop,isFullScreen:function(){return native('fullscreenElement')!==null;},element:function(){return native('fullscreenElement');}});var FullScreenFallback=function(){FullScreenFallback._super.constructor.apply(this,arguments);this._DEFAULT_OPTIONS=$.extend({},this._DEFAULT_OPTIONS,{'styles':{'position':'fixed','zIndex':'2147483647','left':0,'top':0,'bottom':0,'right':0}});this.__delegateKeydownHandler();};extend(FullScreenFallback,FullScreenAbstract,{__isFullScreen:false,__delegateKeydownHandler:function(){var $doc=$(document);$doc.delegate('*','keydown.fullscreen',$.proxy(this.__keydownHandler,this));var data=JQ_LT_17?$doc.data('events'):$._data(document).events;var events=data['keydown'];if(!JQ_LT_17){events.splice(0,0,events.splice(events.delegateCount-1,1)[0]);}else{data.live.unshift(data.live.pop());}},__keydownHandler:function(e){if(this.isFullScreen()&&e.which===27){this.exit();return false;}
return true;},_revertStyles:function(){FullScreenFallback._super._revertStyles.apply(this,arguments);this._fullScreenElement.offsetHeight;},open:function(elem){FullScreenFallback._super.open.apply(this,arguments);this.__isFullScreen=true;this._fullScreenChange();},exit:function(){this.__isFullScreen=false;this._fullScreenChange();},isFullScreen:function(){return this.__isFullScreen;},element:function(){return this.__isFullScreen?this._fullScreenElement:null;}});$.fullscreen=IS_NATIVELY_SUPPORTED?new FullScreenNative():new FullScreenFallback();$.fn.fullscreen=function(options){var elem=this[0];options=$.extend({toggleClass:null,overflow:'hidden'},options);options.styles={overflow:options.overflow};delete options.overflow;if(elem){$.fullscreen.open(elem,options);}
return this;};})(jQuery);
/*!
 * hoverIntent v1.8.0 - Copyright 2014 Brian Cherne
 * http://cherne.net/brian/resources/jquery.hoverIntent.html
 * You are free to use hoverIntent as long as this header is left intact.
 */;(function($){$.fn.hoverIntent=function(handlerIn,handlerOut,selector){var cfg={interval:100,sensitivity:6,timeout:0};if(typeof handlerIn==="object"){cfg=$.extend(cfg,handlerIn)}else{if($.isFunction(handlerOut)){cfg=$.extend(cfg,{over:handlerIn,out:handlerOut,selector:selector})}else{cfg=$.extend(cfg,{over:handlerIn,out:handlerIn,selector:handlerOut})}}var cX,cY,pX,pY;var track=function(ev){cX=ev.pageX;cY=ev.pageY};var compare=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);if(Math.sqrt((pX-cX)*(pX-cX)+(pY-cY)*(pY-cY))<cfg.sensitivity){$(ob).off("mousemove.hoverIntent",track);ob.hoverIntent_s=true;return cfg.over.apply(ob,[ev])}else{pX=cX;pY=cY;ob.hoverIntent_t=setTimeout(function(){compare(ev,ob)},cfg.interval)}};var delay=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);ob.hoverIntent_s=false;return cfg.out.apply(ob,[ev])};var handleHover=function(e){var ev=$.extend({},e);var ob=this;if(ob.hoverIntent_t){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t)}if(e.type==="mouseenter"){pX=ev.pageX;pY=ev.pageY;$(ob).on("mousemove.hoverIntent",track);if(!ob.hoverIntent_s){ob.hoverIntent_t=setTimeout(function(){compare(ev,ob)},cfg.interval)}}else{$(ob).off("mousemove.hoverIntent",track);if(ob.hoverIntent_s){ob.hoverIntent_t=setTimeout(function(){delay(ev,ob)},cfg.timeout)}}};return this.on({"mouseenter.hoverIntent":handleHover,"mouseleave.hoverIntent":handleHover},cfg.selector)}})(jQuery);
/*! Copyright (c) 2011 Brandon Aaron (http://brandonaaron.net)
 * Licensed under the MIT License (LICENSE.txt).
 * Version: 3.0.6
 */;!function(a){function d(b){var c=b||window.event,d=[].slice.call(arguments,1),e=0,g=0,h=0;return b=a.event.fix(c),b.type="mousewheel",c.wheelDelta&&(e=c.wheelDelta/120),c.detail&&(e=-c.detail/3),h=e,void 0!==c.axis&&c.axis===c.HORIZONTAL_AXIS&&(h=0,g=-1*e),void 0!==c.wheelDeltaY&&(h=c.wheelDeltaY/120),void 0!==c.wheelDeltaX&&(g=-1*c.wheelDeltaX/120),d.unshift(b,e,g,h),(a.event.dispatch||a.event.handle).apply(this,d)}var b=["DOMMouseScroll","mousewheel"];if(a.event.fixHooks)for(var c=b.length;c;)a.event.fixHooks[b[--c]]=a.event.mouseHooks;a.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=b.length;a;)this.addEventListener(b[--a],d,!1);else this.onmousewheel=d},teardown:function(){if(this.removeEventListener)for(var a=b.length;a;)this.removeEventListener(b[--a],d,!1);else this.onmousewheel=null}},a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})}(jQuery);
/*!
 * jQuery Smooth Scroll - v1.5.4 - 2014-11-17
 * https://github.com/kswedberg/jquery-smooth-scroll
 * Copyright (c) 2014 Karl Swedberg
 * Licensed MIT (https://github.com/kswedberg/jquery-smooth-scroll/blob/master/LICENSE-MIT)
 */;(function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)})(function(t){function e(t){return t.replace(/(:|\.|\/)/g,"\\$1")}var l="1.5.4",o={},n={exclude:[],excludeWithin:[],offset:0,direction:"top",scrollElement:null,scrollTarget:null,beforeScroll:function(){},afterScroll:function(){},easing:"swing",speed:400,autoCoefficient:2,preventDefault:!0},s=function(e){var l=[],o=!1,n=e.dir&&"left"===e.dir?"scrollLeft":"scrollTop";return this.each(function(){if(this!==document&&this!==window){var e=t(this);e[n]()>0?l.push(this):(e[n](1),o=e[n]()>0,o&&l.push(this),e[n](0))}}),l.length||this.each(function(){"BODY"===this.nodeName&&(l=[this])}),"first"===e.el&&l.length>1&&(l=[l[0]]),l};t.fn.extend({scrollable:function(t){var e=s.call(this,{dir:t});return this.pushStack(e)},firstScrollable:function(t){var e=s.call(this,{el:"first",dir:t});return this.pushStack(e)},smoothScroll:function(l,o){if(l=l||{},"options"===l)return o?this.each(function(){var e=t(this),l=t.extend(e.data("ssOpts")||{},o);t(this).data("ssOpts",l)}):this.first().data("ssOpts");var n=t.extend({},t.fn.smoothScroll.defaults,l),s=t.smoothScroll.filterPath(location.pathname);return this.unbind("click.smoothscroll").bind("click.smoothscroll",function(l){var o=this,r=t(this),i=t.extend({},n,r.data("ssOpts")||{}),c=n.exclude,a=i.excludeWithin,f=0,h=0,u=!0,d={},p=location.hostname===o.hostname||!o.hostname,m=i.scrollTarget||t.smoothScroll.filterPath(o.pathname)===s,S=e(o.hash);if(i.scrollTarget||p&&m&&S){for(;u&&c.length>f;)r.is(e(c[f++]))&&(u=!1);for(;u&&a.length>h;)r.closest(a[h++]).length&&(u=!1)}else u=!1;u&&(i.preventDefault&&l.preventDefault(),t.extend(d,i,{scrollTarget:i.scrollTarget||S,link:o}),t.smoothScroll(d))}),this}}),t.smoothScroll=function(e,l){if("options"===e&&"object"==typeof l)return t.extend(o,l);var n,s,r,i,c,a=0,f="offset",h="scrollTop",u={},d={};"number"==typeof e?(n=t.extend({link:null},t.fn.smoothScroll.defaults,o),r=e):(n=t.extend({link:null},t.fn.smoothScroll.defaults,e||{},o),n.scrollElement&&(f="position","static"===n.scrollElement.css("position")&&n.scrollElement.css("position","relative"))),h="left"===n.direction?"scrollLeft":h,n.scrollElement?(s=n.scrollElement,/^(?:HTML|BODY)$/.test(s[0].nodeName)||(a=s[h]())):s=t("html, body").firstScrollable(n.direction),n.beforeScroll.call(s,n),r="number"==typeof e?e:l||t(n.scrollTarget)[f]()&&t(n.scrollTarget)[f]()[n.direction]||0,u[h]=r+a+n.offset,i=n.speed,"auto"===i&&(c=u[h]-s.scrollTop(),0>c&&(c*=-1),i=c/n.autoCoefficient),d={duration:i,easing:n.easing,complete:function(){n.afterScroll.call(n.link,n)}},n.step&&(d.step=n.step),s.length?s.stop().animate(u,d):n.afterScroll.call(n.link,n)},t.smoothScroll.version=l,t.smoothScroll.filterPath=function(t){return t=t||"",t.replace(/^\//,"").replace(/(?:index|default).[a-zA-Z]{3,4}$/,"").replace(/\/$/,"")},t.fn.smoothScroll.defaults=n});;;var JSON;if(!JSON){JSON={}}(function(){function f(a){return a<10?"0"+a:a}function quote(a){escapable.lastIndex=0;return escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return typeof b==="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g=gap,h,i=b[a];if(i&&typeof i==="object"&&typeof i.toJSON==="function"){i=i.toJSON(a)}if(typeof rep==="function"){i=rep.call(b,a,i)}switch(typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i){return"null"}gap+=indent;h=[];if(Object.prototype.toString.apply(i)==="[object Array]"){f=i.length;for(c=0;c<f;c+=1){h[c]=str(c,i)||"null"}e=h.length===0?"[]":gap?"[\n"+gap+h.join(",\n"+gap)+"\n"+g+"]":"["+h.join(",")+"]";gap=g;return e}if(rep&&typeof rep==="object"){f=rep.length;for(c=0;c<f;c+=1){if(typeof rep[c]==="string"){d=rep[c];e=str(d,i);if(e){h.push(quote(d)+(gap?": ":":")+e)}}}}else{for(d in i){if(Object.prototype.hasOwnProperty.call(i,d)){e=str(d,i);if(e){h.push(quote(d)+(gap?": ":":")+e)}}}}e=h.length===0?"{}":gap?"{\n"+gap+h.join(",\n"+gap)+"\n"+g+"}":"{"+h.join(",")+"}";gap=g;return e}}"use strict";if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(a){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b"," ":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;if(typeof JSON.stringify!=="function"){JSON.stringify=function(a,b,c){var d;gap="";indent="";if(typeof c==="number"){for(d=0;d<c;d+=1){indent+=" "}}else if(typeof c==="string"){indent=c}rep=b;if(b&&typeof b!=="function"&&(typeof b!=="object"||typeof b.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":a})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&typeof e==="object"){for(c in e){if(Object.prototype.hasOwnProperty.call(e,c)){d=walk(e,c);if(d!==undefined){e[c]=d}else{delete e[c]}}}}return reviver.call(a,b,e)}var j;text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}})();
/*!
 * Scroll Lock v1.1.1
 * https://github.com/MohammadYounes/jquery-scrollLock
 *
 */;!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){function e(a){var b=a.prop("clientWidth"),c=a.prop("offsetWidth"),d=parseInt(a.css("border-right-width"),10),e=parseInt(a.css("border-left-width"),10);return c>b+e+d}var b="onmousewheel"in window?"ActiveXObject"in window?"wheel":"mousewheel":"DOMMouseScroll",c=".scrollLock",d=a.fn.scrollLock;a.fn.scrollLock=function(d,f,g){return"string"!=typeof f&&(f=null),void 0!==d&&!d||"off"===d?this.each(function(){a(this).off(c)}):this.each(function(){a(this).on(b+c,f,function(b){if(!b.ctrlKey){var c=a(this);if(g===!0||e(c)){b.stopPropagation();var d=c.scrollTop(),f=c.prop("scrollHeight"),h=c.prop("clientHeight"),i=b.originalEvent.wheelDelta||-1*b.originalEvent.detail||-1*b.originalEvent.deltaY,j=0;if("wheel"===b.type){var k=c.height()/a(window).height();j=b.originalEvent.deltaY*k}(i>0&&0>=d+j||0>i&&d+j>=f-h)&&(b.preventDefault(),j&&c.scrollTop(d+j))}}})})},a.fn.scrollLock.noConflict=function(){return a.fn.scrollLock=d,this}});;!function($){"use strict";if(typeof ko!=='undefined'&&ko.bindingHandlers&&!ko.bindingHandlers.multiselect){ko.bindingHandlers.multiselect={init:function(element,valueAccessor,allBindingsAccessor,viewModel,bindingContext){var listOfSelectedItems=allBindingsAccessor().selectedOptions;var config=ko.utils.unwrapObservable(valueAccessor());$(element).multiselect(config);if(isObservableArray(listOfSelectedItems)){$(element).multiselect('select',ko.utils.unwrapObservable(listOfSelectedItems));listOfSelectedItems.subscribe(function(changes){var addedArray=[],deletedArray=[];forEach(changes,function(change){switch(change.status){case'added':addedArray.push(change.value);break;case'deleted':deletedArray.push(change.value);break;}});if(addedArray.length>0){$(element).multiselect('select',addedArray);}
if(deletedArray.length>0){$(element).multiselect('deselect',deletedArray);}},null,"arrayChange");}},update:function(element,valueAccessor,allBindingsAccessor,viewModel,bindingContext){var listOfItems=allBindingsAccessor().options,ms=$(element).data('multiselect'),config=ko.utils.unwrapObservable(valueAccessor());if(isObservableArray(listOfItems)){listOfItems.subscribe(function(theArray){$(element).multiselect('rebuild');});}
if(!ms){$(element).multiselect(config);}else{ms.updateOriginalOptions();}}};}
function isObservableArray(obj){return ko.isObservable(obj)&&!(obj.destroyAll===undefined);}
function forEach(array,callback){for(var index=0;index<array.length;++index){callback(array[index]);}}
function Multiselect(select,options){this.$select=$(select);this.options=this.mergeOptions($.extend({},options,this.$select.data()));this.originalOptions=this.$select.clone()[0].options;this.query='';this.searchTimeout=null;this.options.multiple=this.$select.attr('multiple')==="multiple";this.options.onChange=$.proxy(this.options.onChange,this);this.options.onDropdownShow=$.proxy(this.options.onDropdownShow,this);this.options.onDropdownHide=$.proxy(this.options.onDropdownHide,this);this.options.onDropdownShown=$.proxy(this.options.onDropdownShown,this);this.options.onDropdownHidden=$.proxy(this.options.onDropdownHidden,this);this.buildContainer();this.buildButton();this.buildDropdown();this.buildSelectAll();this.buildDropdownOptions();this.buildFilter();this.updateButtonText();this.updateSelectAll();if(this.options.disableIfEmpty&&$('option',this.$select).length<=0){this.disable();}
this.$select.hide().after(this.$container);};Multiselect.prototype={defaults:{buttonText:function(options,select){if(options.length===0){return this.nonSelectedText+' <b class="caret"></b>';}else if(options.length==$('option',$(select)).length){return this.allSelectedText+' <b class="caret"></b>';}else if(options.length>this.numberDisplayed){return options.length+' '+this.nSelectedText+' <b class="caret"></b>';}else{var selected='';options.each(function(){var label=($(this).attr('label')!==undefined)?$(this).attr('label'):$(this).html();selected+=label+', ';});return selected.substr(0,selected.length-2)+' <b class="caret"></b>';}},buttonTitle:function(options,select){if(options.length===0){return this.nonSelectedText;}else{var selected='';options.each(function(){selected+=$(this).text()+', ';});return selected.substr(0,selected.length-2);}},label:function(element){return $(element).attr('label')||$(element).html();},onChange:function(option,checked){},onDropdownShow:function(event){},onDropdownHide:function(event){},onDropdownShown:function(event){},onDropdownHidden:function(event){},buttonClass:'btn btn-default',buttonWidth:'auto',buttonContainer:'<div class="btn-group" />',dropRight:false,selectedClass:'active',maxHeight:false,checkboxName:false,includeSelectAllOption:false,includeSelectAllIfMoreThan:0,selectAllText:' Select all',selectAllValue:'multiselect-all',selectAllName:false,enableFiltering:false,enableCaseInsensitiveFiltering:false,enableClickableOptGroups:false,filterPlaceholder:'Search',filterBehavior:'text',includeFilterClearBtn:true,preventInputChangeEvent:false,nonSelectedText:'None selected',nSelectedText:'selected',allSelectedText:'All selected',numberDisplayed:3,disableIfEmpty:false,templates:{button:'<button type="button" class="multiselect dropdown-toggle" data-toggle="dropdown"></button>',ul:'<ul class="multiselect-container dropdown-menu"></ul>',filter:'<li class="multiselect-item filter"><div class="input-group"><span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span><input class="form-control multiselect-search" type="text"></div></li>',filterClearBtn:'<span class="input-group-btn"><button class="btn btn-default multiselect-clear-filter" type="button"><i class="glyphicon glyphicon-remove"></i></button></span>',li:'<li><a href="javascript:void(0);"><label></label></a></li>',divider:'<li class="multiselect-item divider"></li>',liGroup:'<li class="multiselect-item multiselect-group"><label></label></li>'}},constructor:Multiselect,buildContainer:function(){this.$container=$(this.options.buttonContainer);this.$container.on('show.bs.dropdown',this.options.onDropdownShow);this.$container.on('hide.bs.dropdown',this.options.onDropdownHide);this.$container.on('shown.bs.dropdown',this.options.onDropdownShown);this.$container.on('hidden.bs.dropdown',this.options.onDropdownHidden);},buildButton:function(){this.$button=$(this.options.templates.button).addClass(this.options.buttonClass);if(this.$select.prop('disabled')){this.disable();}else{this.enable();}
if(this.options.buttonWidth&&this.options.buttonWidth!=='auto'){this.$button.css({'width':this.options.buttonWidth});this.$container.css({'width':this.options.buttonWidth});}
var tabindex=this.$select.attr('tabindex');if(tabindex){this.$button.attr('tabindex',tabindex);}
this.$container.prepend(this.$button);},buildDropdown:function(){this.$ul=$(this.options.templates.ul);if(this.options.dropRight){this.$ul.addClass('pull-right');}
if(this.options.maxHeight){this.$ul.css({'max-height':this.options.maxHeight+'px','overflow-y':'auto','overflow-x':'hidden'});}
this.$container.append(this.$ul);},buildDropdownOptions:function(){this.$select.children().each($.proxy(function(index,element){var $element=$(element);var tag=$element.prop('tagName').toLowerCase();if($element.prop('value')===this.options.selectAllValue){return;}
if(tag==='optgroup'){this.createOptgroup(element);}else if(tag==='option'){if($element.data('role')==='divider'){this.createDivider();}else{this.createOptionValue(element);}}},this));$('li input',this.$ul).on('change',$.proxy(function(event){var $target=$(event.target);var checked=$target.prop('checked')||false;var isSelectAllOption=$target.val()===this.options.selectAllValue;if(this.options.selectedClass){if(checked){$target.closest('li').addClass(this.options.selectedClass);}else{$target.closest('li').removeClass(this.options.selectedClass);}}
var value=$target.val();var $option=this.getOptionByValue(value);var $optionsNotThis=$('option',this.$select).not($option);var $checkboxesNotThis=$('input',this.$container).not($target);if(isSelectAllOption){if(checked){this.selectAll();}else{this.deselectAll();}}
if(!isSelectAllOption){if(checked){$option.prop('selected',true);if(this.options.multiple){$option.prop('selected',true);}else{if(this.options.selectedClass){$($checkboxesNotThis).closest('li').removeClass(this.options.selectedClass);}
$($checkboxesNotThis).prop('checked',false);$optionsNotThis.prop('selected',false);this.$button.click();}
if(this.options.selectedClass==="active"){$optionsNotThis.closest("a").css("outline","");}}else{$option.prop('selected',false);}}
this.$select.change();this.updateButtonText();this.updateSelectAll();this.options.onChange($option,checked);if(this.options.preventInputChangeEvent){return false;}},this));$('li a',this.$ul).on('touchstart click',function(event){event.stopPropagation();var $target=$(event.target);if(document.getSelection().type==='Range'){var $input=$(this).find("input:first");$input.prop("checked",!$input.prop("checked")).trigger("change");}
if(event.shiftKey){var checked=$target.prop('checked')||false;if(checked){var prev=$target.closest('li').siblings('li[class="active"]:first');var currentIdx=$target.closest('li').index();var prevIdx=prev.index();if(currentIdx>prevIdx){$target.closest("li").prevUntil(prev).each(function(){$(this).find("input:first").prop("checked",true).trigger("change");});}else{$target.closest("li").nextUntil(prev).each(function(){$(this).find("input:first").prop("checked",true).trigger("change");});}}}
$target.blur();});this.$container.off('keydown.multiselect').on('keydown.multiselect',$.proxy(function(event){if($('input[type="text"]',this.$container).is(':focus')){return;}
if(event.keyCode===9&&this.$container.hasClass('open')){this.$button.click();}else{var $items=$(this.$container).find("li:not(.divider):not(.disabled) a").filter(":visible");if(!$items.length){return;}
var index=$items.index($items.filter(':focus'));if(event.keyCode===38&&index>0){index--;}
else if(event.keyCode===40&&index<$items.length-1){index++;}else if(!~index){index=0;}
var $current=$items.eq(index);$current.focus();if(event.keyCode===32||event.keyCode===13){var $checkbox=$current.find('input');$checkbox.prop("checked",!$checkbox.prop("checked"));$checkbox.change();}
event.stopPropagation();event.preventDefault();}},this));if(this.options.enableClickableOptGroups&&this.options.multiple){$('li.multiselect-group',this.$ul).on('click',$.proxy(function(event){event.stopPropagation();var group=$(event.target).parent();var $options=group.nextUntil('li.multiselect-group');var allChecked=true;var optionInputs=$options.find('input');optionInputs.each(function(){allChecked=allChecked&&$(this).prop('checked');});optionInputs.prop('checked',!allChecked).trigger('change');},this));}},createOptionValue:function(element){var $element=$(element);if($element.is(':selected')){$element.prop('selected',true);}
var label=this.options.label(element);var value=$element.val();var inputType=this.options.multiple?"checkbox":"radio";var $li=$(this.options.templates.li);var $label=$('label',$li);$label.addClass(inputType);var $checkbox=$('<input/>').attr('type',inputType);if(this.options.checkboxName){$checkbox.attr('name',this.options.checkboxName);}
$label.append($checkbox);var selected=$element.prop('selected')||false;$checkbox.val(value);if(value===this.options.selectAllValue){$li.addClass("multiselect-item multiselect-all");$checkbox.parent().parent().addClass('multiselect-all');}
$label.append(" "+label);$label.attr('title',$element.attr('title'));this.$ul.append($li);if($element.is(':disabled')){$checkbox.attr('disabled','disabled').prop('disabled',true).closest('a').attr("tabindex","-1").closest('li').addClass('disabled');}
$checkbox.prop('checked',selected);if(selected&&this.options.selectedClass){$checkbox.closest('li').addClass(this.options.selectedClass);}},createDivider:function(element){var $divider=$(this.options.templates.divider);this.$ul.append($divider);},createOptgroup:function(group){var groupName=$(group).prop('label');var $li=$(this.options.templates.liGroup);$('label',$li).text(groupName);if(this.options.enableClickableOptGroups){$li.addClass('multiselect-group-clickable');}
this.$ul.append($li);if($(group).is(':disabled')){$li.addClass('disabled');}
$('option',group).each($.proxy(function(index,element){this.createOptionValue(element);},this));},buildSelectAll:function(){if(typeof this.options.selectAllValue==='number'){this.options.selectAllValue=this.options.selectAllValue.toString();}
var alreadyHasSelectAll=this.hasSelectAll();if(!alreadyHasSelectAll&&this.options.includeSelectAllOption&&this.options.multiple&&$('option',this.$select).length>this.options.includeSelectAllIfMoreThan){if(this.options.includeSelectAllDivider){this.$ul.prepend($(this.options.templates.divider));}
var $li=$(this.options.templates.li);$('label',$li).addClass("checkbox");if(this.options.selectAllName){$('label',$li).append('<input type="checkbox" name="'+this.options.selectAllName+'" />');}else{$('label',$li).append('<input type="checkbox" />');}
var $checkbox=$('input',$li);$checkbox.val(this.options.selectAllValue);$li.addClass("multiselect-item multiselect-all");$checkbox.parent().parent().addClass('multiselect-all');$('label',$li).append(" "+this.options.selectAllText);this.$ul.prepend($li);$checkbox.prop('checked',false);}},buildFilter:function(){if(this.options.enableFiltering||this.options.enableCaseInsensitiveFiltering){var enableFilterLength=Math.max(this.options.enableFiltering,this.options.enableCaseInsensitiveFiltering);if(this.$select.find('option').length>=enableFilterLength){this.$filter=$(this.options.templates.filter);$('input',this.$filter).attr('placeholder',this.options.filterPlaceholder);if(this.options.includeFilterClearBtn){var clearBtn=$(this.options.templates.filterClearBtn);clearBtn.on('click',$.proxy(function(event){clearTimeout(this.searchTimeout);this.$filter.find('.multiselect-search').val('');$('li',this.$ul).show().removeClass("filter-hidden");this.updateSelectAll();},this));this.$filter.find('.input-group').append(clearBtn);}
this.$ul.prepend(this.$filter);this.$filter.val(this.query).on('click',function(event){event.stopPropagation();}).on('input keydown',$.proxy(function(event){if(event.which===13){event.preventDefault();}
clearTimeout(this.searchTimeout);this.searchTimeout=this.asyncFunction($.proxy(function(){if(this.query!==event.target.value){this.query=event.target.value;var currentGroup,currentGroupVisible;$.each($('li',this.$ul),$.proxy(function(index,element){var value=$('input',element).val();var text=$('label',element).text();var filterCandidate='';if((this.options.filterBehavior==='text')){filterCandidate=text;}else if((this.options.filterBehavior==='value')){filterCandidate=value;}else if(this.options.filterBehavior==='both'){filterCandidate=text+'\n'+value;}
if(value!==this.options.selectAllValue&&text){var showElement=false;if(this.options.enableCaseInsensitiveFiltering&&filterCandidate.toLowerCase().indexOf(this.query.toLowerCase())>-1){showElement=true;}else if(filterCandidate.indexOf(this.query)>-1){showElement=true;}
$(element).toggle(showElement).toggleClass('filter-hidden',!showElement);if($(element).hasClass('multiselect-group')){currentGroup=element;currentGroupVisible=showElement;}else{if(showElement){$(currentGroup).show().removeClass('filter-hidden');}
if(!showElement&&currentGroupVisible){$(element).show().removeClass('filter-hidden');}}}},this));}
this.updateSelectAll();},this),300,this);},this));}}},destroy:function(){this.$container.remove();this.$select.show();this.$select.data('multiselect',null);},refresh:function(){$('option',this.$select).each($.proxy(function(index,element){var $input=$('li input',this.$ul).filter(function(){return $(this).val()===$(element).val();});if($(element).is(':selected')){$input.prop('checked',true);if(this.options.selectedClass){$input.closest('li').addClass(this.options.selectedClass);}}else{$input.prop('checked',false);if(this.options.selectedClass){$input.closest('li').removeClass(this.options.selectedClass);}}
if($(element).is(":disabled")){$input.attr('disabled','disabled').prop('disabled',true).closest('li').addClass('disabled');}else{$input.prop('disabled',false).closest('li').removeClass('disabled');}},this));this.updateButtonText();this.updateSelectAll();},select:function(selectValues,triggerOnChange){if(!$.isArray(selectValues)){selectValues=[selectValues];}
for(var i=0;i<selectValues.length;i++){var value=selectValues[i];if(value===null||value===undefined){continue;}
var $option=this.getOptionByValue(value);var $checkbox=this.getInputByValue(value);if($option===undefined||$checkbox===undefined){continue;}
if(!this.options.multiple){this.deselectAll(false);}
if(this.options.selectedClass){$checkbox.closest('li').addClass(this.options.selectedClass);}
$checkbox.prop('checked',true);$option.prop('selected',true);}
this.updateButtonText();this.updateSelectAll();if(triggerOnChange&&selectValues.length===1){this.options.onChange($option,true);}},clearSelection:function(){this.deselectAll(false);this.updateButtonText();this.updateSelectAll();},deselect:function(deselectValues,triggerOnChange){if(!$.isArray(deselectValues)){deselectValues=[deselectValues];}
for(var i=0;i<deselectValues.length;i++){var value=deselectValues[i];if(value===null||value===undefined){continue;}
var $option=this.getOptionByValue(value);var $checkbox=this.getInputByValue(value);if($option===undefined||$checkbox===undefined){continue;}
if(this.options.selectedClass){$checkbox.closest('li').removeClass(this.options.selectedClass);}
$checkbox.prop('checked',false);$option.prop('selected',false);}
this.updateButtonText();this.updateSelectAll();if(triggerOnChange&&deselectValues.length===1){this.options.onChange($option,false);}},selectAll:function(justVisible){var justVisible=typeof justVisible==='undefined'?true:justVisible;var allCheckboxes=$("li input[type='checkbox']:enabled",this.$ul);var visibleCheckboxes=allCheckboxes.filter(":visible");var allCheckboxesCount=allCheckboxes.length;var visibleCheckboxesCount=visibleCheckboxes.length;if(justVisible){visibleCheckboxes.prop('checked',true);$("li:not(.divider):not(.disabled)",this.$ul).filter(":visible").addClass(this.options.selectedClass);}else{allCheckboxes.prop('checked',true);$("li:not(.divider):not(.disabled)",this.$ul).addClass(this.options.selectedClass);}
if(allCheckboxesCount===visibleCheckboxesCount||justVisible===false){$("option:enabled",this.$select).prop('selected',true);}else{var values=visibleCheckboxes.map(function(){return $(this).val();}).get();$("option:enabled",this.$select).filter(function(index){return $.inArray($(this).val(),values)!==-1;}).prop('selected',true);}},deselectAll:function(justVisible){var justVisible=typeof justVisible==='undefined'?true:justVisible;if(justVisible){var visibleCheckboxes=$("li input[type='checkbox']:enabled",this.$ul).filter(":visible");visibleCheckboxes.prop('checked',false);var values=visibleCheckboxes.map(function(){return $(this).val();}).get();$("option:enabled",this.$select).filter(function(index){return $.inArray($(this).val(),values)!==-1;}).prop('selected',false);if(this.options.selectedClass){$("li:not(.divider):not(.disabled)",this.$ul).filter(":visible").removeClass(this.options.selectedClass);}}else{$("li input[type='checkbox']:enabled",this.$ul).prop('checked',false);$("option:enabled",this.$select).prop('selected',false);if(this.options.selectedClass){$("li:not(.divider):not(.disabled)",this.$ul).removeClass(this.options.selectedClass);}}},rebuild:function(){this.$ul.html('');this.options.multiple=this.$select.attr('multiple')==="multiple";this.buildSelectAll();this.buildDropdownOptions();this.buildFilter();this.updateButtonText();this.updateSelectAll();if(this.options.disableIfEmpty&&$('option',this.$select).length<=0){this.disable();}
if(this.options.dropRight){this.$ul.addClass('pull-right');}},dataprovider:function(dataprovider){var optionDOM="";var groupCounter=0;var tags=$('');$.each(dataprovider,function(index,option){var tag;if($.isArray(option.children)){groupCounter++;tag=$('<optgroup/>').attr({label:option.label||'Group '+groupCounter});forEach(option.children,function(subOption){tag.append($('<option/>').attr({value:subOption.value,label:subOption.label||subOption.value,title:subOption.title,selected:!!subOption.selected}));});optionDOM+='</optgroup>';}else{tag=$('<option/>').attr({value:option.value,label:option.label||option.value,title:option.title,selected:!!option.selected});}
tags=tags.add(tag);});this.$select.empty().append(tags);this.rebuild();},enable:function(){this.$select.prop('disabled',false);this.$button.prop('disabled',false).removeClass('disabled');},disable:function(){this.$select.prop('disabled',true);this.$button.prop('disabled',true).addClass('disabled');},setOptions:function(options){this.options=this.mergeOptions(options);},mergeOptions:function(options){return $.extend(true,{},this.defaults,options);},hasSelectAll:function(){return $('li.'+this.options.selectAllValue,this.$ul).length>0;},updateSelectAll:function(){if(this.hasSelectAll()){var allBoxes=$("li:not(.multiselect-item):not(.filter-hidden) input:enabled",this.$ul);var allBoxesLength=allBoxes.length;var checkedBoxesLength=allBoxes.filter(":checked").length;var selectAllLi=$("li."+this.options.selectAllValue,this.$ul);var selectAllInput=selectAllLi.find("input");if(checkedBoxesLength>0&&checkedBoxesLength===allBoxesLength){selectAllInput.prop("checked",true);selectAllLi.addClass(this.options.selectedClass);}else{selectAllInput.prop("checked",false);selectAllLi.removeClass(this.options.selectedClass);}}},updateButtonText:function(){var options=this.getSelected();$('.multiselect',this.$container).html(this.options.buttonText(options,this.$select));$('.multiselect',this.$container).attr('title',this.options.buttonTitle(options,this.$select));},getSelected:function(){return $('option',this.$select).filter(":selected");},getOptionByValue:function(value){var options=$('option',this.$select);var valueToCompare=value.toString();for(var i=0;i<options.length;i=i+1){var option=options[i];if(option.value===valueToCompare){return $(option);}}},getInputByValue:function(value){var checkboxes=$('li input',this.$ul);var valueToCompare=value.toString();for(var i=0;i<checkboxes.length;i=i+1){var checkbox=checkboxes[i];if(checkbox.value===valueToCompare){return $(checkbox);}}},updateOriginalOptions:function(){this.originalOptions=this.$select.clone()[0].options;},asyncFunction:function(callback,timeout,self){var args=Array.prototype.slice.call(arguments,3);return setTimeout(function(){callback.apply(self||window,args);},timeout);}};$.fn.multiselect=function(option,parameter,extraOptions){return this.each(function(){var data=$(this).data('multiselect');var options=typeof option==='object'&&option;if(!data){data=new Multiselect(this,options);$(this).data('multiselect',data);}
if(typeof option==='string'){data[option](parameter,extraOptions);if(option==='destroy'){$(this).data('multiselect',false);}}});};$.fn.multiselect.Constructor=Multiselect;$(function(){$("select[data-role=multiselect]").multiselect();});}(window.jQuery);;!function(a){return"function"==typeof define&&define.amd?define(["jquery"],function(b){return a(b,window,document)}):a(jQuery,window,document)}(function(a,b,c){"use strict";var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H;z={paneClass:"nano-pane",sliderClass:"nano-slider",contentClass:"nano-content",iOSNativeScrolling:!1,preventPageScrolling:!1,disableResize:!1,alwaysVisible:!1,flashDelay:1500,sliderMinHeight:20,sliderMaxHeight:null,documentContext:null,windowContext:null},u="scrollbar",t="scroll",l="mousedown",m="mouseenter",n="mousemove",p="mousewheel",o="mouseup",s="resize",h="drag",i="enter",w="up",r="panedown",f="DOMMouseScroll",g="down",x="wheel",j="keydown",k="keyup",v="touchmove",d="Microsoft Internet Explorer"===b.navigator.appName&&/msie 7./i.test(b.navigator.appVersion)&&b.ActiveXObject,e=null,D=b.requestAnimationFrame,y=b.cancelAnimationFrame,F=c.createElement("div").style,H=function(){var a,b,c,d,e,f;for(d=["t","webkitT","MozT","msT","OT"],a=e=0,f=d.length;f>e;a=++e)if(c=d[a],b=d[a]+"ransform",b in F)return d[a].substr(0,d[a].length-1);return!1}(),G=function(a){return H===!1?!1:""===H?a:H+a.charAt(0).toUpperCase()+a.substr(1)},E=G("transform"),B=E!==!1,A=function(){var a,b,d;return a=c.createElement("div"),b=a.style,b.position="absolute",b.width="100px",b.height="100px",b.overflow=t,b.top="-9999px",c.body.appendChild(a),d=a.offsetWidth-a.clientWidth,c.body.removeChild(a),d},C=function(){var a,c,d;return c=b.navigator.userAgent,(a=/(?=.+Mac OS X)(?=.+Firefox)/.test(c))?(d=/Firefox\/\d{2}\./.exec(c),d&&(d=d[0].replace(/\D+/g,"")),a&&+d>23):!1},q=function(){function j(d,f){this.el=d,this.options=f,e||(e=A()),this.$el=a(this.el),this.doc=a(this.options.documentContext||c),this.win=a(this.options.windowContext||b),this.body=this.doc.find("body"),this.$content=this.$el.children("."+f.contentClass),this.$content.attr("tabindex",this.options.tabIndex||0),this.content=this.$content[0],this.previousPosition=0,this.options.iOSNativeScrolling&&null!=this.el.style.WebkitOverflowScrolling?this.nativeScrolling():this.generate(),this.createEvents(),this.addEvents(),this.reset()}return j.prototype.preventScrolling=function(a,b){if(this.isActive)if(a.type===f)(b===g&&a.originalEvent.detail>0||b===w&&a.originalEvent.detail<0)&&a.preventDefault();else if(a.type===p){if(!a.originalEvent||!a.originalEvent.wheelDelta)return;(b===g&&a.originalEvent.wheelDelta<0||b===w&&a.originalEvent.wheelDelta>0)&&a.preventDefault()}},j.prototype.nativeScrolling=function(){this.$content.css({WebkitOverflowScrolling:"touch"}),this.iOSNativeScrolling=!0,this.isActive=!0},j.prototype.updateScrollValues=function(){var a,b;a=this.content,this.maxScrollTop=a.scrollHeight-a.clientHeight,this.prevScrollTop=this.contentScrollTop||0,this.contentScrollTop=a.scrollTop,b=this.contentScrollTop>this.previousPosition?"down":this.contentScrollTop<this.previousPosition?"up":"same",this.previousPosition=this.contentScrollTop,"same"!==b&&this.$el.trigger("update",{position:this.contentScrollTop,maximum:this.maxScrollTop,direction:b}),this.iOSNativeScrolling||(this.maxSliderTop=this.paneHeight-this.sliderHeight,this.sliderTop=0===this.maxScrollTop?0:this.contentScrollTop*this.maxSliderTop/this.maxScrollTop)},j.prototype.setOnScrollStyles=function(){var a;B?(a={},a[E]="translate(0, "+this.sliderTop+"px)"):a={top:this.sliderTop},D?(y&&this.scrollRAF&&y(this.scrollRAF),this.scrollRAF=D(function(b){return function(){return b.scrollRAF=null,b.slider.css(a)}}(this))):this.slider.css(a)},j.prototype.createEvents=function(){this.events={down:function(a){return function(b){return a.isBeingDragged=!0,a.offsetY=b.pageY-a.slider.offset().top,a.slider.is(b.target)||(a.offsetY=0),a.pane.addClass("active"),a.doc.bind(n,a.events[h]).bind(o,a.events[w]),a.body.bind(m,a.events[i]),!1}}(this),drag:function(a){return function(b){return a.sliderY=b.pageY-a.$el.offset().top-a.paneTop-(a.offsetY||.5*a.sliderHeight),a.scroll(),a.contentScrollTop>=a.maxScrollTop&&a.prevScrollTop!==a.maxScrollTop?a.$el.trigger("scrollend"):0===a.contentScrollTop&&0!==a.prevScrollTop&&a.$el.trigger("scrolltop"),!1}}(this),up:function(a){return function(){return a.isBeingDragged=!1,a.pane.removeClass("active"),a.doc.unbind(n,a.events[h]).unbind(o,a.events[w]),a.body.unbind(m,a.events[i]),!1}}(this),resize:function(a){return function(){a.reset()}}(this),panedown:function(a){return function(b){return a.sliderY=(b.offsetY||b.originalEvent.layerY)-.5*a.sliderHeight,a.scroll(),a.events.down(b),!1}}(this),scroll:function(a){return function(b){a.updateScrollValues(),a.isBeingDragged||(a.iOSNativeScrolling||(a.sliderY=a.sliderTop,a.setOnScrollStyles()),null!=b&&(a.contentScrollTop>=a.maxScrollTop?(a.options.preventPageScrolling&&a.preventScrolling(b,g),a.prevScrollTop!==a.maxScrollTop&&a.$el.trigger("scrollend")):0===a.contentScrollTop&&(a.options.preventPageScrolling&&a.preventScrolling(b,w),0!==a.prevScrollTop&&a.$el.trigger("scrolltop"))))}}(this),wheel:function(a){return function(b){var c;if(null!=b)return c=b.delta||b.wheelDelta||b.originalEvent&&b.originalEvent.wheelDelta||-b.detail||b.originalEvent&&-b.originalEvent.detail,c&&(a.sliderY+=-c/3),a.scroll(),!1}}(this),enter:function(a){return function(b){var c;if(a.isBeingDragged)return 1!==(b.buttons||b.which)?(c=a.events)[w].apply(c,arguments):void 0}}(this)}},j.prototype.addEvents=function(){var a;this.removeEvents(),a=this.events,this.options.disableResize||this.win.bind(s,a[s]),this.iOSNativeScrolling||(this.slider.bind(l,a[g]),this.pane.bind(l,a[r]).bind(""+p+" "+f,a[x])),this.$content.bind(""+t+" "+p+" "+f+" "+v,a[t])},j.prototype.removeEvents=function(){var a;a=this.events,this.win.unbind(s,a[s]),this.iOSNativeScrolling||(this.slider.unbind(),this.pane.unbind()),this.$content.unbind(""+t+" "+p+" "+f+" "+v,a[t])},j.prototype.generate=function(){var a,c,d,f,g,h,i;return f=this.options,h=f.paneClass,i=f.sliderClass,a=f.contentClass,(g=this.$el.children("."+h)).length||g.children("."+i).length||this.$el.append('<div class="'+h+'"><div class="'+i+'" /></div>'),this.pane=this.$el.children("."+h),this.slider=this.pane.find("."+i),0===e&&C()?(d=b.getComputedStyle(this.content,null).getPropertyValue("padding-right").replace(/[^0-9.]+/g,""),c={right:-14,paddingRight:+d+14}):e&&(c={right:-e},this.$el.addClass("has-scrollbar")),null!=c&&this.$content.css(c),this},j.prototype.restore=function(){this.stopped=!1,this.iOSNativeScrolling||this.pane.show(),this.addEvents()},j.prototype.reset=function(){var a,b,c,f,g,h,i,j,k,l,m,n;return this.iOSNativeScrolling?void(this.contentHeight=this.content.scrollHeight):(this.$el.find("."+this.options.paneClass).length||this.generate().stop(),this.stopped&&this.restore(),a=this.content,f=a.style,g=f.overflowY,d&&this.$content.css({height:this.$content.height()}),b=a.scrollHeight+e,l=parseInt(this.$el.css("max-height"),10),l>0&&(this.$el.height(""),this.$el.height(a.scrollHeight>l?l:a.scrollHeight)),i=this.pane.outerHeight(!1),k=parseInt(this.pane.css("top"),10),h=parseInt(this.pane.css("bottom"),10),j=i+k+h,n=Math.round(j/b*j),n<this.options.sliderMinHeight?n=this.options.sliderMinHeight:null!=this.options.sliderMaxHeight&&n>this.options.sliderMaxHeight&&(n=this.options.sliderMaxHeight),g===t&&f.overflowX!==t&&(n+=e),this.maxSliderTop=j-n,this.contentHeight=b,this.paneHeight=i,this.paneOuterHeight=j,this.sliderHeight=n,this.paneTop=k,this.slider.height(n),this.events.scroll(),this.pane.show(),this.isActive=!0,a.scrollHeight===a.clientHeight||this.pane.outerHeight(!0)>=a.scrollHeight&&g!==t?(this.pane.hide(),this.isActive=!1):this.el.clientHeight===a.scrollHeight&&g===t?this.slider.hide():this.slider.show(),this.pane.css({opacity:this.options.alwaysVisible?1:"",visibility:this.options.alwaysVisible?"visible":""}),c=this.$content.css("position"),("static"===c||"relative"===c)&&(m=parseInt(this.$content.css("right"),10),m&&this.$content.css({right:"",marginRight:m})),this)},j.prototype.scroll=function(){return this.isActive?(this.sliderY=Math.max(0,this.sliderY),this.sliderY=Math.min(this.maxSliderTop,this.sliderY),this.$content.scrollTop(this.maxScrollTop*this.sliderY/this.maxSliderTop),this.iOSNativeScrolling||(this.updateScrollValues(),this.setOnScrollStyles()),this):void 0},j.prototype.scrollBottom=function(a){return this.isActive?(this.$content.scrollTop(this.contentHeight-this.$content.height()-a).trigger(p),this.stop().restore(),this):void 0},j.prototype.scrollTop=function(a){return this.isActive?(this.$content.scrollTop(+a).trigger(p),this.stop().restore(),this):void 0},j.prototype.scrollTo=function(a){return this.isActive?(this.scrollTop(this.$el.find(a).get(0).offsetTop),this):void 0},j.prototype.stop=function(){return y&&this.scrollRAF&&(y(this.scrollRAF),this.scrollRAF=null),this.stopped=!0,this.removeEvents(),this.iOSNativeScrolling||this.pane.hide(),this},j.prototype.destroy=function(){return this.stopped||this.stop(),!this.iOSNativeScrolling&&this.pane.length&&this.pane.remove(),d&&this.$content.height(""),this.$content.removeAttr("tabindex"),this.$el.hasClass("has-scrollbar")&&(this.$el.removeClass("has-scrollbar"),this.$content.css({right:""})),this},j.prototype.flash=function(){return!this.iOSNativeScrolling&&this.isActive?(this.reset(),this.pane.addClass("flashed"),setTimeout(function(a){return function(){a.pane.removeClass("flashed")}}(this),this.options.flashDelay),this):void 0},j}(),a.fn.nanoScroller=function(b){return this.each(function(){var c,d;if((d=this.nanoscroller)||(c=a.extend({},z,b),this.nanoscroller=d=new q(this,c)),b&&"object"==typeof b){if(a.extend(d.options,b),null!=b.scrollBottom)return d.scrollBottom(b.scrollBottom);if(null!=b.scrollTop)return d.scrollTop(b.scrollTop);if(b.scrollTo)return d.scrollTo(b.scrollTo);if("bottom"===b.scroll)return d.scrollBottom(0);if("top"===b.scroll)return d.scrollTop(0);if(b.scroll&&b.scroll instanceof a)return d.scrollTo(b.scroll);if(b.stop)return d.stop();if(b.destroy)return d.destroy();if(b.flash)return d.flash()}return d.reset()})},a.fn.nanoScroller.Constructor=q});;(function($,window){"use strict";var namespace="scroller",$body=null,classes={base:"scroller",content:"scroller-content",bar:"scroller-bar",track:"scroller-track",handle:"scroller-handle",isHorizontal:"scroller-horizontal",isSetup:"scroller-setup",isActive:"scroller-active"},events={start:"touchstart."+namespace+" mousedown."+namespace,move:"touchmove."+namespace+" mousemove."+namespace,end:"touchend."+namespace+" mouseup."+namespace};var options={customClass:"",duration:0,handleSize:0,horizontal:false,trackMargin:0};var pub={defaults:function(opts){options=$.extend(options,opts||{});return(typeof this==='object')?$(this):true;},destroy:function(){return $(this).each(function(i,el){var data=$(el).data(namespace);if(data){data.$scroller.removeClass([data.customClass,classes.base,classes.isActive].join(" "));data.$bar.remove();data.$content.contents().unwrap();data.$content.off(classify(namespace));data.$scroller.off(classify(namespace)).removeData(namespace);}});},scroll:function(pos,dur){return $(this).each(function(i){var data=$(this).data(namespace),duration=dur||options.duration;if(typeof pos!=="number"){var $el=$(pos);if($el.length>0){var offset=$el.position();if(data.horizontal){pos=offset.left+data.$content.scrollLeft();}else{pos=offset.top+data.$content.scrollTop();}}else{pos=data.$content.scrollTop();}}
var styles=data.horizontal?{scrollLeft:pos}:{scrollTop:pos};data.$content.stop().animate(styles,duration);});},reset:function(){return $(this).each(function(i){var data=$(this).data(namespace);if(data){data.$scroller.addClass(classes.isSetup);var barStyles={},trackStyles={},handleStyles={},handlePosition=0,isActive=true;if(data.horizontal){data.barHeight=data.$content[0].offsetHeight-data.$content[0].clientHeight;data.frameWidth=data.$content.outerWidth();data.trackWidth=data.frameWidth-(data.trackMargin*2);data.scrollWidth=data.$content[0].scrollWidth;data.ratio=data.trackWidth / data.scrollWidth;data.trackRatio=data.trackWidth / data.scrollWidth;data.handleWidth=(data.handleSize>0)?data.handleSize:data.trackWidth*data.trackRatio;data.scrollRatio=(data.scrollWidth-data.frameWidth)/(data.trackWidth-data.handleWidth);data.handleBounds={left:0,right:data.trackWidth-data.handleWidth};data.$content.css({paddingBottom:data.barHeight+data.paddingBottom});var scrollLeft=data.$content.scrollLeft();handlePosition=scrollLeft*data.ratio;isActive=(data.scrollWidth<=data.frameWidth);barStyles={width:data.frameWidth};trackStyles={width:data.trackWidth,marginLeft:data.trackMargin,marginRight:data.trackMargin};handleStyles={width:data.handleWidth};}else{data.barWidth=data.$content[0].offsetWidth-data.$content[0].clientWidth;data.frameHeight=data.$content.outerHeight();data.trackHeight=data.frameHeight-(data.trackMargin*2);data.scrollHeight=data.$content[0].scrollHeight;data.ratio=data.trackHeight / data.scrollHeight;data.trackRatio=data.trackHeight / data.scrollHeight;data.handleHeight=(data.handleSize>0)?data.handleSize:data.trackHeight*data.trackRatio;data.scrollRatio=(data.scrollHeight-data.frameHeight)/(data.trackHeight-data.handleHeight);data.handleBounds={top:0,bottom:data.trackHeight-data.handleHeight};var scrollTop=data.$content.scrollTop();handlePosition=scrollTop*data.ratio;isActive=(data.scrollHeight<=data.frameHeight);barStyles={height:data.frameHeight};trackStyles={height:data.trackHeight,marginBottom:data.trackMargin,marginTop:data.trackMargin};handleStyles={height:data.handleHeight};}
if(isActive){data.$scroller.removeClass(classes.isActive);}else{data.$scroller.addClass(classes.isActive);}
data.$bar.css(barStyles);data.$track.css(trackStyles);data.$handle.css(handleStyles);position(data,handlePosition);data.$scroller.removeClass(classes.isSetup);}});}};function init(opts){opts=$.extend({},options,opts||{});if($body===null){$body=$("body");}
var $items=$(this);for(var i=0,count=$items.length;i<count;i++){build($items.eq(i),opts);}
return $items;}
function build($scroller,opts){if(!$scroller.hasClass(classes.base)){opts=$.extend({},opts,$scroller.data(namespace+"-options"));var html='';html+='<div class="'+classes.bar+'">';html+='<div class="'+classes.track+'">';html+='<div class="'+classes.handle+'">';html+='</div></div></div>';opts.paddingRight=parseInt($scroller.css("padding-right"),10);opts.paddingBottom=parseInt($scroller.css("padding-bottom"),10);$scroller.addClass([classes.base,opts.customClass].join(" ")).wrapInner('<div class="'+classes.content+'" />').prepend(html);if(opts.horizontal){$scroller.addClass(classes.isHorizontal);}
var data=$.extend({$scroller:$scroller,$content:$scroller.find(classify(classes.content)),$bar:$scroller.find(classify(classes.bar)),$track:$scroller.find(classify(classes.track)),$handle:$scroller.find(classify(classes.handle))},opts);data.trackMargin=parseInt(data.trackMargin,10);data.$content.on("scroll."+namespace,data,onScroll);data.$scroller.on(events.start,classify(classes.track),data,onTrackDown).on(events.start,classify(classes.handle),data,onHandleDown).data(namespace,data);pub.reset.apply($scroller);$(window).one("load",function(){pub.reset.apply($scroller);});}}
function onScroll(e){e.preventDefault();e.stopPropagation();var data=e.data,handleStyles={};if(data.horizontal){var scrollLeft=data.$content.scrollLeft();if(scrollLeft<0){scrollLeft=0;}
var handleLeft=scrollLeft / data.scrollRatio;if(handleLeft>data.handleBounds.right){handleLeft=data.handleBounds.right;}
handleStyles={left:handleLeft};}else{var scrollTop=data.$content.scrollTop();if(scrollTop<0){scrollTop=0;}
var handleTop=scrollTop / data.scrollRatio;if(handleTop>data.handleBounds.bottom){handleTop=data.handleBounds.bottom;}
handleStyles={top:handleTop};}
data.$handle.css(handleStyles);}
function onTrackDown(e){e.preventDefault();e.stopPropagation();var data=e.data,oe=e.originalEvent,offset=data.$track.offset(),touch=(typeof oe.targetTouches!=="undefined")?oe.targetTouches[0]:null,pageX=(touch)?touch.pageX:e.clientX,pageY=(touch)?touch.pageY:e.clientY;if(data.horizontal){data.mouseStart=pageX;data.handleLeft=pageX-offset.left-(data.handleWidth / 2);position(data,data.handleLeft);}else{data.mouseStart=pageY;data.handleTop=pageY-offset.top-(data.handleHeight / 2);position(data,data.handleTop);}
onStart(data);}
function onHandleDown(e){e.preventDefault();e.stopPropagation();var data=e.data,oe=e.originalEvent,touch=(typeof oe.targetTouches!=="undefined")?oe.targetTouches[0]:null,pageX=(touch)?touch.pageX:e.clientX,pageY=(touch)?touch.pageY:e.clientY;if(data.horizontal){data.mouseStart=pageX;data.handleLeft=parseInt(data.$handle.css("left"),10);}else{data.mouseStart=pageY;data.handleTop=parseInt(data.$handle.css("top"),10);}
onStart(data);}
function onStart(data){data.$content.off(classify(namespace));$body.on(events.move,data,onMouseMove).on(events.end,data,onMouseUp);}
function onMouseMove(e){e.preventDefault();e.stopPropagation();var data=e.data,oe=e.originalEvent,pos=0,delta=0,touch=(typeof oe.targetTouches!=="undefined")?oe.targetTouches[0]:null,pageX=(touch)?touch.pageX:e.clientX,pageY=(touch)?touch.pageY:e.clientY;if(data.horizontal){delta=data.mouseStart-pageX;pos=data.handleLeft-delta;}else{delta=data.mouseStart-pageY;pos=data.handleTop-delta;}
position(data,pos);}
function onMouseUp(e){e.preventDefault();e.stopPropagation();var data=e.data;data.$content.on("scroll.scroller",data,onScroll);$body.off(".scroller");}
function onTouchEnd(e){e.preventDefault();e.stopPropagation();var data=e.data;data.$content.on("scroll.scroller",data,onScroll);$body.off(".scroller");}
function position(data,pos){var handleStyles={};if(data.horizontal){if(pos<data.handleBounds.left){pos=data.handleBounds.left;}
if(pos>data.handleBounds.right){pos=data.handleBounds.right;}
var scrollLeft=Math.round(pos*data.scrollRatio);handleStyles={left:pos};data.$content.scrollLeft(scrollLeft);}else{if(pos<data.handleBounds.top){pos=data.handleBounds.top;}
if(pos>data.handleBounds.bottom){pos=data.handleBounds.bottom;}
var scrollTop=Math.round(pos*data.scrollRatio);handleStyles={top:pos};data.$content.scrollTop(scrollTop);}
data.$handle.css(handleStyles);}
function classify(text){return"."+text;}
$.fn[namespace]=function(method){if(pub[method]){return pub[method].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof method==='object'||!method){return init.apply(this,arguments);}
return this;};$[namespace]=function(method){if(method==="defaults"){pub.defaults.apply(this,Array.prototype.slice.call(arguments,1));}};})(jQuery);;(function(){var n=this,t=n._,r=Array.prototype,e=Object.prototype,u=Function.prototype,i=r.push,a=r.slice,o=r.concat,l=e.toString,c=e.hasOwnProperty,f=Array.isArray,s=Object.keys,p=u.bind,h=function(n){return n instanceof h?n:this instanceof h?void(this._wrapped=n):new h(n)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=h),exports._=h):n._=h,h.VERSION="1.7.0";var g=function(n,t,r){if(t===void 0)return n;switch(null==r?3:r){case 1:return function(r){return n.call(t,r)};case 2:return function(r,e){return n.call(t,r,e)};case 3:return function(r,e,u){return n.call(t,r,e,u)};case 4:return function(r,e,u,i){return n.call(t,r,e,u,i)}}return function(){return n.apply(t,arguments)}};h.iteratee=function(n,t,r){return null==n?h.identity:h.isFunction(n)?g(n,t,r):h.isObject(n)?h.matches(n):h.property(n)},h.each=h.forEach=function(n,t,r){if(null==n)return n;t=g(t,r);var e,u=n.length;if(u===+u)for(e=0;u>e;e++)t(n[e],e,n);else{var i=h.keys(n);for(e=0,u=i.length;u>e;e++)t(n[i[e]],i[e],n)}return n},h.map=h.collect=function(n,t,r){if(null==n)return[];t=h.iteratee(t,r);for(var e,u=n.length!==+n.length&&h.keys(n),i=(u||n).length,a=Array(i),o=0;i>o;o++)e=u?u[o]:o,a[o]=t(n[e],e,n);return a};var v="Reduce of empty array with no initial value";h.reduce=h.foldl=h.inject=function(n,t,r,e){null==n&&(n=[]),t=g(t,e,4);var u,i=n.length!==+n.length&&h.keys(n),a=(i||n).length,o=0;if(arguments.length<3){if(!a)throw new TypeError(v);r=n[i?i[o++]:o++]}for(;a>o;o++)u=i?i[o]:o,r=t(r,n[u],u,n);return r},h.reduceRight=h.foldr=function(n,t,r,e){null==n&&(n=[]),t=g(t,e,4);var u,i=n.length!==+n.length&&h.keys(n),a=(i||n).length;if(arguments.length<3){if(!a)throw new TypeError(v);r=n[i?i[--a]:--a]}for(;a--;)u=i?i[a]:a,r=t(r,n[u],u,n);return r},h.find=h.detect=function(n,t,r){var e;return t=h.iteratee(t,r),h.some(n,function(n,r,u){return t(n,r,u)?(e=n,!0):void 0}),e},h.filter=h.select=function(n,t,r){var e=[];return null==n?e:(t=h.iteratee(t,r),h.each(n,function(n,r,u){t(n,r,u)&&e.push(n)}),e)},h.reject=function(n,t,r){return h.filter(n,h.negate(h.iteratee(t)),r)},h.every=h.all=function(n,t,r){if(null==n)return!0;t=h.iteratee(t,r);var e,u,i=n.length!==+n.length&&h.keys(n),a=(i||n).length;for(e=0;a>e;e++)if(u=i?i[e]:e,!t(n[u],u,n))return!1;return!0},h.some=h.any=function(n,t,r){if(null==n)return!1;t=h.iteratee(t,r);var e,u,i=n.length!==+n.length&&h.keys(n),a=(i||n).length;for(e=0;a>e;e++)if(u=i?i[e]:e,t(n[u],u,n))return!0;return!1},h.contains=h.include=function(n,t){return null==n?!1:(n.length!==+n.length&&(n=h.values(n)),h.indexOf(n,t)>=0)},h.invoke=function(n,t){var r=a.call(arguments,2),e=h.isFunction(t);return h.map(n,function(n){return(e?t:n[t]).apply(n,r)})},h.pluck=function(n,t){return h.map(n,h.property(t))},h.where=function(n,t){return h.filter(n,h.matches(t))},h.findWhere=function(n,t){return h.find(n,h.matches(t))},h.max=function(n,t,r){var e,u,i=-1/0,a=-1/0;if(null==t&&null!=n){n=n.length===+n.length?n:h.values(n);for(var o=0,l=n.length;l>o;o++)e=n[o],e>i&&(i=e)}else t=h.iteratee(t,r),h.each(n,function(n,r,e){u=t(n,r,e),(u>a||u===-1/0&&i===-1/0)&&(i=n,a=u)});return i},h.min=function(n,t,r){var e,u,i=1/0,a=1/0;if(null==t&&null!=n){n=n.length===+n.length?n:h.values(n);for(var o=0,l=n.length;l>o;o++)e=n[o],i>e&&(i=e)}else t=h.iteratee(t,r),h.each(n,function(n,r,e){u=t(n,r,e),(a>u||1/0===u&&1/0===i)&&(i=n,a=u)});return i},h.shuffle=function(n){for(var t,r=n&&n.length===+n.length?n:h.values(n),e=r.length,u=Array(e),i=0;e>i;i++)t=h.random(0,i),t!==i&&(u[i]=u[t]),u[t]=r[i];return u},h.sample=function(n,t,r){return null==t||r?(n.length!==+n.length&&(n=h.values(n)),n[h.random(n.length-1)]):h.shuffle(n).slice(0,Math.max(0,t))},h.sortBy=function(n,t,r){return t=h.iteratee(t,r),h.pluck(h.map(n,function(n,r,e){return{value:n,index:r,criteria:t(n,r,e)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(r>e||r===void 0)return 1;if(e>r||e===void 0)return-1}return n.index-t.index}),"value")};var m=function(n){return function(t,r,e){var u={};return r=h.iteratee(r,e),h.each(t,function(e,i){var a=r(e,i,t);n(u,e,a)}),u}};h.groupBy=m(function(n,t,r){h.has(n,r)?n[r].push(t):n[r]=[t]}),h.indexBy=m(function(n,t,r){n[r]=t}),h.countBy=m(function(n,t,r){h.has(n,r)?n[r]++:n[r]=1}),h.sortedIndex=function(n,t,r,e){r=h.iteratee(r,e,1);for(var u=r(t),i=0,a=n.length;a>i;){var o=i+a>>>1;r(n[o])<u?i=o+1:a=o}return i},h.toArray=function(n){return n?h.isArray(n)?a.call(n):n.length===+n.length?h.map(n,h.identity):h.values(n):[]},h.size=function(n){return null==n?0:n.length===+n.length?n.length:h.keys(n).length},h.partition=function(n,t,r){t=h.iteratee(t,r);var e=[],u=[];return h.each(n,function(n,r,i){(t(n,r,i)?e:u).push(n)}),[e,u]},h.first=h.head=h.take=function(n,t,r){return null==n?void 0:null==t||r?n[0]:0>t?[]:a.call(n,0,t)},h.initial=function(n,t,r){return a.call(n,0,Math.max(0,n.length-(null==t||r?1:t)))},h.last=function(n,t,r){return null==n?void 0:null==t||r?n[n.length-1]:a.call(n,Math.max(n.length-t,0))},h.rest=h.tail=h.drop=function(n,t,r){return a.call(n,null==t||r?1:t)},h.compact=function(n){return h.filter(n,h.identity)};var y=function(n,t,r,e){if(t&&h.every(n,h.isArray))return o.apply(e,n);for(var u=0,a=n.length;a>u;u++){var l=n[u];h.isArray(l)||h.isArguments(l)?t?i.apply(e,l):y(l,t,r,e):r||e.push(l)}return e};h.flatten=function(n,t){return y(n,t,!1,[])},h.without=function(n){return h.difference(n,a.call(arguments,1))},h.uniq=h.unique=function(n,t,r,e){if(null==n)return[];h.isBoolean(t)||(e=r,r=t,t=!1),null!=r&&(r=h.iteratee(r,e));for(var u=[],i=[],a=0,o=n.length;o>a;a++){var l=n[a];if(t)a&&i===l||u.push(l),i=l;else if(r){var c=r(l,a,n);h.indexOf(i,c)<0&&(i.push(c),u.push(l))}else h.indexOf(u,l)<0&&u.push(l)}return u},h.union=function(){return h.uniq(y(arguments,!0,!0,[]))},h.intersection=function(n){if(null==n)return[];for(var t=[],r=arguments.length,e=0,u=n.length;u>e;e++){var i=n[e];if(!h.contains(t,i)){for(var a=1;r>a&&h.contains(arguments[a],i);a++);a===r&&t.push(i)}}return t},h.difference=function(n){var t=y(a.call(arguments,1),!0,!0,[]);return h.filter(n,function(n){return!h.contains(t,n)})},h.zip=function(n){if(null==n)return[];for(var t=h.max(arguments,"length").length,r=Array(t),e=0;t>e;e++)r[e]=h.pluck(arguments,e);return r},h.object=function(n,t){if(null==n)return{};for(var r={},e=0,u=n.length;u>e;e++)t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1];return r},h.indexOf=function(n,t,r){if(null==n)return-1;var e=0,u=n.length;if(r){if("number"!=typeof r)return e=h.sortedIndex(n,t),n[e]===t?e:-1;e=0>r?Math.max(0,u+r):r}for(;u>e;e++)if(n[e]===t)return e;return-1},h.lastIndexOf=function(n,t,r){if(null==n)return-1;var e=n.length;for("number"==typeof r&&(e=0>r?e+r+1:Math.min(e,r+1));--e>=0;)if(n[e]===t)return e;return-1},h.range=function(n,t,r){arguments.length<=1&&(t=n||0,n=0),r=r||1;for(var e=Math.max(Math.ceil((t-n)/r),0),u=Array(e),i=0;e>i;i++,n+=r)u[i]=n;return u};var d=function(){};h.bind=function(n,t){var r,e;if(p&&n.bind===p)return p.apply(n,a.call(arguments,1));if(!h.isFunction(n))throw new TypeError("Bind must be called on a function");return r=a.call(arguments,2),e=function(){if(!(this instanceof e))return n.apply(t,r.concat(a.call(arguments)));d.prototype=n.prototype;var u=new d;d.prototype=null;var i=n.apply(u,r.concat(a.call(arguments)));return h.isObject(i)?i:u}},h.partial=function(n){var t=a.call(arguments,1);return function(){for(var r=0,e=t.slice(),u=0,i=e.length;i>u;u++)e[u]===h&&(e[u]=arguments[r++]);for(;r<arguments.length;)e.push(arguments[r++]);return n.apply(this,e)}},h.bindAll=function(n){var t,r,e=arguments.length;if(1>=e)throw new Error("bindAll must be passed function names");for(t=1;e>t;t++)r=arguments[t],n[r]=h.bind(n[r],n);return n},h.memoize=function(n,t){var r=function(e){var u=r.cache,i=t?t.apply(this,arguments):e;return h.has(u,i)||(u[i]=n.apply(this,arguments)),u[i]};return r.cache={},r},h.delay=function(n,t){var r=a.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},h.defer=function(n){return h.delay.apply(h,[n,1].concat(a.call(arguments,1)))},h.throttle=function(n,t,r){var e,u,i,a=null,o=0;r||(r={});var l=function(){o=r.leading===!1?0:h.now(),a=null,i=n.apply(e,u),a||(e=u=null)};return function(){var c=h.now();o||r.leading!==!1||(o=c);var f=t-(c-o);return e=this,u=arguments,0>=f||f>t?(clearTimeout(a),a=null,o=c,i=n.apply(e,u),a||(e=u=null)):a||r.trailing===!1||(a=setTimeout(l,f)),i}},h.debounce=function(n,t,r){var e,u,i,a,o,l=function(){var c=h.now()-a;t>c&&c>0?e=setTimeout(l,t-c):(e=null,r||(o=n.apply(i,u),e||(i=u=null)))};return function(){i=this,u=arguments,a=h.now();var c=r&&!e;return e||(e=setTimeout(l,t)),c&&(o=n.apply(i,u),i=u=null),o}},h.wrap=function(n,t){return h.partial(t,n)},h.negate=function(n){return function(){return!n.apply(this,arguments)}},h.compose=function(){var n=arguments,t=n.length-1;return function(){for(var r=t,e=n[t].apply(this,arguments);r--;)e=n[r].call(this,e);return e}},h.after=function(n,t){return function(){return--n<1?t.apply(this,arguments):void 0}},h.before=function(n,t){var r;return function(){return--n>0?r=t.apply(this,arguments):t=null,r}},h.once=h.partial(h.before,2),h.keys=function(n){if(!h.isObject(n))return[];if(s)return s(n);var t=[];for(var r in n)h.has(n,r)&&t.push(r);return t},h.values=function(n){for(var t=h.keys(n),r=t.length,e=Array(r),u=0;r>u;u++)e[u]=n[t[u]];return e},h.pairs=function(n){for(var t=h.keys(n),r=t.length,e=Array(r),u=0;r>u;u++)e[u]=[t[u],n[t[u]]];return e},h.invert=function(n){for(var t={},r=h.keys(n),e=0,u=r.length;u>e;e++)t[n[r[e]]]=r[e];return t},h.functions=h.methods=function(n){var t=[];for(var r in n)h.isFunction(n[r])&&t.push(r);return t.sort()},h.extend=function(n){if(!h.isObject(n))return n;for(var t,r,e=1,u=arguments.length;u>e;e++){t=arguments[e];for(r in t)c.call(t,r)&&(n[r]=t[r])}return n},h.pick=function(n,t,r){var e,u={};if(null==n)return u;if(h.isFunction(t)){t=g(t,r);for(e in n){var i=n[e];t(i,e,n)&&(u[e]=i)}}else{var l=o.apply([],a.call(arguments,1));n=new Object(n);for(var c=0,f=l.length;f>c;c++)e=l[c],e in n&&(u[e]=n[e])}return u},h.omit=function(n,t,r){if(h.isFunction(t))t=h.negate(t);else{var e=h.map(o.apply([],a.call(arguments,1)),String);t=function(n,t){return!h.contains(e,t)}}return h.pick(n,t,r)},h.defaults=function(n){if(!h.isObject(n))return n;for(var t=1,r=arguments.length;r>t;t++){var e=arguments[t];for(var u in e)n[u]===void 0&&(n[u]=e[u])}return n},h.clone=function(n){return h.isObject(n)?h.isArray(n)?n.slice():h.extend({},n):n},h.tap=function(n,t){return t(n),n};var b=function(n,t,r,e){if(n===t)return 0!==n||1/n===1/t;if(null==n||null==t)return n===t;n instanceof h&&(n=n._wrapped),t instanceof h&&(t=t._wrapped);var u=l.call(n);if(u!==l.call(t))return!1;switch(u){case"[object RegExp]":case"[object String]":return""+n==""+t;case"[object Number]":return+n!==+n?+t!==+t:0===+n?1/+n===1/t:+n===+t;case"[object Date]":case"[object Boolean]":return+n===+t}if("object"!=typeof n||"object"!=typeof t)return!1;for(var i=r.length;i--;)if(r[i]===n)return e[i]===t;var a=n.constructor,o=t.constructor;if(a!==o&&"constructor"in n&&"constructor"in t&&!(h.isFunction(a)&&a instanceof a&&h.isFunction(o)&&o instanceof o))return!1;r.push(n),e.push(t);var c,f;if("[object Array]"===u){if(c=n.length,f=c===t.length)for(;c--&&(f=b(n[c],t[c],r,e)););}else{var s,p=h.keys(n);if(c=p.length,f=h.keys(t).length===c)for(;c--&&(s=p[c],f=h.has(t,s)&&b(n[s],t[s],r,e)););}return r.pop(),e.pop(),f};h.isEqual=function(n,t){return b(n,t,[],[])},h.isEmpty=function(n){if(null==n)return!0;if(h.isArray(n)||h.isString(n)||h.isArguments(n))return 0===n.length;for(var t in n)if(h.has(n,t))return!1;return!0},h.isElement=function(n){return!(!n||1!==n.nodeType)},h.isArray=f||function(n){return"[object Array]"===l.call(n)},h.isObject=function(n){var t=typeof n;return"function"===t||"object"===t&&!!n},h.each(["Arguments","Function","String","Number","Date","RegExp"],function(n){h["is"+n]=function(t){return l.call(t)==="[object "+n+"]"}}),h.isArguments(arguments)||(h.isArguments=function(n){return h.has(n,"callee")}),"function"!=typeof/./&&(h.isFunction=function(n){return"function"==typeof n||!1}),h.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},h.isNaN=function(n){return h.isNumber(n)&&n!==+n},h.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"===l.call(n)},h.isNull=function(n){return null===n},h.isUndefined=function(n){return n===void 0},h.has=function(n,t){return null!=n&&c.call(n,t)},h.noConflict=function(){return n._=t,this},h.identity=function(n){return n},h.constant=function(n){return function(){return n}},h.noop=function(){},h.property=function(n){return function(t){return t[n]}},h.matches=function(n){var t=h.pairs(n),r=t.length;return function(n){if(null==n)return!r;n=new Object(n);for(var e=0;r>e;e++){var u=t[e],i=u[0];if(u[1]!==n[i]||!(i in n))return!1}return!0}},h.times=function(n,t,r){var e=Array(Math.max(0,n));t=g(t,r,1);for(var u=0;n>u;u++)e[u]=t(u);return e},h.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))},h.now=Date.now||function(){return(new Date).getTime()};var _={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},w=h.invert(_),j=function(n){var t=function(t){return n[t]},r="(?:"+h.keys(n).join("|")+")",e=RegExp(r),u=RegExp(r,"g");return function(n){return n=null==n?"":""+n,e.test(n)?n.replace(u,t):n}};h.escape=j(_),h.unescape=j(w),h.result=function(n,t){if(null==n)return void 0;var r=n[t];return h.isFunction(r)?n[t]():r};var x=0;h.uniqueId=function(n){var t=++x+"";return n?n+t:t},h.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var A=/(.)^/,k={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},O=/\\|'|\r|\n|\u2028|\u2029/g,F=function(n){return"\\"+k[n]};h.template=function(n,t,r){!t&&r&&(t=r),t=h.defaults({},t,h.templateSettings);var e=RegExp([(t.escape||A).source,(t.interpolate||A).source,(t.evaluate||A).source].join("|")+"|$","g"),u=0,i="__p+='";n.replace(e,function(t,r,e,a,o){return i+=n.slice(u,o).replace(O,F),u=o+t.length,r?i+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'":e?i+="'+\n((__t=("+e+"))==null?'':__t)+\n'":a&&(i+="';\n"+a+"\n__p+='"),t}),i+="';\n",t.variable||(i="with(obj||{}){\n"+i+"}\n"),i="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{var a=new Function(t.variable||"obj","_",i)}catch(o){throw o.source=i,o}var l=function(n){return a.call(this,n,h)},c=t.variable||"obj";return l.source="function("+c+"){\n"+i+"}",l},h.chain=function(n){var t=h(n);return t._chain=!0,t};var E=function(n){return this._chain?h(n).chain():n};h.mixin=function(n){h.each(h.functions(n),function(t){var r=h[t]=n[t];h.prototype[t]=function(){var n=[this._wrapped];return i.apply(n,arguments),E.call(this,r.apply(h,n))}})},h.mixin(h),h.each(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=r[n];h.prototype[n]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!==n&&"splice"!==n||0!==r.length||delete r[0],E.call(this,r)}}),h.each(["concat","join","slice"],function(n){var t=r[n];h.prototype[n]=function(){return E.call(this,t.apply(this._wrapped,arguments))}}),h.prototype.value=function(){return this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return h})}).call(this);
/*!
 * Bootstrap v3.3.1 (http://getbootstrap.com)
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
*/;if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(a){var b=a.fn.jquery.split(" ")[0].split(".");if(b[0]<2&&b[1]<9||1==b[0]&&9==b[1]&&b[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),+function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one("bsTransitionEnd",function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b(),a.support.transition&&(a.event.special.bsTransitionEnd={bindType:a.support.transition.end,delegateType:a.support.transition.end,handle:function(b){return a(b.target).is(this)?b.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var c=a(this),e=c.data("bs.alert");e||c.data("bs.alert",e=new d(this)),"string"==typeof b&&e[b].call(c)})}var c='[data-dismiss="alert"]',d=function(b){a(b).on("click",c,this.close)};d.VERSION="3.3.1",d.TRANSITION_DURATION=150,d.prototype.close=function(b){function c(){g.detach().trigger("closed.bs.alert").remove()}var e=a(this),f=e.attr("data-target");f||(f=e.attr("href"),f=f&&f.replace(/.*(?=#[^\s]*$)/,""));var g=a(f);b&&b.preventDefault(),g.length||(g=e.closest(".alert")),g.trigger(b=a.Event("close.bs.alert")),b.isDefaultPrevented()||(g.removeClass("in"),a.support.transition&&g.hasClass("fade")?g.one("bsTransitionEnd",c).emulateTransitionEnd(d.TRANSITION_DURATION):c())};var e=a.fn.alert;a.fn.alert=b,a.fn.alert.Constructor=d,a.fn.alert.noConflict=function(){return a.fn.alert=e,this},a(document).on("click.bs.alert.data-api",c,d.prototype.close)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.button"),f="object"==typeof b&&b;e||d.data("bs.button",e=new c(this,f)),"toggle"==b?e.toggle():b&&e.setState(b)})}var c=function(b,d){this.$element=a(b),this.options=a.extend({},c.DEFAULTS,d),this.isLoading=!1};c.VERSION="3.3.1",c.DEFAULTS={loadingText:"loading..."},c.prototype.setState=function(b){var c="disabled",d=this.$element,e=d.is("input")?"val":"html",f=d.data();b+="Text",null==f.resetText&&d.data("resetText",d[e]()),setTimeout(a.proxy(function(){d[e](null==f[b]?this.options[b]:f[b]),"loadingText"==b?(this.isLoading=!0,d.addClass(c).attr(c,c)):this.isLoading&&(this.isLoading=!1,d.removeClass(c).removeAttr(c))},this),0)},c.prototype.toggle=function(){var a=!0,b=this.$element.closest('[data-toggle="buttons"]');if(b.length){var c=this.$element.find("input");"radio"==c.prop("type")&&(c.prop("checked")&&this.$element.hasClass("active")?a=!1:b.find(".active").removeClass("active")),a&&c.prop("checked",!this.$element.hasClass("active")).trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active"));a&&this.$element.toggleClass("active")};var d=a.fn.button;a.fn.button=b,a.fn.button.Constructor=c,a.fn.button.noConflict=function(){return a.fn.button=d,this},a(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(c){var d=a(c.target);d.hasClass("btn")||(d=d.closest(".btn")),b.call(d,"toggle"),c.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(b){a(b.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(b.type))})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.carousel"),f=a.extend({},c.DEFAULTS,d.data(),"object"==typeof b&&b),g="string"==typeof b?b:f.slide;e||d.data("bs.carousel",e=new c(this,f)),"number"==typeof b?e.to(b):g?e[g]():f.interval&&e.pause().cycle()})}var c=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,this.paused=this.sliding=this.interval=this.$active=this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",a.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",a.proxy(this.pause,this)).on("mouseleave.bs.carousel",a.proxy(this.cycle,this))};c.VERSION="3.3.1",c.TRANSITION_DURATION=600,c.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},c.prototype.keydown=function(a){if(!/input|textarea/i.test(a.target.tagName)){switch(a.which){case 37:this.prev();break;case 39:this.next();break;default:return}a.preventDefault()}},c.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},c.prototype.getItemIndex=function(a){return this.$items=a.parent().children(".item"),this.$items.index(a||this.$active)},c.prototype.getItemForDirection=function(a,b){var c="prev"==a?-1:1,d=this.getItemIndex(b),e=(d+c)%this.$items.length;return this.$items.eq(e)},c.prototype.to=function(a){var b=this,c=this.getItemIndex(this.$active=this.$element.find(".item.active"));return a>this.$items.length-1||0>a?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){b.to(a)}):c==a?this.pause().cycle():this.slide(a>c?"next":"prev",this.$items.eq(a))},c.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},c.prototype.next=function(){return this.sliding?void 0:this.slide("next")},c.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},c.prototype.slide=function(b,d){var e=this.$element.find(".item.active"),f=d||this.getItemForDirection(b,e),g=this.interval,h="next"==b?"left":"right",i="next"==b?"first":"last",j=this;if(!f.length){if(!this.options.wrap)return;f=this.$element.find(".item")[i]()}if(f.hasClass("active"))return this.sliding=!1;var k=f[0],l=a.Event("slide.bs.carousel",{relatedTarget:k,direction:h});if(this.$element.trigger(l),!l.isDefaultPrevented()){if(this.sliding=!0,g&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var m=a(this.$indicators.children()[this.getItemIndex(f)]);m&&m.addClass("active")}var n=a.Event("slid.bs.carousel",{relatedTarget:k,direction:h});return a.support.transition&&this.$element.hasClass("slide")?(f.addClass(b),f[0].offsetWidth,e.addClass(h),f.addClass(h),e.one("bsTransitionEnd",function(){f.removeClass([b,h].join(" ")).addClass("active"),e.removeClass(["active",h].join(" ")),j.sliding=!1,setTimeout(function(){j.$element.trigger(n)},0)}).emulateTransitionEnd(c.TRANSITION_DURATION)):(e.removeClass("active"),f.addClass("active"),this.sliding=!1,this.$element.trigger(n)),g&&this.cycle(),this}};var d=a.fn.carousel;a.fn.carousel=b,a.fn.carousel.Constructor=c,a.fn.carousel.noConflict=function(){return a.fn.carousel=d,this};var e=function(c){var d,e=a(this),f=a(e.attr("data-target")||(d=e.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""));if(f.hasClass("carousel")){var g=a.extend({},f.data(),e.data()),h=e.attr("data-slide-to");h&&(g.interval=!1),b.call(f,g),h&&f.data("bs.carousel").to(h),c.preventDefault()}};a(document).on("click.bs.carousel.data-api","[data-slide]",e).on("click.bs.carousel.data-api","[data-slide-to]",e),a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var c=a(this);b.call(c,c.data())})})}(jQuery),+function(a){"use strict";function b(b){var c,d=b.attr("data-target")||(c=b.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"");return a(d)}function c(b){return this.each(function(){var c=a(this),e=c.data("bs.collapse"),f=a.extend({},d.DEFAULTS,c.data(),"object"==typeof b&&b);!e&&f.toggle&&"show"==b&&(f.toggle=!1),e||c.data("bs.collapse",e=new d(this,f)),"string"==typeof b&&e[b]()})}var d=function(b,c){this.$element=a(b),this.options=a.extend({},d.DEFAULTS,c),this.$trigger=a(this.options.trigger).filter('[href="#'+b.id+'"], [data-target="#'+b.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};d.VERSION="3.3.1",d.TRANSITION_DURATION=350,d.DEFAULTS={toggle:!0,trigger:'[data-toggle="collapse"]'},d.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height"},d.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var b,e=this.$parent&&this.$parent.find("> .panel").children(".in, .collapsing");if(!(e&&e.length&&(b=e.data("bs.collapse"),b&&b.transitioning))){var f=a.Event("show.bs.collapse");if(this.$element.trigger(f),!f.isDefaultPrevented()){e&&e.length&&(c.call(e,"hide"),b||e.data("bs.collapse",null));var g=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[g](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var h=function(){this.$element.removeClass("collapsing").addClass("collapse in")[g](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return h.call(this);var i=a.camelCase(["scroll",g].join("-"));this.$element.one("bsTransitionEnd",a.proxy(h,this)).emulateTransitionEnd(d.TRANSITION_DURATION)[g](this.$element[0][i])}}}},d.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var e=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return a.support.transition?void this.$element[c](0).one("bsTransitionEnd",a.proxy(e,this)).emulateTransitionEnd(d.TRANSITION_DURATION):e.call(this)}}},d.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},d.prototype.getParent=function(){return a(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(a.proxy(function(c,d){var e=a(d);this.addAriaAndCollapsedClass(b(e),e)},this)).end()},d.prototype.addAriaAndCollapsedClass=function(a,b){var c=a.hasClass("in");a.attr("aria-expanded",c),b.toggleClass("collapsed",!c).attr("aria-expanded",c)};var e=a.fn.collapse;a.fn.collapse=c,a.fn.collapse.Constructor=d,a.fn.collapse.noConflict=function(){return a.fn.collapse=e,this},a(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(d){var e=a(this);e.attr("data-target")||d.preventDefault();var f=b(e),g=f.data("bs.collapse"),h=g?"toggle":a.extend({},e.data(),{trigger:this});c.call(f,h)})}(jQuery),+function(a){"use strict";function b(b){b&&3===b.which||(a(e).remove(),a(f).each(function(){var d=a(this),e=c(d),f={relatedTarget:this};e.hasClass("open")&&(e.trigger(b=a.Event("hide.bs.dropdown",f)),b.isDefaultPrevented()||(d.attr("aria-expanded","false"),e.removeClass("open").trigger("hidden.bs.dropdown",f)))}))}function c(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}function d(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new g(this)),"string"==typeof b&&d[b].call(c)})}var e=".dropdown-backdrop",f='[data-toggle="dropdown"]',g=function(b){a(b).on("click.bs.dropdown",this.toggle)};g.VERSION="3.3.1",g.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=c(e),g=f.hasClass("open");if(b(),!g){"ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a('<div class="dropdown-backdrop"/>').insertAfter(a(this)).on("click",b);var h={relatedTarget:this};if(f.trigger(d=a.Event("show.bs.dropdown",h)),d.isDefaultPrevented())return;e.trigger("focus").attr("aria-expanded","true"),f.toggleClass("open").trigger("shown.bs.dropdown",h)}return!1}},g.prototype.keydown=function(b){if(/(38|40|27|32)/.test(b.which)&&!/input|textarea/i.test(b.target.tagName)){var d=a(this);if(b.preventDefault(),b.stopPropagation(),!d.is(".disabled, :disabled")){var e=c(d),g=e.hasClass("open");if(!g&&27!=b.which||g&&27==b.which)return 27==b.which&&e.find(f).trigger("focus"),d.trigger("click");var h=" li:not(.divider):visible a",i=e.find('[role="menu"]'+h+', [role="listbox"]'+h);if(i.length){var j=i.index(b.target);38==b.which&&j>0&&j--,40==b.which&&j<i.length-1&&j++,~j||(j=0),i.eq(j).trigger("focus")}}}};var h=a.fn.dropdown;a.fn.dropdown=d,a.fn.dropdown.Constructor=g,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=h,this},a(document).on("click.bs.dropdown.data-api",b).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",f,g.prototype.toggle).on("keydown.bs.dropdown.data-api",f,g.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',g.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',g.prototype.keydown)}(jQuery),+function(a){"use strict";function b(b,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},c.DEFAULTS,e.data(),"object"==typeof b&&b);f||e.data("bs.modal",f=new c(this,g)),"string"==typeof b?f[b](d):g.show&&f.show(d)})}var c=function(b,c){this.options=c,this.$body=a(document.body),this.$element=a(b),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};c.VERSION="3.3.1",c.TRANSITION_DURATION=300,c.BACKDROP_TRANSITION_DURATION=150,c.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},c.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)},c.prototype.show=function(b){var d=this,e=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.backdrop(function(){var e=a.support.transition&&d.$element.hasClass("fade");d.$element.parent().length||d.$element.appendTo(d.$body),d.$element.show().scrollTop(0),d.options.backdrop&&d.adjustBackdrop(),d.adjustDialog(),e&&d.$element[0].offsetWidth,d.$element.addClass("in").attr("aria-hidden",!1),d.enforceFocus();var f=a.Event("shown.bs.modal",{relatedTarget:b});e?d.$element.find(".modal-dialog").one("bsTransitionEnd",function(){d.$element.trigger("focus").trigger(f)}).emulateTransitionEnd(c.TRANSITION_DURATION):d.$element.trigger("focus").trigger(f)}))},c.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",a.proxy(this.hideModal,this)).emulateTransitionEnd(c.TRANSITION_DURATION):this.hideModal())},c.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger("focus")},this))},c.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},c.prototype.resize=function(){this.isShown?a(window).on("resize.bs.modal",a.proxy(this.handleUpdate,this)):a(window).off("resize.bs.modal")},c.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.$body.removeClass("modal-open"),a.resetAdjustments(),a.resetScrollbar(),a.$element.trigger("hidden.bs.modal")})},c.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},c.prototype.backdrop=function(b){var d=this,e=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var f=a.support.transition&&e;if(this.$backdrop=a('<div class="modal-backdrop '+e+'" />').prependTo(this.$element).on("click.dismiss.bs.modal",a.proxy(function(a){a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),f&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;f?this.$backdrop.one("bsTransitionEnd",b).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):b()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var g=function(){d.removeBackdrop(),b&&b()};a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",g).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):g()}else b&&b()},c.prototype.handleUpdate=function(){this.options.backdrop&&this.adjustBackdrop(),this.adjustDialog()},c.prototype.adjustBackdrop=function(){this.$backdrop.css("height",0).css("height",this.$element[0].scrollHeight)},c.prototype.adjustDialog=function(){var a=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&a?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!a?this.scrollbarWidth:""})},c.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},c.prototype.checkScrollbar=function(){this.bodyIsOverflowing=document.body.scrollHeight>document.documentElement.clientHeight,this.scrollbarWidth=this.measureScrollbar()},c.prototype.setScrollbar=function(){var a=parseInt(this.$body.css("padding-right")||0,10);this.bodyIsOverflowing&&this.$body.css("padding-right",a+this.scrollbarWidth)},c.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},c.prototype.measureScrollbar=function(){var a=document.createElement("div");a.className="modal-scrollbar-measure",this.$body.append(a);var b=a.offsetWidth-a.clientWidth;return this.$body[0].removeChild(a),b};var d=a.fn.modal;a.fn.modal=b,a.fn.modal.Constructor=c,a.fn.modal.noConflict=function(){return a.fn.modal=d,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(c){var d=a(this),e=d.attr("href"),f=a(d.attr("data-target")||e&&e.replace(/.*(?=#[^\s]+$)/,"")),g=f.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(e)&&e},f.data(),d.data());d.is("a")&&c.preventDefault(),f.one("show.bs.modal",function(a){a.isDefaultPrevented()||f.one("hidden.bs.modal",function(){d.is(":visible")&&d.trigger("focus")})}),b.call(f,g,this)})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof b&&b,g=f&&f.selector;(e||"destroy"!=b)&&(g?(e||d.data("bs.tooltip",e={}),e[g]||(e[g]=new c(this,f))):e||d.data("bs.tooltip",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",a,b)};c.VERSION="3.3.1",c.TRANSITION_DURATION=150,c.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},c.prototype.init=function(b,c,d){this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.$viewport=this.options.viewport&&a(this.options.viewport.selector||this.options.viewport);for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focusin",i="hover"==g?"mouseleave":"focusout";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},c.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},c.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c&&c.$tip&&c.$tip.is(":visible")?void(c.hoverState="in"):(c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show())},c.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide()},c.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(b);var d=a.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(b.isDefaultPrevented()||!d)return;var e=this,f=this.tip(),g=this.getUID(this.type);this.setContent(),f.attr("id",g),this.$element.attr("aria-describedby",g),this.options.animation&&f.addClass("fade");var h="function"==typeof this.options.placement?this.options.placement.call(this,f[0],this.$element[0]):this.options.placement,i=/\s?auto?\s?/i,j=i.test(h);j&&(h=h.replace(i,"")||"top"),f.detach().css({top:0,left:0,display:"block"}).addClass(h).data("bs."+this.type,this),this.options.container?f.appendTo(this.options.container):f.insertAfter(this.$element);var k=this.getPosition(),l=f[0].offsetWidth,m=f[0].offsetHeight;if(j){var n=h,o=this.options.container?a(this.options.container):this.$element.parent(),p=this.getPosition(o);h="bottom"==h&&k.bottom+m>p.bottom?"top":"top"==h&&k.top-m<p.top?"bottom":"right"==h&&k.right+l>p.width?"left":"left"==h&&k.left-l<p.left?"right":h,f.removeClass(n).addClass(h)}var q=this.getCalculatedOffset(h,k,l,m);this.applyPlacement(q,h);var r=function(){var a=e.hoverState;e.$element.trigger("shown.bs."+e.type),e.hoverState=null,"out"==a&&e.leave(e)};a.support.transition&&this.$tip.hasClass("fade")?f.one("bsTransitionEnd",r).emulateTransitionEnd(c.TRANSITION_DURATION):r()}},c.prototype.applyPlacement=function(b,c){var d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css("margin-top"),10),h=parseInt(d.css("margin-left"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),b.top=b.top+g,b.left=b.left+h,a.offset.setOffset(d[0],a.extend({using:function(a){d.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0),d.addClass("in");var i=d[0].offsetWidth,j=d[0].offsetHeight;"top"==c&&j!=f&&(b.top=b.top+f-j);var k=this.getViewportAdjustedDelta(c,b,i,j);k.left?b.left+=k.left:b.top+=k.top;var l=/top|bottom/.test(c),m=l?2*k.left-e+i:2*k.top-f+j,n=l?"offsetWidth":"offsetHeight";d.offset(b),this.replaceArrow(m,d[0][n],l)},c.prototype.replaceArrow=function(a,b,c){this.arrow().css(c?"left":"top",50*(1-a/b)+"%").css(c?"top":"left","")},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},c.prototype.hide=function(b){function d(){"in"!=e.hoverState&&f.detach(),e.$element.removeAttr("aria-describedby").trigger("hidden.bs."+e.type),b&&b()}var e=this,f=this.tip(),g=a.Event("hide.bs."+this.type);return this.$element.trigger(g),g.isDefaultPrevented()?void 0:(f.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?f.one("bsTransitionEnd",d).emulateTransitionEnd(c.TRANSITION_DURATION):d(),this.hoverState=null,this)},c.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},c.prototype.hasContent=function(){return this.getTitle()},c.prototype.getPosition=function(b){b=b||this.$element;var c=b[0],d="BODY"==c.tagName,e=c.getBoundingClientRect();null==e.width&&(e=a.extend({},e,{width:e.right-e.left,height:e.bottom-e.top}));var f=d?{top:0,left:0}:b.offset(),g={scroll:d?document.documentElement.scrollTop||document.body.scrollTop:b.scrollTop()},h=d?{width:a(window).width(),height:a(window).height()}:null;return a.extend({},e,g,h,f)},c.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},c.prototype.getViewportAdjustedDelta=function(a,b,c,d){var e={top:0,left:0};if(!this.$viewport)return e;var f=this.options.viewport&&this.options.viewport.padding||0,g=this.getPosition(this.$viewport);if(/right|left/.test(a)){var h=b.top-f-g.scroll,i=b.top+f-g.scroll+d;h<g.top?e.top=g.top-h:i>g.top+g.height&&(e.top=g.top+g.height-i)}else{var j=b.left-f,k=b.left+f+c;j<g.left?e.left=g.left-j:k>g.width&&(e.left=g.left+g.width-k)}return e},c.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},c.prototype.getUID=function(a){do a+=~~(1e6*Math.random());while(document.getElementById(a));return a},c.prototype.tip=function(){return this.$tip=this.$tip||a(this.options.template)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},c.prototype.enable=function(){this.enabled=!0},c.prototype.disable=function(){this.enabled=!1},c.prototype.toggleEnabled=function(){this.enabled=!this.enabled},c.prototype.toggle=function(b){var c=this;b&&(c=a(b.currentTarget).data("bs."+this.type),c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c))),c.tip().hasClass("in")?c.leave(c):c.enter(c)},c.prototype.destroy=function(){var a=this;clearTimeout(this.timeout),this.hide(function(){a.$element.off("."+a.type).removeData("bs."+a.type)})};var d=a.fn.tooltip;a.fn.tooltip=b,a.fn.tooltip.Constructor=c,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=d,this}}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof b&&b,g=f&&f.selector;(e||"destroy"!=b)&&(g?(e||d.data("bs.popover",e={}),e[g]||(e[g]=new c(this,f))):e||d.data("bs.popover",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");c.VERSION="3.3.1",c.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),c.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),c.prototype.constructor=c,c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof c?"html":"append":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},c.prototype.hasContent=function(){return this.getTitle()||this.getContent()},c.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},c.prototype.tip=function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip};var d=a.fn.popover;a.fn.popover=b,a.fn.popover.Constructor=c,a.fn.popover.noConflict=function(){return a.fn.popover=d,this}}(jQuery),+function(a){"use strict";function b(c,d){var e=a.proxy(this.process,this);this.$body=a("body"),this.$scrollElement=a(a(c).is("body")?window:c),this.options=a.extend({},b.DEFAULTS,d),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",e),this.refresh(),this.process()}function c(c){return this.each(function(){var d=a(this),e=d.data("bs.scrollspy"),f="object"==typeof c&&c;e||d.data("bs.scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})}b.VERSION="3.3.1",b.DEFAULTS={offset:10},b.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},b.prototype.refresh=function(){var b="offset",c=0;a.isWindow(this.$scrollElement[0])||(b="position",c=this.$scrollElement.scrollTop()),this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight();var d=this;this.$body.find(this.selector).map(function(){var d=a(this),e=d.data("target")||d.attr("href"),f=/^#./.test(e)&&a(e);return f&&f.length&&f.is(":visible")&&[[f[b]().top+c,e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){d.offsets.push(this[0]),d.targets.push(this[1])})},b.prototype.process=function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.getScrollHeight(),d=this.options.offset+c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(this.scrollHeight!=c&&this.refresh(),b>=d)return g!=(a=f[f.length-1])&&this.activate(a);if(g&&b<e[0])return this.activeTarget=null,this.clear();for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(!e[a+1]||b<=e[a+1])&&this.activate(f[a])},b.prototype.activate=function(b){this.activeTarget=b,this.clear();var c=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',d=a(c).parents("li").addClass("active");d.parent(".dropdown-menu").length&&(d=d.closest("li.dropdown").addClass("active")),d.trigger("activate.bs.scrollspy")},b.prototype.clear=function(){a(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var d=a.fn.scrollspy;a.fn.scrollspy=c,a.fn.scrollspy.Constructor=b,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=d,this},a(window).on("load.bs.scrollspy.data-api",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);c.call(b,b.data())})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new c(this)),"string"==typeof b&&e[b]()})}var c=function(b){this.element=a(b)};c.VERSION="3.3.1",c.TRANSITION_DURATION=150,c.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a"),f=a.Event("hide.bs.tab",{relatedTarget:b[0]}),g=a.Event("show.bs.tab",{relatedTarget:e[0]});if(e.trigger(f),b.trigger(g),!g.isDefaultPrevented()&&!f.isDefaultPrevented()){var h=a(d);this.activate(b.closest("li"),c),this.activate(h,h.parent(),function(){e.trigger({type:"hidden.bs.tab",relatedTarget:b[0]}),b.trigger({type:"shown.bs.tab",relatedTarget:e[0]})})}}},c.prototype.activate=function(b,d,e){function f(){g.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),b.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),h?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),e&&e()}var g=d.find("> .active"),h=e&&a.support.transition&&(g.length&&g.hasClass("fade")||!!d.find("> .fade").length);g.length&&h?g.one("bsTransitionEnd",f).emulateTransitionEnd(c.TRANSITION_DURATION):f(),g.removeClass("in")};var d=a.fn.tab;a.fn.tab=b,a.fn.tab.Constructor=c,a.fn.tab.noConflict=function(){return a.fn.tab=d,this};var e=function(c){c.preventDefault(),b.call(a(this),"show")};a(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',e).on("click.bs.tab.data-api",'[data-toggle="pill"]',e)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.affix"),f="object"==typeof b&&b;e||d.data("bs.affix",e=new c(this,f)),"string"==typeof b&&e[b]()})}var c=function(b,d){this.options=a.extend({},c.DEFAULTS,d),this.$target=a(this.options.target).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(b),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};c.VERSION="3.3.1",c.RESET="affix affix-top affix-bottom",c.DEFAULTS={offset:0,target:window},c.prototype.getState=function(a,b,c,d){var e=this.$target.scrollTop(),f=this.$element.offset(),g=this.$target.height();if(null!=c&&"top"==this.affixed)return c>e?"top":!1;if("bottom"==this.affixed)return null!=c?e+this.unpin<=f.top?!1:"bottom":a-d>=e+g?!1:"bottom";var h=null==this.affixed,i=h?e:f.top,j=h?g:b;return null!=c&&c>=i?"top":null!=d&&i+j>=a-d?"bottom":!1},c.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(c.RESET).addClass("affix");var a=this.$target.scrollTop(),b=this.$element.offset();return this.pinnedOffset=b.top-a},c.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},c.prototype.checkPosition=function(){if(this.$element.is(":visible")){var b=this.$element.height(),d=this.options.offset,e=d.top,f=d.bottom,g=a("body").height();"object"!=typeof d&&(f=e=d),"function"==typeof e&&(e=d.top(this.$element)),"function"==typeof f&&(f=d.bottom(this.$element));var h=this.getState(g,b,e,f);if(this.affixed!=h){null!=this.unpin&&this.$element.css("top","");var i="affix"+(h?"-"+h:""),j=a.Event(i+".bs.affix");if(this.$element.trigger(j),j.isDefaultPrevented())return;this.affixed=h,this.unpin="bottom"==h?this.getPinnedOffset():null,this.$element.removeClass(c.RESET).addClass(i).trigger(i.replace("affix","affixed")+".bs.affix")}"bottom"==h&&this.$element.offset({top:g-b-f})}};var d=a.fn.affix;a.fn.affix=b,a.fn.affix.Constructor=c,a.fn.affix.noConflict=function(){return a.fn.affix=d,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var c=a(this),d=c.data();d.offset=d.offset||{},null!=d.offsetBottom&&(d.offset.bottom=d.offsetBottom),null!=d.offsetTop&&(d.offset.top=d.offsetTop),b.call(c,d)})})}(jQuery);;
/*! Magnific Popup - v1.0.0 - 2015-01-03
* http://dimsemenov.com/plugins/magnific-popup/
* Copyright (c) 2015 Dmitry Semenov; */;(function(factory){if(typeof define==='function'&&define.amd){define(['jquery'],factory);}else if(typeof exports==='object'){factory(require('jquery'));}else{factory(window.jQuery||window.Zepto);}}(function($){var CLOSE_EVENT='Close',BEFORE_CLOSE_EVENT='BeforeClose',AFTER_CLOSE_EVENT='AfterClose',BEFORE_APPEND_EVENT='BeforeAppend',MARKUP_PARSE_EVENT='MarkupParse',OPEN_EVENT='Open',CHANGE_EVENT='Change',NS='mfp',EVENT_NS='.'+NS,READY_CLASS='mfp-ready',REMOVING_CLASS='mfp-removing',PREVENT_CLOSE_CLASS='mfp-prevent-close';var mfp,MagnificPopup=function(){},_isJQ=!!(window.jQuery),_prevStatus,_window=$(window),_document,_prevContentType,_wrapClasses,_currPopupType;var _mfpOn=function(name,f){mfp.ev.on(NS+name+EVENT_NS,f);},_getEl=function(className,appendTo,html,raw){var el=document.createElement('div');el.className='mfp-'+className;if(html){el.innerHTML=html;}
if(!raw){el=$(el);if(appendTo){el.appendTo(appendTo);}}else if(appendTo){appendTo.appendChild(el);}
return el;},_mfpTrigger=function(e,data){mfp.ev.triggerHandler(NS+e,data);if(mfp.st.callbacks){e=e.charAt(0).toLowerCase()+e.slice(1);if(mfp.st.callbacks[e]){mfp.st.callbacks[e].apply(mfp,$.isArray(data)?data:[data]);}}},_getCloseBtn=function(type){if(type!==_currPopupType||!mfp.currTemplate.closeBtn){mfp.currTemplate.closeBtn=$(mfp.st.closeMarkup.replace('%title%',mfp.st.tClose));_currPopupType=type;}
return mfp.currTemplate.closeBtn;},_checkInstance=function(){if(!$.magnificPopup.instance){mfp=new MagnificPopup();mfp.init();$.magnificPopup.instance=mfp;}},supportsTransitions=function(){var s=document.createElement('p').style,v=['ms','O','Moz','Webkit'];if(s['transition']!==undefined){return true;}
while(v.length){if(v.pop()+'Transition'in s){return true;}}
return false;};MagnificPopup.prototype={constructor:MagnificPopup,init:function(){var appVersion=navigator.appVersion;mfp.isIE7=appVersion.indexOf("MSIE 7.")!==-1;mfp.isIE8=appVersion.indexOf("MSIE 8.")!==-1;mfp.isLowIE=mfp.isIE7||mfp.isIE8;mfp.isAndroid=(/android/gi).test(appVersion);mfp.isIOS=(/iphone|ipad|ipod/gi).test(appVersion);mfp.supportsTransition=supportsTransitions();mfp.probablyMobile=(mfp.isAndroid||mfp.isIOS||/(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent));_document=$(document);mfp.popupsCache={};},open:function(data){var i;if(data.isObj===false){mfp.items=data.items.toArray();mfp.index=0;var items=data.items,item;for(i=0;i<items.length;i++){item=items[i];if(item.parsed){item=item.el[0];}
if(item===data.el[0]){mfp.index=i;break;}}}else{mfp.items=$.isArray(data.items)?data.items:[data.items];mfp.index=data.index||0;}
if(mfp.isOpen){mfp.updateItemHTML();return;}
mfp.types=[];_wrapClasses='';if(data.mainEl&&data.mainEl.length){mfp.ev=data.mainEl.eq(0);}else{mfp.ev=_document;}
if(data.key){if(!mfp.popupsCache[data.key]){mfp.popupsCache[data.key]={};}
mfp.currTemplate=mfp.popupsCache[data.key];}else{mfp.currTemplate={};}
mfp.st=$.extend(true,{},$.magnificPopup.defaults,data);mfp.fixedContentPos=mfp.st.fixedContentPos==='auto'?!mfp.probablyMobile:mfp.st.fixedContentPos;if(mfp.st.modal){mfp.st.closeOnContentClick=false;mfp.st.closeOnBgClick=false;mfp.st.showCloseBtn=false;mfp.st.enableEscapeKey=false;}
if(!mfp.bgOverlay){mfp.bgOverlay=_getEl('bg').on('click'+EVENT_NS,function(){mfp.close();});mfp.wrap=_getEl('wrap').attr('tabindex',-1).on('click'+EVENT_NS,function(e){if(mfp._checkIfClose(e.target)){mfp.close();}});mfp.container=_getEl('container',mfp.wrap);}
mfp.contentContainer=_getEl('content');if(mfp.st.preloader){mfp.preloader=_getEl('preloader',mfp.container,mfp.st.tLoading);}
var modules=$.magnificPopup.modules;for(i=0;i<modules.length;i++){var n=modules[i];n=n.charAt(0).toUpperCase()+n.slice(1);mfp['init'+n].call(mfp);}
_mfpTrigger('BeforeOpen');if(mfp.st.showCloseBtn){if(!mfp.st.closeBtnInside){mfp.wrap.append(_getCloseBtn());}else{_mfpOn(MARKUP_PARSE_EVENT,function(e,template,values,item){values.close_replaceWith=_getCloseBtn(item.type);});_wrapClasses+=' mfp-close-btn-in';}}
if(mfp.st.alignTop){_wrapClasses+=' mfp-align-top';}
if(mfp.fixedContentPos){mfp.wrap.css({overflow:mfp.st.overflowY,overflowX:'hidden',overflowY:mfp.st.overflowY});}else{mfp.wrap.css({top:_window.scrollTop(),position:'absolute'});}
if(mfp.st.fixedBgPos===false||(mfp.st.fixedBgPos==='auto'&&!mfp.fixedContentPos)){mfp.bgOverlay.css({height:_document.height(),position:'absolute'});}
if(mfp.st.enableEscapeKey){_document.on('keyup'+EVENT_NS,function(e){if(e.keyCode===27){mfp.close();}});}
_window.on('resize'+EVENT_NS,function(){mfp.updateSize();});if(!mfp.st.closeOnContentClick){_wrapClasses+=' mfp-auto-cursor';}
if(_wrapClasses)
mfp.wrap.addClass(_wrapClasses);var windowHeight=mfp.wH=_window.height();var windowStyles={};if(mfp.fixedContentPos){if(mfp._hasScrollBar(windowHeight)){var s=mfp._getScrollbarSize();if(s){windowStyles.marginRight=s;}}}
if(mfp.fixedContentPos){if(!mfp.isIE7){windowStyles.overflow='hidden';}else{$('body, html').css('overflow','hidden');}}
var classesToadd=mfp.st.mainClass;if(mfp.isIE7){classesToadd+=' mfp-ie7';}
if(classesToadd){mfp._addClassToMFP(classesToadd);}
mfp.updateItemHTML();_mfpTrigger('BuildControls');$('html').css(windowStyles);mfp.bgOverlay.add(mfp.wrap).prependTo(mfp.st.prependTo||$(document.body));mfp._lastFocusedEl=document.activeElement;setTimeout(function(){if(mfp.content){mfp._addClassToMFP(READY_CLASS);mfp._setFocus();}else{mfp.bgOverlay.addClass(READY_CLASS);}
_document.on('focusin'+EVENT_NS,mfp._onFocusIn);},16);mfp.isOpen=true;mfp.updateSize(windowHeight);_mfpTrigger(OPEN_EVENT);return data;},close:function(){if(!mfp.isOpen)return;_mfpTrigger(BEFORE_CLOSE_EVENT);mfp.isOpen=false;if(mfp.st.removalDelay&&!mfp.isLowIE&&mfp.supportsTransition){mfp._addClassToMFP(REMOVING_CLASS);setTimeout(function(){mfp._close();},mfp.st.removalDelay);}else{mfp._close();}},_close:function(){_mfpTrigger(CLOSE_EVENT);var classesToRemove=REMOVING_CLASS+' '+READY_CLASS+' ';mfp.bgOverlay.detach();mfp.wrap.detach();mfp.container.empty();if(mfp.st.mainClass){classesToRemove+=mfp.st.mainClass+' ';}
mfp._removeClassFromMFP(classesToRemove);if(mfp.fixedContentPos){var windowStyles={marginRight:''};if(mfp.isIE7){$('body, html').css('overflow','');}else{windowStyles.overflow='';}
$('html').css(windowStyles);}
_document.off('keyup'+EVENT_NS+' focusin'+EVENT_NS);mfp.ev.off(EVENT_NS);mfp.wrap.attr('class','mfp-wrap').removeAttr('style');mfp.bgOverlay.attr('class','mfp-bg');mfp.container.attr('class','mfp-container');if(mfp.st.showCloseBtn&&(!mfp.st.closeBtnInside||mfp.currTemplate[mfp.currItem.type]===true)){if(mfp.currTemplate.closeBtn)
mfp.currTemplate.closeBtn.detach();}
if(mfp._lastFocusedEl){$(mfp._lastFocusedEl).focus();}
mfp.currItem=null;mfp.content=null;mfp.currTemplate=null;mfp.prevHeight=0;_mfpTrigger(AFTER_CLOSE_EVENT);},updateSize:function(winHeight){if(mfp.isIOS){var zoomLevel=document.documentElement.clientWidth / window.innerWidth;var height=window.innerHeight*zoomLevel;mfp.wrap.css('height',height);mfp.wH=height;}else{mfp.wH=winHeight||_window.height();}
if(!mfp.fixedContentPos){mfp.wrap.css('height',mfp.wH);}
_mfpTrigger('Resize');},updateItemHTML:function(){var item=mfp.items[mfp.index];mfp.contentContainer.detach();if(mfp.content)
mfp.content.detach();if(!item.parsed){item=mfp.parseEl(mfp.index);}
var type=item.type;_mfpTrigger('BeforeChange',[mfp.currItem?mfp.currItem.type:'',type]);mfp.currItem=item;if(!mfp.currTemplate[type]){var markup=mfp.st[type]?mfp.st[type].markup:false;_mfpTrigger('FirstMarkupParse',markup);if(markup){mfp.currTemplate[type]=$(markup);}else{mfp.currTemplate[type]=true;}}
if(_prevContentType&&_prevContentType!==item.type){mfp.container.removeClass('mfp-'+_prevContentType+'-holder');}
var newContent=mfp['get'+type.charAt(0).toUpperCase()+type.slice(1)](item,mfp.currTemplate[type]);mfp.appendContent(newContent,type);item.preloaded=true;_mfpTrigger(CHANGE_EVENT,item);_prevContentType=item.type;mfp.container.prepend(mfp.contentContainer);_mfpTrigger('AfterChange');},appendContent:function(newContent,type){mfp.content=newContent;if(newContent){if(mfp.st.showCloseBtn&&mfp.st.closeBtnInside&&mfp.currTemplate[type]===true){if(!mfp.content.find('.mfp-close').length){mfp.content.append(_getCloseBtn());}}else{mfp.content=newContent;}}else{mfp.content='';}
_mfpTrigger(BEFORE_APPEND_EVENT);mfp.container.addClass('mfp-'+type+'-holder');mfp.contentContainer.append(mfp.content);},parseEl:function(index){var item=mfp.items[index],type;if(item.tagName){item={el:$(item)};}else{type=item.type;item={data:item,src:item.src};}
if(item.el){var types=mfp.types;for(var i=0;i<types.length;i++){if(item.el.hasClass('mfp-'+types[i])){type=types[i];break;}}
item.src=item.el.attr('data-mfp-src');if(!item.src){item.src=item.el.attr('href');}}
item.type=type||mfp.st.type||'inline';item.index=index;item.parsed=true;mfp.items[index]=item;_mfpTrigger('ElementParse',item);return mfp.items[index];},addGroup:function(el,options){var eHandler=function(e){e.mfpEl=this;mfp._openClick(e,el,options);};if(!options){options={};}
var eName='click.magnificPopup';options.mainEl=el;if(options.items){options.isObj=true;el.off(eName).on(eName,eHandler);}else{options.isObj=false;if(options.delegate){el.off(eName).on(eName,options.delegate,eHandler);}else{options.items=el;el.off(eName).on(eName,eHandler);}}},_openClick:function(e,el,options){var midClick=options.midClick!==undefined?options.midClick:$.magnificPopup.defaults.midClick;if(!midClick&&(e.which===2||e.ctrlKey||e.metaKey)){return;}
var disableOn=options.disableOn!==undefined?options.disableOn:$.magnificPopup.defaults.disableOn;if(disableOn){if($.isFunction(disableOn)){if(!disableOn.call(mfp)){return true;}}else{if(_window.width()<disableOn){return true;}}}
if(e.type){e.preventDefault();if(mfp.isOpen){e.stopPropagation();}}
options.el=$(e.mfpEl);if(options.delegate){options.items=el.find(options.delegate);}
mfp.open(options);},updateStatus:function(status,text){if(mfp.preloader){if(_prevStatus!==status){mfp.container.removeClass('mfp-s-'+_prevStatus);}
if(!text&&status==='loading'){text=mfp.st.tLoading;}
var data={status:status,text:text};_mfpTrigger('UpdateStatus',data);status=data.status;text=data.text;mfp.preloader.html(text);mfp.preloader.find('a').on('click',function(e){e.stopImmediatePropagation();});mfp.container.addClass('mfp-s-'+status);_prevStatus=status;}},_checkIfClose:function(target){if($(target).hasClass(PREVENT_CLOSE_CLASS)){return;}
var closeOnContent=mfp.st.closeOnContentClick;var closeOnBg=mfp.st.closeOnBgClick;if(closeOnContent&&closeOnBg){return true;}else{if(!mfp.content||$(target).hasClass('mfp-close')||(mfp.preloader&&target===mfp.preloader[0])){return true;}
if((target!==mfp.content[0]&&!$.contains(mfp.content[0],target))){if(closeOnBg){if($.contains(document,target)){return true;}}}else if(closeOnContent){return true;}}
return false;},_addClassToMFP:function(cName){mfp.bgOverlay.addClass(cName);mfp.wrap.addClass(cName);},_removeClassFromMFP:function(cName){this.bgOverlay.removeClass(cName);mfp.wrap.removeClass(cName);},_hasScrollBar:function(winHeight){return((mfp.isIE7?_document.height():document.body.scrollHeight)>(winHeight||_window.height()));},_setFocus:function(){(mfp.st.focus?mfp.content.find(mfp.st.focus).eq(0):mfp.wrap).focus();},_onFocusIn:function(e){if(e.target!==mfp.wrap[0]&&!$.contains(mfp.wrap[0],e.target)){mfp._setFocus();return false;}},_parseMarkup:function(template,values,item){var arr;if(item.data){values=$.extend(item.data,values);}
_mfpTrigger(MARKUP_PARSE_EVENT,[template,values,item]);$.each(values,function(key,value){if(value===undefined||value===false){return true;}
arr=key.split('_');if(arr.length>1){var el=template.find(EVENT_NS+'-'+arr[0]);if(el.length>0){var attr=arr[1];if(attr==='replaceWith'){if(el[0]!==value[0]){el.replaceWith(value);}}else if(attr==='img'){if(el.is('img')){el.attr('src',value);}else{el.replaceWith('<img src="'+value+'" class="'+el.attr('class')+'" />');}}else{el.attr(arr[1],value);}}}else{template.find(EVENT_NS+'-'+key).html(value);}});},_getScrollbarSize:function(){if(mfp.scrollbarSize===undefined){var scrollDiv=document.createElement("div");scrollDiv.style.cssText='width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;';document.body.appendChild(scrollDiv);mfp.scrollbarSize=scrollDiv.offsetWidth-scrollDiv.clientWidth;document.body.removeChild(scrollDiv);}
return mfp.scrollbarSize;}};$.magnificPopup={instance:null,proto:MagnificPopup.prototype,modules:[],open:function(options,index){_checkInstance();if(!options){options={};}else{options=$.extend(true,{},options);}
options.isObj=true;options.index=index||0;return this.instance.open(options);},close:function(){return $.magnificPopup.instance&&$.magnificPopup.instance.close();},registerModule:function(name,module){if(module.options){$.magnificPopup.defaults[name]=module.options;}
$.extend(this.proto,module.proto);this.modules.push(name);},defaults:{disableOn:0,key:null,midClick:false,mainClass:'',preloader:true,focus:'',closeOnContentClick:false,closeOnBgClick:true,closeBtnInside:true,showCloseBtn:true,enableEscapeKey:true,modal:false,alignTop:false,removalDelay:0,prependTo:null,fixedContentPos:'auto',fixedBgPos:'auto',overflowY:'auto',closeMarkup:'<button title="%title%" type="button" class="mfp-close"></button>',tClose:'Close (Esc)',tLoading:'Loading...'}};$.fn.magnificPopup=function(options){_checkInstance();var jqEl=$(this);if(typeof options==="string"){if(options==='open'){var items,itemOpts=_isJQ?jqEl.data('magnificPopup'):jqEl[0].magnificPopup,index=parseInt(arguments[1],10)||0;if(itemOpts.items){items=itemOpts.items[index];}else{items=jqEl;if(itemOpts.delegate){items=items.find(itemOpts.delegate);}
items=items.eq(index);}
mfp._openClick({mfpEl:items},jqEl,itemOpts);}else{if(mfp.isOpen)
mfp[options].apply(mfp,Array.prototype.slice.call(arguments,1));}}else{options=$.extend(true,{},options);if(_isJQ){jqEl.data('magnificPopup',options);}else{jqEl[0].magnificPopup=options;}
mfp.addGroup(jqEl,options);}
return jqEl;};var INLINE_NS='inline',_hiddenClass,_inlinePlaceholder,_lastInlineElement,_putInlineElementsBack=function(){if(_lastInlineElement){_inlinePlaceholder.after(_lastInlineElement.addClass(_hiddenClass)).detach();_lastInlineElement=null;}};$.magnificPopup.registerModule(INLINE_NS,{options:{hiddenClass:'hide',markup:'',tNotFound:'Content not found'},proto:{initInline:function(){mfp.types.push(INLINE_NS);_mfpOn(CLOSE_EVENT+'.'+INLINE_NS,function(){_putInlineElementsBack();});},getInline:function(item,template){_putInlineElementsBack();if(item.src){var inlineSt=mfp.st.inline,el=$(item.src);if(el.length){var parent=el[0].parentNode;if(parent&&parent.tagName){if(!_inlinePlaceholder){_hiddenClass=inlineSt.hiddenClass;_inlinePlaceholder=_getEl(_hiddenClass);_hiddenClass='mfp-'+_hiddenClass;}
_lastInlineElement=el.after(_inlinePlaceholder).detach().removeClass(_hiddenClass);}
mfp.updateStatus('ready');}else{mfp.updateStatus('error',inlineSt.tNotFound);el=$('<div>');}
item.inlineElement=el;return el;}
mfp.updateStatus('ready');mfp._parseMarkup(template,{},item);return template;}}});var AJAX_NS='ajax',_ajaxCur,_removeAjaxCursor=function(){if(_ajaxCur){$(document.body).removeClass(_ajaxCur);}},_destroyAjaxRequest=function(){_removeAjaxCursor();if(mfp.req){mfp.req.abort();}};$.magnificPopup.registerModule(AJAX_NS,{options:{settings:null,cursor:'mfp-ajax-cur',tError:'<a href="%url%">The content</a> could not be loaded.'},proto:{initAjax:function(){mfp.types.push(AJAX_NS);_ajaxCur=mfp.st.ajax.cursor;_mfpOn(CLOSE_EVENT+'.'+AJAX_NS,_destroyAjaxRequest);_mfpOn('BeforeChange.'+AJAX_NS,_destroyAjaxRequest);},getAjax:function(item){if(_ajaxCur){$(document.body).addClass(_ajaxCur);}
mfp.updateStatus('loading');var opts=$.extend({url:item.src,success:function(data,textStatus,jqXHR){var temp={data:data,xhr:jqXHR};_mfpTrigger('ParseAjax',temp);mfp.appendContent($(temp.data),AJAX_NS);item.finished=true;_removeAjaxCursor();mfp._setFocus();setTimeout(function(){mfp.wrap.addClass(READY_CLASS);},16);mfp.updateStatus('ready');_mfpTrigger('AjaxContentAdded');},error:function(){_removeAjaxCursor();item.finished=item.loadError=true;mfp.updateStatus('error',mfp.st.ajax.tError.replace('%url%',item.src));}},mfp.st.ajax.settings);mfp.req=$.ajax(opts);return'';}}});var _imgInterval,_getTitle=function(item){if(item.data&&item.data.title!==undefined)
return item.data.title;var src=mfp.st.image.titleSrc;if(src){if($.isFunction(src)){return src.call(mfp,item);}else if(item.el){return item.el.attr(src)||'';}}
return'';};$.magnificPopup.registerModule('image',{options:{markup:'<div class="mfp-figure">'+'<div class="mfp-close"></div>'+'<figure>'+'<div class="mfp-img"></div>'+'<figcaption>'+'<div class="mfp-bottom-bar">'+'<div class="mfp-title"></div>'+'<div class="mfp-counter"></div>'+'</div>'+'</figcaption>'+'</figure>'+'</div>',cursor:'mfp-zoom-out-cur',titleSrc:'title',verticalFit:true,tError:'<a href="%url%">The image</a> could not be loaded.'},proto:{initImage:function(){var imgSt=mfp.st.image,ns='.image';mfp.types.push('image');_mfpOn(OPEN_EVENT+ns,function(){if(mfp.currItem.type==='image'&&imgSt.cursor){$(document.body).addClass(imgSt.cursor);}});_mfpOn(CLOSE_EVENT+ns,function(){if(imgSt.cursor){$(document.body).removeClass(imgSt.cursor);}
_window.off('resize'+EVENT_NS);});_mfpOn('Resize'+ns,mfp.resizeImage);if(mfp.isLowIE){_mfpOn('AfterChange',mfp.resizeImage);}},resizeImage:function(){var item=mfp.currItem;if(!item||!item.img)return;if(mfp.st.image.verticalFit){var decr=0;if(mfp.isLowIE){decr=parseInt(item.img.css('padding-top'),10)+parseInt(item.img.css('padding-bottom'),10);}
item.img.css('max-height',mfp.wH-decr);}},_onImageHasSize:function(item){if(item.img){item.hasSize=true;if(_imgInterval){clearInterval(_imgInterval);}
item.isCheckingImgSize=false;_mfpTrigger('ImageHasSize',item);if(item.imgHidden){if(mfp.content)
mfp.content.removeClass('mfp-loading');item.imgHidden=false;}}},findImageSize:function(item){var counter=0,img=item.img[0],mfpSetInterval=function(delay){if(_imgInterval){clearInterval(_imgInterval);}
_imgInterval=setInterval(function(){if(img.naturalWidth>0){mfp._onImageHasSize(item);return;}
if(counter>200){clearInterval(_imgInterval);}
counter++;if(counter===3){mfpSetInterval(10);}else if(counter===40){mfpSetInterval(50);}else if(counter===100){mfpSetInterval(500);}},delay);};mfpSetInterval(1);},getImage:function(item,template){var guard=0,onLoadComplete=function(){if(item){if(item.img[0].complete){item.img.off('.mfploader');if(item===mfp.currItem){mfp._onImageHasSize(item);mfp.updateStatus('ready');}
item.hasSize=true;item.loaded=true;_mfpTrigger('ImageLoadComplete');}
else{guard++;if(guard<200){setTimeout(onLoadComplete,100);}else{onLoadError();}}}},onLoadError=function(){if(item){item.img.off('.mfploader');if(item===mfp.currItem){mfp._onImageHasSize(item);mfp.updateStatus('error',imgSt.tError.replace('%url%',item.src));}
item.hasSize=true;item.loaded=true;item.loadError=true;}},imgSt=mfp.st.image;var el=template.find('.mfp-img');if(el.length){var img=document.createElement('img');img.className='mfp-img';if(item.el&&item.el.find('img').length){img.alt=item.el.find('img').attr('alt');}
item.img=$(img).on('load.mfploader',onLoadComplete).on('error.mfploader',onLoadError);img.src=item.src;if(el.is('img')){item.img=item.img.clone();}
img=item.img[0];if(img.naturalWidth>0){item.hasSize=true;}else if(!img.width){item.hasSize=false;}}
mfp._parseMarkup(template,{title:_getTitle(item),img_replaceWith:item.img},item);mfp.resizeImage();if(item.hasSize){if(_imgInterval)clearInterval(_imgInterval);if(item.loadError){template.addClass('mfp-loading');mfp.updateStatus('error',imgSt.tError.replace('%url%',item.src));}else{template.removeClass('mfp-loading');mfp.updateStatus('ready');}
return template;}
mfp.updateStatus('loading');item.loading=true;if(!item.hasSize){item.imgHidden=true;template.addClass('mfp-loading');mfp.findImageSize(item);}
return template;}}});var hasMozTransform,getHasMozTransform=function(){if(hasMozTransform===undefined){hasMozTransform=document.createElement('p').style.MozTransform!==undefined;}
return hasMozTransform;};$.magnificPopup.registerModule('zoom',{options:{enabled:false,easing:'ease-in-out',duration:300,opener:function(element){return element.is('img')?element:element.find('img');}},proto:{initZoom:function(){var zoomSt=mfp.st.zoom,ns='.zoom',image;if(!zoomSt.enabled||!mfp.supportsTransition){return;}
var duration=zoomSt.duration,getElToAnimate=function(image){var newImg=image.clone().removeAttr('style').removeAttr('class').addClass('mfp-animated-image'),transition='all '+(zoomSt.duration/1000)+'s '+zoomSt.easing,cssObj={position:'fixed',zIndex:9999,left:0,top:0,'-webkit-backface-visibility':'hidden'},t='transition';cssObj['-webkit-'+t]=cssObj['-moz-'+t]=cssObj['-o-'+t]=cssObj[t]=transition;newImg.css(cssObj);return newImg;},showMainContent=function(){mfp.content.css('visibility','visible');},openTimeout,animatedImg;_mfpOn('BuildControls'+ns,function(){if(mfp._allowZoom()){clearTimeout(openTimeout);mfp.content.css('visibility','hidden');image=mfp._getItemToZoom();if(!image){showMainContent();return;}
animatedImg=getElToAnimate(image);animatedImg.css(mfp._getOffset());mfp.wrap.append(animatedImg);openTimeout=setTimeout(function(){animatedImg.css(mfp._getOffset(true));openTimeout=setTimeout(function(){showMainContent();setTimeout(function(){animatedImg.remove();image=animatedImg=null;_mfpTrigger('ZoomAnimationEnded');},16);},duration);},16);}});_mfpOn(BEFORE_CLOSE_EVENT+ns,function(){if(mfp._allowZoom()){clearTimeout(openTimeout);mfp.st.removalDelay=duration;if(!image){image=mfp._getItemToZoom();if(!image){return;}
animatedImg=getElToAnimate(image);}
animatedImg.css(mfp._getOffset(true));mfp.wrap.append(animatedImg);mfp.content.css('visibility','hidden');setTimeout(function(){animatedImg.css(mfp._getOffset());},16);}});_mfpOn(CLOSE_EVENT+ns,function(){if(mfp._allowZoom()){showMainContent();if(animatedImg){animatedImg.remove();}
image=null;}});},_allowZoom:function(){return mfp.currItem.type==='image';},_getItemToZoom:function(){if(mfp.currItem.hasSize){return mfp.currItem.img;}else{return false;}},_getOffset:function(isLarge){var el;if(isLarge){el=mfp.currItem.img;}else{el=mfp.st.zoom.opener(mfp.currItem.el||mfp.currItem);}
var offset=el.offset();var paddingTop=parseInt(el.css('padding-top'),10);var paddingBottom=parseInt(el.css('padding-bottom'),10);offset.top-=($(window).scrollTop()-paddingTop);var obj={width:el.width(),height:(_isJQ?el.innerHeight():el[0].offsetHeight)-paddingBottom-paddingTop};if(getHasMozTransform()){obj['-moz-transform']=obj['transform']='translate('+offset.left+'px,'+offset.top+'px)';}else{obj.left=offset.left;obj.top=offset.top;}
return obj;}}});var IFRAME_NS='iframe',_emptyPage='//about:blank',_fixIframeBugs=function(isShowing){if(mfp.currTemplate[IFRAME_NS]){var el=mfp.currTemplate[IFRAME_NS].find('iframe');if(el.length){if(!isShowing){el[0].src=_emptyPage;}
if(mfp.isIE8){el.css('display',isShowing?'block':'none');}}}};$.magnificPopup.registerModule(IFRAME_NS,{options:{markup:'<div class="mfp-iframe-scaler">'+'<div class="mfp-close"></div>'+'<iframe class="mfp-iframe" src="//about:blank" frameborder="0" allowfullscreen></iframe>'+'</div>',srcAction:'iframe_src',patterns:{youtube:{index:'youtube.com',id:'v=',src:'//www.youtube.com/embed/%id%?autoplay=1'},vimeo:{index:'vimeo.com/',id:'/',src:'//player.vimeo.com/video/%id%?autoplay=1'},gmaps:{index:'//maps.google.',src:'%id%&output=embed'}}},proto:{initIframe:function(){mfp.types.push(IFRAME_NS);_mfpOn('BeforeChange',function(e,prevType,newType){if(prevType!==newType){if(prevType===IFRAME_NS){_fixIframeBugs();}else if(newType===IFRAME_NS){_fixIframeBugs(true);}}});_mfpOn(CLOSE_EVENT+'.'+IFRAME_NS,function(){_fixIframeBugs();});},getIframe:function(item,template){var embedSrc=item.src;var iframeSt=mfp.st.iframe;$.each(iframeSt.patterns,function(){if(embedSrc.indexOf(this.index)>-1){if(this.id){if(typeof this.id==='string'){embedSrc=embedSrc.substr(embedSrc.lastIndexOf(this.id)+this.id.length,embedSrc.length);}else{embedSrc=this.id.call(this,embedSrc);}}
embedSrc=this.src.replace('%id%',embedSrc);return false;}});var dataObj={};if(iframeSt.srcAction){dataObj[iframeSt.srcAction]=embedSrc;}
mfp._parseMarkup(template,dataObj,item);mfp.updateStatus('ready');return template;}}});var _getLoopedId=function(index){var numSlides=mfp.items.length;if(index>numSlides-1){return index-numSlides;}else if(index<0){return numSlides+index;}
return index;},_replaceCurrTotal=function(text,curr,total){return text.replace(/%curr%/gi,curr+1).replace(/%total%/gi,total);};$.magnificPopup.registerModule('gallery',{options:{enabled:false,arrowMarkup:'<button title="%title%" type="button" class="mfp-arrow mfp-arrow-%dir%"></button>',preload:[0,2],navigateByImgClick:true,arrows:true,tPrev:'Previous (Left arrow key)',tNext:'Next (Right arrow key)',tCounter:'%curr% of %total%'},proto:{initGallery:function(){var gSt=mfp.st.gallery,ns='.mfp-gallery',supportsFastClick=Boolean($.fn.mfpFastClick);mfp.direction=true;if(!gSt||!gSt.enabled)return false;_wrapClasses+=' mfp-gallery';_mfpOn(OPEN_EVENT+ns,function(){if(gSt.navigateByImgClick){mfp.wrap.on('click'+ns,'.mfp-img',function(){if(mfp.items.length>1){mfp.next();return false;}});}
_document.on('keydown'+ns,function(e){if(e.keyCode===37){mfp.prev();}else if(e.keyCode===39){mfp.next();}});});_mfpOn('UpdateStatus'+ns,function(e,data){if(data.text){data.text=_replaceCurrTotal(data.text,mfp.currItem.index,mfp.items.length);}});_mfpOn(MARKUP_PARSE_EVENT+ns,function(e,element,values,item){var l=mfp.items.length;values.counter=l>1?_replaceCurrTotal(gSt.tCounter,item.index,l):'';});_mfpOn('BuildControls'+ns,function(){if(mfp.items.length>1&&gSt.arrows&&!mfp.arrowLeft){var markup=gSt.arrowMarkup,arrowLeft=mfp.arrowLeft=$(markup.replace(/%title%/gi,gSt.tPrev).replace(/%dir%/gi,'left')).addClass(PREVENT_CLOSE_CLASS),arrowRight=mfp.arrowRight=$(markup.replace(/%title%/gi,gSt.tNext).replace(/%dir%/gi,'right')).addClass(PREVENT_CLOSE_CLASS);var eName=supportsFastClick?'mfpFastClick':'click';arrowLeft[eName](function(){mfp.prev();});arrowRight[eName](function(){mfp.next();});if(mfp.isIE7){_getEl('b',arrowLeft[0],false,true);_getEl('a',arrowLeft[0],false,true);_getEl('b',arrowRight[0],false,true);_getEl('a',arrowRight[0],false,true);}
mfp.container.append(arrowLeft.add(arrowRight));}});_mfpOn(CHANGE_EVENT+ns,function(){if(mfp._preloadTimeout)clearTimeout(mfp._preloadTimeout);mfp._preloadTimeout=setTimeout(function(){mfp.preloadNearbyImages();mfp._preloadTimeout=null;},16);});_mfpOn(CLOSE_EVENT+ns,function(){_document.off(ns);mfp.wrap.off('click'+ns);if(mfp.arrowLeft&&supportsFastClick){mfp.arrowLeft.add(mfp.arrowRight).destroyMfpFastClick();}
mfp.arrowRight=mfp.arrowLeft=null;});},next:function(){mfp.direction=true;mfp.index=_getLoopedId(mfp.index+1);mfp.updateItemHTML();},prev:function(){mfp.direction=false;mfp.index=_getLoopedId(mfp.index-1);mfp.updateItemHTML();},goTo:function(newIndex){mfp.direction=(newIndex>=mfp.index);mfp.index=newIndex;mfp.updateItemHTML();},preloadNearbyImages:function(){var p=mfp.st.gallery.preload,preloadBefore=Math.min(p[0],mfp.items.length),preloadAfter=Math.min(p[1],mfp.items.length),i;for(i=1;i<=(mfp.direction?preloadAfter:preloadBefore);i++){mfp._preloadItem(mfp.index+i);}
for(i=1;i<=(mfp.direction?preloadBefore:preloadAfter);i++){mfp._preloadItem(mfp.index-i);}},_preloadItem:function(index){index=_getLoopedId(index);if(mfp.items[index].preloaded){return;}
var item=mfp.items[index];if(!item.parsed){item=mfp.parseEl(index);}
_mfpTrigger('LazyLoad',item);if(item.type==='image'){item.img=$('<img class="mfp-img" />').on('load.mfploader',function(){item.hasSize=true;}).on('error.mfploader',function(){item.hasSize=true;item.loadError=true;_mfpTrigger('LazyLoadError',item);}).attr('src',item.src);}
item.preloaded=true;}}});var RETINA_NS='retina';$.magnificPopup.registerModule(RETINA_NS,{options:{replaceSrc:function(item){return item.src.replace(/\.\w+$/,function(m){return'@2x'+m;});},ratio:1},proto:{initRetina:function(){if(window.devicePixelRatio>1){var st=mfp.st.retina,ratio=st.ratio;ratio=!isNaN(ratio)?ratio:ratio();if(ratio>1){_mfpOn('ImageHasSize'+'.'+RETINA_NS,function(e,item){item.img.css({'max-width':item.img[0].naturalWidth / ratio,'width':'100%'});});_mfpOn('ElementParse'+'.'+RETINA_NS,function(e,item){item.src=st.replaceSrc(item,ratio);});}}}}});(function(){var ghostClickDelay=1000,supportsTouch='ontouchstart'in window,unbindTouchMove=function(){_window.off('touchmove'+ns+' touchend'+ns);},eName='mfpFastClick',ns='.'+eName;$.fn.mfpFastClick=function(callback){return $(this).each(function(){var elem=$(this),lock;if(supportsTouch){var timeout,startX,startY,pointerMoved,point,numPointers;elem.on('touchstart'+ns,function(e){pointerMoved=false;numPointers=1;point=e.originalEvent?e.originalEvent.touches[0]:e.touches[0];startX=point.clientX;startY=point.clientY;_window.on('touchmove'+ns,function(e){point=e.originalEvent?e.originalEvent.touches:e.touches;numPointers=point.length;point=point[0];if(Math.abs(point.clientX-startX)>10||Math.abs(point.clientY-startY)>10){pointerMoved=true;unbindTouchMove();}}).on('touchend'+ns,function(e){unbindTouchMove();if(pointerMoved||numPointers>1){return;}
lock=true;e.preventDefault();clearTimeout(timeout);timeout=setTimeout(function(){lock=false;},ghostClickDelay);callback();});});}
elem.on('click'+ns,function(){if(!lock){callback();}});});};$.fn.destroyMfpFastClick=function(){$(this).off('touchstart'+ns+' click'+ns);if(supportsTouch)_window.off('touchmove'+ns+' touchend'+ns);};})();_checkInstance();}));;;(function(factory){if(typeof define==='function'&&define.amd){define('pnotify',['jquery'],factory);}else{factory(jQuery);}}(function($){var default_stack={dir1:"down",dir2:"left",push:"top",spacing1:15,spacing2:15,context:$("body")};var timer,body,jwindow=$(window);var do_when_ready=function(){body=$("body");PNotify.prototype.options.stack.context=body;jwindow=$(window);jwindow.bind('resize',function(){if(timer)clearTimeout(timer);timer=setTimeout(function(){PNotify.positionAll(true)},10);});};PNotify=function(options){this.parseOptions(options);this.init();};$.extend(PNotify.prototype,{version:"2.0.1",options:{title:false,title_escape:false,text:false,text_escape:false,styling:"bootstrap3",addclass:"",cornerclass:"",auto_display:true,width:"290px",min_height:"16px",type:"notice",icon:true,opacity:1,animation:"fade",animate_speed:"slow",position_animate_speed:500,shadow:false,hide:true,delay:8000,mouse_reset:true,remove:true,insert_brs:true,destroy:true,stack:default_stack},modules:{},runModules:function(event,arg){var curArg;for(var module in this.modules){curArg=((typeof arg==="object"&&module in arg)?arg[module]:arg);if(typeof this.modules[module][event]==='function')this.modules[module][event](this,typeof this.options[module]==='object'?this.options[module]:{},curArg);}},state:"initializing",timer:null,styles:null,elem:null,container:null,title_container:null,text_container:null,animating:false,timerHide:false,init:function(){var that=this;this.modules={};$.extend(true,this.modules,PNotify.prototype.modules);if(typeof this.options.styling==="object"){this.styles=this.options.styling;}else{this.styles=PNotify.styling[this.options.styling];}
this.elem=$("<div />",{"class":"ui-pnotify "+this.options.addclass,"css":{"display":"none"},"mouseenter":function(e){if(that.options.mouse_reset&&that.animating==="out"){if(!that.timerHide)return;that.cancelRemove();}
if(that.options.hide&&that.options.mouse_reset)that.cancelRemove();},"mouseleave":function(e){if(that.options.hide&&that.options.mouse_reset)that.queueRemove();PNotify.positionAll();}});this.container=$("<div />",{"class":this.styles.container+" ui-pnotify-container "+(this.options.type==="error"?this.styles.error:(this.options.type==="primary"?this.styles.primary:(this.options.type==="info"?this.styles.info:(this.options.type==="success"?this.styles.success:(this.options.type==="warning"?this.styles.warning:(this.options.type==="danger"?this.styles.danger:(this.options.type==="alert"?this.styles.alert:(this.options.type==="system"?this.styles.system:(this.options.type==="dark"?this.styles.dark:this.options.type==="success"?this.styles.success:this.styles.notice)))))))))}).appendTo(this.elem);if(this.options.cornerclass!=="")this.container.removeClass("ui-corner-all").addClass(this.options.cornerclass);if(this.options.shadow)this.container.addClass("ui-pnotify-shadow");if(this.options.icon!==false){$("<div />",{"class":"ui-pnotify-icon"}).append($("<span />",{"class":this.options.icon===true?(this.options.type==="error"?this.styles.error_icon:(this.options.type==="primary"?this.styles.primary_icon:(this.options.type==="info"?this.styles.info_icon:(this.options.type==="success"?this.styles.success_icon:(this.options.type==="warning"?this.styles.warning_icon:(this.options.type==="danger"?this.styles.danger_icon:(this.options.type==="alert"?this.styles.alert_icon:(this.options.type==="system"?this.styles.system_icon:(this.options.type==="dark"?this.styles.dark_icon:this.styles.notice_icon))))))))):this.options.icon})).prependTo(this.container);}
this.title_container=$("<h4 />",{"class":"ui-pnotify-title"}).appendTo(this.container);if(this.options.title===false)this.title_container.hide();else if(this.options.title_escape)this.title_container.text(this.options.title);else
this.title_container.html(this.options.title);this.text_container=$("<div />",{"class":"ui-pnotify-text"}).appendTo(this.container);if(this.options.text===false)this.text_container.hide();else if(this.options.text_escape)this.text_container.text(this.options.text);else
this.text_container.html(this.options.insert_brs?String(this.options.text).replace(/\n/g,"<br />"):this.options.text);if(typeof this.options.width==="string")this.elem.css("width",this.options.width);if(typeof this.options.min_height==="string")this.container.css("min-height",this.options.min_height);if(this.options.stack.push==="top")PNotify.notices=$.merge([this],PNotify.notices);else
PNotify.notices=$.merge(PNotify.notices,[this]);if(this.options.stack.push==="top")this.queuePosition(false,1);this.options.stack.animation=false;this.runModules('init');if(this.options.auto_display)this.open();return this;},update:function(options){var oldOpts=this.options;this.parseOptions(oldOpts,options);if(this.options.cornerclass!==oldOpts.cornerclass)this.container.removeClass("ui-corner-all "+oldOpts.cornerclass).addClass(this.options.cornerclass);if(this.options.shadow!==oldOpts.shadow){if(this.options.shadow)this.container.addClass("ui-pnotify-shadow");else
this.container.removeClass("ui-pnotify-shadow");}
if(this.options.addclass===false)this.elem.removeClass(oldOpts.addclass);else if(this.options.addclass!==oldOpts.addclass)this.elem.removeClass(oldOpts.addclass).addClass(this.options.addclass);if(this.options.title===false)this.title_container.slideUp("fast");else if(this.options.title!==oldOpts.title){if(this.options.title_escape)this.title_container.text(this.options.title);else
this.title_container.html(this.options.title);if(oldOpts.title===false)this.title_container.slideDown(200)}
if(this.options.text===false){this.text_container.slideUp("fast");}else if(this.options.text!==oldOpts.text){if(this.options.text_escape)this.text_container.text(this.options.text);else
this.text_container.html(this.options.insert_brs?String(this.options.text).replace(/\n/g,"<br />"):this.options.text);if(oldOpts.text===false)this.text_container.slideDown(200)}
if(this.options.type!==oldOpts.type)this.container.removeClass(this.styles.error+" "+this.styles.notice+" "+this.styles.primary+" "+this.styles.info+" "+this.styles.success+" "+this.styles.warning+" "+this.styles.danger+" "+this.styles.alert+" "+this.styles.system+" "+this.styles.dark).addClass(this.options.type==="error"?this.styles.error:(this.options.type==="primary"?this.styles.primary:(this.options.type==="info"?this.styles.info:(this.options.type==="success"?this.styles.success:(this.options.type==="warning"?this.styles.warning:(this.options.type==="danger"?this.styles.danger:(this.options.type==="alert"?this.styles.alert:(this.options.type==="system"?this.styles.system:(this.options.type==="dark"?this.styles.dark:this.styles.notice)))))))));if(this.options.icon!==oldOpts.icon||(this.options.icon===true&&this.options.type!==oldOpts.type)){this.container.find("div.ui-pnotify-icon").remove();if(this.options.icon!==false){$("<div />",{"class":"ui-pnotify-icon"}).append($("<span />",{"class":this.options.icon===true?(this.options.type==="error"?this.styles.error_icon:(this.options.type==="primary"?this.styles.primary_icon:(this.options.type==="info"?this.styles.info_icon:(this.options.type==="success"?this.styles.success_icon:(this.options.type==="warning"?this.styles.warning_icon:(this.options.type==="danger"?this.styles.danger_icon:(this.options.type==="alert"?this.styles.alert_icon:(this.options.type==="system"?this.styles.system_icon:(this.options.type==="dark"?this.styles.dark_icon:this.styles.notice_icon))))))))):this.options.icon})).prependTo(this.container);}}
if(this.options.width!==oldOpts.width)this.elem.animate({width:this.options.width});if(this.options.min_height!==oldOpts.min_height)this.container.animate({minHeight:this.options.min_height});if(this.options.opacity!==oldOpts.opacity)this.elem.fadeTo(this.options.animate_speed,this.options.opacity);if(!this.options.hide)this.cancelRemove();else if(!oldOpts.hide)this.queueRemove();this.queuePosition(true);this.runModules('update',oldOpts);return this;},open:function(){this.state="opening";this.runModules('beforeOpen');var that=this;if(!this.elem.parent().length)this.elem.appendTo(this.options.stack.context?this.options.stack.context:body);if(this.options.stack.push!=="top")this.position(true);if(this.options.animation==="fade"||this.options.animation.effect_in==="fade"){this.elem.show().fadeTo(0,0).hide();}else{if(this.options.opacity!==1)this.elem.show().fadeTo(0,this.options.opacity).hide();}
this.animateIn(function(){that.queuePosition(true);if(that.options.hide)that.queueRemove();that.state="open";that.runModules('afterOpen');});return this;},remove:function(timer_hide){this.state="closing";this.timerHide=!!timer_hide;this.runModules('beforeClose');var that=this;if(this.timer){window.clearTimeout(this.timer);this.timer=null;}
this.animateOut(function(){that.state="closed";that.runModules('afterClose');that.queuePosition(true);if(that.options.remove)that.elem.detach();that.runModules('beforeDestroy');if(that.options.destroy){if(PNotify.notices!==null){var idx=$.inArray(that,PNotify.notices);if(idx!==-1){PNotify.notices.splice(idx,1);}}}
that.runModules('afterDestroy');});return this;},get:function(){return this.elem;},parseOptions:function(options,moreOptions){this.options=$.extend(true,{},PNotify.prototype.options);this.options.stack=PNotify.prototype.options.stack;var optArray=[options,moreOptions],curOpts;for(var curIndex in optArray){curOpts=optArray[curIndex];if(typeof curOpts=="undefined")break;if(typeof curOpts!=='object'){this.options.text=curOpts;}else{for(var option in curOpts){if(this.modules[option]){$.extend(true,this.options[option],curOpts[option]);}else{this.options[option]=curOpts[option];}}}}},animateIn:function(callback){this.animating="in";var animation;if(typeof this.options.animation.effect_in!=="undefined")animation=this.options.animation.effect_in;else
animation=this.options.animation;if(animation==="none"){this.elem.show();callback();}else if(animation==="show")this.elem.show(this.options.animate_speed,callback);else if(animation==="fade")this.elem.show().fadeTo(this.options.animate_speed,this.options.opacity,callback);else if(animation==="slide")this.elem.slideDown(this.options.animate_speed,callback);else if(typeof animation==="function")animation("in",callback,this.elem);else
this.elem.show(animation,(typeof this.options.animation.options_in==="object"?this.options.animation.options_in:{}),this.options.animate_speed,callback);if(this.elem.parent().hasClass('ui-effects-wrapper'))this.elem.parent().css({"position":"fixed","overflow":"visible"});if(animation!=="slide")this.elem.css("overflow","visible");this.container.css("overflow","hidden");},animateOut:function(callback){this.animating="out";var animation;if(typeof this.options.animation.effect_out!=="undefined")animation=this.options.animation.effect_out;else
animation=this.options.animation;if(animation==="none"){this.elem.hide();callback();}else if(animation==="show")this.elem.hide(this.options.animate_speed,callback);else if(animation==="fade")this.elem.fadeOut(this.options.animate_speed,callback);else if(animation==="slide")this.elem.slideUp(this.options.animate_speed,callback);else if(typeof animation==="function")animation("out",callback,this.elem);else
this.elem.hide(animation,(typeof this.options.animation.options_out==="object"?this.options.animation.options_out:{}),this.options.animate_speed,callback);if(this.elem.parent().hasClass('ui-effects-wrapper'))this.elem.parent().css({"position":"fixed","overflow":"visible"});if(animation!=="slide")this.elem.css("overflow","visible");this.container.css("overflow","hidden");},position:function(dontSkipHidden){var s=this.options.stack,e=this.elem;if(e.parent().hasClass('ui-effects-wrapper'))e=this.elem.css({"left":"0","top":"0","right":"0","bottom":"0"}).parent();if(typeof s.context==="undefined")s.context=body;if(!s)return;if(typeof s.nextpos1!=="number")s.nextpos1=s.firstpos1;if(typeof s.nextpos2!=="number")s.nextpos2=s.firstpos2;if(typeof s.addpos2!=="number")s.addpos2=0;var hidden=e.css("display")==="none";if(!hidden||dontSkipHidden){var curpos1,curpos2;var animate={};var csspos1;switch(s.dir1){case"down":csspos1="top";break;case"up":csspos1="bottom";break;case"left":csspos1="right";break;case"right":csspos1="left";break;}
curpos1=parseInt(e.css(csspos1).replace(/(?:\..*|[^0-9.])/g,''));if(isNaN(curpos1))curpos1=0;if(typeof s.firstpos1==="undefined"&&!hidden){s.firstpos1=curpos1;s.nextpos1=s.firstpos1;}
var csspos2;switch(s.dir2){case"down":csspos2="top";break;case"up":csspos2="bottom";break;case"left":csspos2="right";break;case"right":csspos2="left";break;}
curpos2=parseInt(e.css(csspos2).replace(/(?:\..*|[^0-9.])/g,''));if(isNaN(curpos2))curpos2=0;if(typeof s.firstpos2==="undefined"&&!hidden){s.firstpos2=curpos2;s.nextpos2=s.firstpos2;}
if((s.dir1==="down"&&s.nextpos1+e.height()>(s.context.is(body)?jwindow.height():s.context.prop('scrollHeight')))||(s.dir1==="up"&&s.nextpos1+e.height()>(s.context.is(body)?jwindow.height():s.context.prop('scrollHeight')))||(s.dir1==="left"&&s.nextpos1+e.width()>(s.context.is(body)?jwindow.width():s.context.prop('scrollWidth')))||(s.dir1==="right"&&s.nextpos1+e.width()>(s.context.is(body)?jwindow.width():s.context.prop('scrollWidth')))){s.nextpos1=s.firstpos1;s.nextpos2+=s.addpos2+(typeof s.spacing2==="undefined"?25:s.spacing2);s.addpos2=0;}
if(s.animation&&s.nextpos2<curpos2){switch(s.dir2){case"down":animate.top=s.nextpos2+"px";break;case"up":animate.bottom=s.nextpos2+"px";break;case"left":animate.right=s.nextpos2+"px";break;case"right":animate.left=s.nextpos2+"px";break;}}else{if(typeof s.nextpos2==="number")e.css(csspos2,s.nextpos2+"px");}
switch(s.dir2){case"down":case"up":if(e.outerHeight(true)>s.addpos2)s.addpos2=e.height();break;case"left":case"right":if(e.outerWidth(true)>s.addpos2)s.addpos2=e.width();break;}
if(typeof s.nextpos1==="number"){if(s.animation&&(curpos1>s.nextpos1||animate.top||animate.bottom||animate.right||animate.left)){switch(s.dir1){case"down":animate.top=s.nextpos1+"px";break;case"up":animate.bottom=s.nextpos1+"px";break;case"left":animate.right=s.nextpos1+"px";break;case"right":animate.left=s.nextpos1+"px";break;}}else
e.css(csspos1,s.nextpos1+"px");}
if(animate.top||animate.bottom||animate.right||animate.left)e.animate(animate,{duration:this.options.position_animate_speed,queue:false});switch(s.dir1){case"down":case"up":s.nextpos1+=e.height()+(typeof s.spacing1==="undefined"?25:s.spacing1);break;case"left":case"right":s.nextpos1+=e.width()+(typeof s.spacing1==="undefined"?25:s.spacing1);break;}}
return this;},queuePosition:function(animate,milliseconds){if(timer)clearTimeout(timer);if(!milliseconds)milliseconds=10;timer=setTimeout(function(){PNotify.positionAll(animate)},milliseconds);return this;},cancelRemove:function(){if(this.timer)window.clearTimeout(this.timer);if(this.state==="closing"){this.elem.stop(true);this.state="open";this.animating="in";this.elem.css("height","auto").animate({"width":this.options.width,"opacity":this.options.opacity},"fast");}
return this;},queueRemove:function(){var that=this;this.cancelRemove();this.timer=window.setTimeout(function(){that.remove(true);},(isNaN(this.options.delay)?0:this.options.delay));return this;}});$.extend(PNotify,{notices:[],removeAll:function(){$.each(PNotify.notices,function(){if(this.remove)this.remove();});},positionAll:function(animate){if(timer)clearTimeout(timer);timer=null;$.each(PNotify.notices,function(){var s=this.options.stack;if(!s)return;s.nextpos1=s.firstpos1;s.nextpos2=s.firstpos2;s.addpos2=0;s.animation=animate;});$.each(PNotify.notices,function(){this.position();});},styling:{jqueryui:{container:"ui-widget ui-widget-content ui-corner-all",notice:"ui-state-highlight",notice_icon:"ui-icon ui-icon-info",info:"",info_icon:"ui-icon ui-icon-info",success:"ui-state-default",success_icon:"ui-icon ui-icon-circle-check",error:"ui-state-error",error_icon:"ui-icon ui-icon-alert"},bootstrap2:{container:"alert",notice:"",notice_icon:"icon-exclamation-sign",info:"alert-info",info_icon:"icon-info-sign",success:"alert-success",success_icon:"icon-ok-sign",error:"alert-error",error_icon:"icon-warning-sign"},bootstrap3:{container:"alert",notice:"alert-default",notice_icon:"glyphicon glyphicon-exclamation-sign",error:"alert-danger",error_icon:"glyphicon glyphicon-warning-sign",primary:"alert-primary",primary_icon:"glyphicon glyphicon-exclamation-sign",info:"alert-info",info_icon:"glyphicon glyphicon-info-sign",success:"alert-success",success_icon:"glyphicon glyphicon-ok-sign",warning:"alert-warning",warning_icon:"glyphicon glyphicon-ok-sign",danger:"alert-danger",danger_icon:"glyphicon glyphicon-warning-sign",alert:"alert-alert",alert_icon:"glyphicon glyphicon-warning-sign",system:"alert-system",system_icon:"glyphicon glyphicon-warning-sign",dark:"alert-dark",dark_icon:"glyphicon glyphicon-warning-sign",}}});PNotify.styling.fontawesome=$.extend({},PNotify.styling.bootstrap3);$.extend(PNotify.styling.fontawesome,{notice_icon:"fa fa-exclamation-circle",error_icon:"fa fa-warning",primary_icon:"fa fa-info",info_icon:"fa fa-info",success_icon:"fa fa-check",warning_icon:"fa fa-check",danger_icon:"fa fa-info",alert_icon:"fa fa-check",system_icon:"fa fa-warning",dark_icon:"fa fa-warning",});if(document.body)do_when_ready();else
$(do_when_ready);return PNotify;}));(function(factory){if(typeof define==='function'&&define.amd){define('pnotify.buttons',['jquery','pnotify'],factory);}else{factory(jQuery,PNotify);}}(function($,PNotify){PNotify.prototype.options.buttons={closer:true,closer_hover:true,sticker:true,sticker_hover:true,labels:{close:"Close",stick:"Stick"}};PNotify.prototype.modules.buttons={myOptions:null,closer:null,sticker:null,init:function(notice,options){var that=this;this.myOptions=options;notice.elem.on({"mouseenter":function(e){if(that.myOptions.sticker&&!(notice.options.nonblock&&notice.options.nonblock.nonblock))that.sticker.trigger("pnotify_icon").css("visibility","visible");if(that.myOptions.closer&&!(notice.options.nonblock&&notice.options.nonblock.nonblock))that.closer.css("visibility","visible");},"mouseleave":function(e){if(that.myOptions.sticker_hover)that.sticker.css("visibility","hidden");if(that.myOptions.closer_hover)that.closer.css("visibility","hidden");}});this.sticker=$("<div />",{"class":"ui-pnotify-sticker","css":{"cursor":"pointer","visibility":options.sticker_hover?"hidden":"visible"},"click":function(){notice.options.hide=!notice.options.hide;if(notice.options.hide)notice.queueRemove();else
notice.cancelRemove();$(this).trigger("pnotify_icon");}}).bind("pnotify_icon",function(){$(this).children().removeClass(notice.styles.pin_up+" "+notice.styles.pin_down).addClass(notice.options.hide?notice.styles.pin_up:notice.styles.pin_down);}).append($("<span />",{"class":notice.styles.pin_up,"title":options.labels.stick})).prependTo(notice.container);if(!options.sticker||(notice.options.nonblock&&notice.options.nonblock.nonblock))this.sticker.css("display","none");this.closer=$("<div />",{"class":"ui-pnotify-closer","css":{"cursor":"pointer","visibility":options.closer_hover?"hidden":"visible"},"click":function(){notice.remove(false);that.sticker.css("visibility","hidden");that.closer.css("visibility","hidden");}}).append($("<span />",{"class":notice.styles.closer,"title":options.labels.close})).prependTo(notice.container);if(!options.closer||(notice.options.nonblock&&notice.options.nonblock.nonblock))this.closer.css("display","none");},update:function(notice,options){this.myOptions=options;if(!options.closer||(notice.options.nonblock&&notice.options.nonblock.nonblock))this.closer.css("display","none");else if(options.closer)this.closer.css("display","block");if(!options.sticker||(notice.options.nonblock&&notice.options.nonblock.nonblock))this.sticker.css("display","none");else if(options.sticker)this.sticker.css("display","block");this.sticker.trigger("pnotify_icon");if(options.sticker_hover)this.sticker.css("visibility","hidden");else if(!(notice.options.nonblock&&notice.options.nonblock.nonblock))this.sticker.css("visibility","visible");if(options.closer_hover)this.closer.css("visibility","hidden");else if(!(notice.options.nonblock&&notice.options.nonblock.nonblock))this.closer.css("visibility","visible");}};$.extend(PNotify.styling.jqueryui,{closer:"ui-icon ui-icon-close",pin_up:"ui-icon ui-icon-pin-w",pin_down:"ui-icon ui-icon-pin-s"});$.extend(PNotify.styling.bootstrap2,{closer:"icon-remove",pin_up:"icon-pause",pin_down:"icon-play"});$.extend(PNotify.styling.bootstrap3,{closer:"glyphicon glyphicon-remove",pin_up:"glyphicon glyphicon-pause",pin_down:"glyphicon glyphicon-play"});$.extend(PNotify.styling.fontawesome,{closer:"fa fa-times",pin_up:"fa fa-pause",pin_down:"fa fa-play"});}));(function(factory){if(typeof define==='function'&&define.amd){define('pnotify.confirm',['jquery','pnotify'],factory);}else{factory(jQuery,PNotify);}}(function($,PNotify){PNotify.prototype.options.confirm={confirm:false,prompt:false,prompt_class:"",prompt_default:"",prompt_multi_line:false,align:"right",buttons:[{text:"Ok",addClass:"",promptTrigger:true,click:function(notice,value){notice.remove();notice.get().trigger("pnotify.confirm",[notice,value]);}},{text:"Cancel",addClass:"",click:function(notice){notice.remove();notice.get().trigger("pnotify.cancel",notice);}}]};PNotify.prototype.modules.confirm={container:null,prompt:null,init:function(notice,options){this.container=$('<div style="margin-top:5px;clear:both;" />').css('text-align',options.align).appendTo(notice.container);if(options.confirm||options.prompt)this.makeDialog(notice,options);else
this.container.hide();},update:function(notice,options){if(options.confirm){this.makeDialog(notice,options);this.container.show();}else{this.container.hide().empty();}},afterOpen:function(notice,options){if(options.prompt)this.prompt.focus();},makeDialog:function(notice,options){var already=false,that=this,btn,elem;this.container.empty();if(options.prompt){this.prompt=$('<'+(options.prompt_multi_line?'textarea rows="5"':'input type="text"')+' style="margin-bottom:5px;clear:both;" />').addClass(notice.styles.input+' '+options.prompt_class).val(options.prompt_default).appendTo(this.container);}
for(var i in options.buttons){btn=options.buttons[i];if(already)this.container.append(' ');else
already=true;elem=$('<button type="button" />').addClass(notice.styles.btn+' '+btn.addClass).text(btn.text).appendTo(this.container).on("click",(function(btn){return function(){if(typeof btn.click=="function"){btn.click(notice,options.prompt?that.prompt.val():null);}}})(btn));if(options.prompt&&!options.prompt_multi_line&&btn.promptTrigger)this.prompt.keypress((function(elem){return function(e){if(e.keyCode==13)elem.click();}})(elem));if(notice.styles.text){elem.wrapInner('<span class="'+notice.styles.text+'"></span>');}
if(notice.styles.btnhover){elem.hover((function(elem){return function(){elem.addClass(notice.styles.btnhover);}})(elem),(function(elem){return function(){elem.removeClass(notice.styles.btnhover);}})(elem));}
if(notice.styles.btnactive){elem.on("mousedown",(function(elem){return function(){elem.addClass(notice.styles.btnactive);}})(elem)).on("mouseup",(function(elem){return function(){elem.removeClass(notice.styles.btnactive);}})(elem));}
if(notice.styles.btnfocus){elem.on("focus",(function(elem){return function(){elem.addClass(notice.styles.btnfocus);}})(elem)).on("blur",(function(elem){return function(){elem.removeClass(notice.styles.btnfocus);}})(elem));}}}};$.extend(PNotify.styling.jqueryui,{btn:"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only",btnhover:"ui-state-hover",btnactive:"ui-state-active",btnfocus:"ui-state-focus",input:"",text:"ui-button-text"});$.extend(PNotify.styling.bootstrap2,{btn:"btn",input:""});$.extend(PNotify.styling.bootstrap3,{btn:"btn btn-default",input:"form-control"});$.extend(PNotify.styling.fontawesome,{btn:"btn btn-default",input:"form-control"});}));(function(factory){if(typeof define==='function'&&define.amd){define('pnotify.desktop',['jquery','pnotify'],factory);}else{factory(jQuery,PNotify);}}(function($,PNotify){var permission;var notify=function(title,options){if("Notification"in window){notify=function(title,options){return new Notification(title,options);};}else if("mozNotification"in navigator){notify=function(title,options){return navigator.mozNotification.createNotification(title,options.body,options.icon).show();};}else if("webkitNotifications"in window){notify=function(title,options){return window.webkitNotifications.createNotification(options.icon,title,options.body);};}else{notify=function(title,options){return null;};}
return notify(title,options);};PNotify.prototype.options.desktop={desktop:false,icon:null,tag:null};PNotify.prototype.modules.desktop={tag:null,icon:null,genNotice:function(notice,options){if(options.icon===null){this.icon="http://sciactive.com/pnotify/includes/desktop/"+notice.options.type+".png";}else if(options.icon===false){this.icon=null;}else{this.icon=options.icon;}
if(this.tag===null||options.tag!==null){this.tag=options.tag===null?"PNotify-"+Math.round(Math.random()*1000000):options.tag;}
notice.desktop=notify(notice.options.title,{icon:this.icon,body:notice.options.text,tag:this.tag});if(!("close"in notice.desktop)){notice.desktop.close=function(){notice.desktop.cancel();};}
notice.desktop.onclick=function(){notice.elem.trigger("click");};notice.desktop.onclose=function(){if(notice.state!=="closing"&&notice.state!=="closed"){notice.remove();}};},init:function(notice,options){if(!options.desktop)return;permission=PNotify.desktop.checkPermission();if(permission!=0)return;this.genNotice(notice,options);},update:function(notice,options,oldOpts){if(permission!=0||!options.desktop)return;this.genNotice(notice,options);},beforeOpen:function(notice,options){if(permission!=0||!options.desktop)return;notice.elem.css({'left':'-10000px','display':'none'});},afterOpen:function(notice,options){if(permission!=0||!options.desktop)return;notice.elem.css({'left':'-10000px','display':'none'});if("show"in notice.desktop){notice.desktop.show();}},beforeClose:function(notice,options){if(permission!=0||!options.desktop)return;notice.elem.css({'left':'-10000px','display':'none'});},afterClose:function(notice,options){if(permission!=0||!options.desktop)return;notice.elem.css({'left':'-10000px','display':'none'});notice.desktop.close();}};PNotify.desktop={permission:function(){if(typeof Notification!=="undefined"&&"requestPermission"in Notification){Notification.requestPermission();}else if("webkitNotifications"in window){window.webkitNotifications.requestPermission();}},checkPermission:function(){if(typeof Notification!=="undefined"&&"permission"in Notification){return(Notification.permission=="granted"?0:1);}else if("webkitNotifications"in window){return window.webkitNotifications.checkPermission();}else{return 1;}}};permission=PNotify.desktop.checkPermission();}));;var setupPopupLinks=function(selector){selector.magnificPopup({type:'ajax',midClick:true,removalDelay:500,mainClass:'mfp-zoomIn',overflowY:'scroll'});}
var setupLinkInputs=function(selector){selector.on("click",function(e){e.stopPropagation();$(this).select();});}
var showCookieInfo=function(text,ok,moreinfo){(new PNotify({text:text,icon:'fa fa-info',addclass:'stack_top_left',stack:{"dir1":"down","dir2":"right","push":"top","spacing1":10,"spacing2":10},hide:false,confirm:{confirm:true,buttons:[{text:ok,addClass:'btn-primary',click:function(notice){document.cookie="acceptcookie=yes; expires=Thu, 18 Dec 2333 12:00:00 UTC; path=/";notice.remove();}},{text:moreinfo,click:function(notice){document.location.href="/page/privacy";}}]},buttons:{closer:false,sticker:false},history:{history:false}}));}
$(document).ready(function(){setupPopupLinks($('a.magnific'));setupLinkInputs($('input.linkInput'));});(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-3666711-16','auto');ga('send','pageview');;;if (!$.nlsc) $.nlsc={resMap:{}};
$.nlsc.resMap["https://www.docdroid.net/assets/422ebb1b/js/lib/nprogress.js"]={h:"589488501",d:1};
$.nlsc.resMap["https://www.docdroid.net/assets/422ebb1b/js/pdfjs.js"]={h:"849872907",d:1};
$.nlsc.resMap["https://www.docdroid.net/assets/422ebb1b/js/lib/node_modules/pdfjs-dist/web/compatibility.js"]={h:"598163789",d:1};
$.nlsc.resMap["https://www.docdroid.net/assets/422ebb1b/js/lib/node_modules/pdfjs-dist/build/pdf.js"]={h:"908083953",d:1};
$.nlsc.resMap["https://www.docdroid.net/assets/422ebb1b/js/lib/node_modules/pdfjs-dist/web/pdf_viewer.js"]={h:"1069743762",d:1};
$.nlsc.resMap["https://www.docdroid.net/assets/422ebb1b/js/utility/utility.js"]={h:"211758205",d:1};
$.nlsc.resMap["https://www.docdroid.net/assets/422ebb1b/js/lib/magnific-popup/jquery.magnific-popup.js"]={h:"917866395",d:1};
$.nlsc.resMap["https://www.docdroid.net/assets/422ebb1b/js/lib/pnotify.js"]={h:"663764951",d:1};
$.nlsc.resMap["https://www.docdroid.net/assets/422ebb1b/js/global.js"]={h:"948531109",d:1};
